#region <auto-generated>
//此代码由T4模板自动生成 
//生成时间 2017-04-01 03:30:52
#endregion
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Text;
using Common.Data;
using Common.Data.Extenstions;
using DAL;
using System.Data;

namespace DBSql.Iso
{
    public class IsoBCD : EFRepository<DataModel.Models.IsoBCD>
    {
        public DataTable GetBCFile(int projId)
        {
            string sql = string.Format(@"select NEWID() as WYID,* from (
                        select Id,ProjID,CONVERT(varchar(100), CreationTime, 23)+'分包设计策划单' as Name,'分包设计策划单' as IsoType from IsoFBSJCH
                        union
                        select Id,ProjID,CONVERT(varchar(100), CreationTime, 23)+'设计策划单' as Name,'设计策划单' as IsoType from IsoSJCH
                        union
                        select Id,ProjID,CONVERT(varchar(100), CreationTime, 23)+'项目备忘录' as Name,'项目备忘录' as IsoType from IsoRemark
                        union
                        select Id,ProjID,CONVERT(varchar(100), CreationTime, 23)+'专业指导纪要表' as Name,'专业指导纪要表' as IsoType from IsoZYZDJYB
                        union
                        select Id,ProjID,CONVERT(varchar(100), CreationTime, 23)+'设计评审纪要表' as Name,'设计评审纪要表' as IsoType from IsoSJPSJYB) x where ProjID={0}", projId);
            return DAL.DBExecute.ExecuteDataTable(sql);
        }
    }
}
