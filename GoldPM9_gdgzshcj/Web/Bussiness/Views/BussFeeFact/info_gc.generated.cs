#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\BussFeeFact\info_gc.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/BussFeeFact/info_gc.cshtml")]
    public partial class _Views_BussFeeFact_info_gc_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.BussFeeFact>
    {
        public _Views_BussFeeFact_info_gc_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
    $(function () {
        JQ.form.submitInit({
            formid: 'BussFeeFactForm',//formid提交需要用到
            buttonTypes: ['submit', 'close'],//默认按钮
            succesCollBack: function (data) {//成功回调函数,data为服务器返回值
                JQ.treegrid.autoReftreegrid();//刷新上一级数据表格，必须在close窗体前调用
                JQ.dialog.dialogClose();//关闭窗体放在最后一步执行，以避免找不到事件源
            }
        });


        $.extend($.fn.datagrid.defaults.editors, {
            span: {
                init: function(container, options){
                    var input = $('<span></span>').appendTo(container);
                    return input;
                },
                destroy: function(target){
                    //$(target).text('destroy');
                },
                getValue: function(target){
                    return $(target).text();
                },
                setValue: function(target, value){
                    $(target).text(value);
                },
                resize: function(target, width){
                    //$(target).textbox('resize',width);
                }
            }
        });
    });
</script>
");

            
            #line 37 "..\..\Views\BussFeeFact\info_gc.cshtml"
 using (Html.BeginForm("save", "BussFeeFact", FormMethod.Post, new { @area = "Bussiness", @id = "BussFeeFactForm" }))
{
    
            
            #line default
            #line hidden
            
            #line 39 "..\..\Views\BussFeeFact\info_gc.cshtml"
Write(Html.HiddenFor(m => m.Id));

            
            #line default
            #line hidden
            
            #line 39 "..\..\Views\BussFeeFact\info_gc.cshtml"
                              

            
            #line default
            #line hidden
WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"CompanyType\"");

WriteLiteral(" name=\"CompanyType\"");

WriteLiteral(" value=\"FGS\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"4\"");

WriteLiteral(" align=\"center\"");

WriteLiteral(" style=\"border:none;\"");

WriteLiteral(">收款合同登记</td>\r\n        </tr>\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"4\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" id=\"FeeGrid\"");

WriteLiteral("></table>\r\n                <div");

WriteLiteral(" id=\"FeeGridPanel\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n                    <span");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n                        <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-plus\'\"");

WriteLiteral(" onclick=\"Add()\"");

WriteLiteral(">新增</a>\r\n                        <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-minus-circle\'\"");

WriteLiteral(" onclick=\"FactDel()\"");

WriteLiteral(">删除</a>\r\n                    </span>\r\n                </div>\r\n                <sc" +
"ript");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
                    var CurrentRow;
                    $(function () {
                        $(""#FeeGrid"").datagrid({
                            idField: 'Id',//主键的字段
                            singleSelect: false,
                            pagination: false,
                            url: '");

            
            #line 61 "..\..\Views\BussFeeFact\info_gc.cshtml"
                             Write(Url.Action("json", "BussFeeFact", new { @area = "Bussiness" }));

            
            #line default
            #line hidden
WriteLiteral("?CompanyType=FGS\',//请求的地址\r\n                            queryParams: {ConID:");

            
            #line 62 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                           Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral(@"},
                            rownumbers: true,
                            toolbar: '#FeeGridPanel',//工具栏的容器ID
                            columns: [[
                                { title: '合同名称', field: 'ConID', width: 180, align: 'center',
                                    formatter: function (value, row) {
                                        return row.ConName;
                                    },
                                    editor:{
                                        type:""combogrid"",
                                        options: {
                                            panelWidth: 650,
                                            idField: 'Id',
                                            textField: 'ConName',
                                            url: '");

            
            #line 76 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                             Write(Url.Action("json","BussContract"));

            
            #line default
            #line hidden
WriteLiteral(@"?CompanyType=FGS&FatherID=0',
                                            queryParams:{FatherID:'0'},
                                            pagination: true,
                                            nowrap:false,//是否换行
                                            striped: true,
                                            method: 'post',
                                            singleSelect:true,
                                            required: true,
                                            columns: [[
                                                        { field: 'Id', title: '合同编号', width: 100 ,hidden:true,halign:'center'},
                                                        { field: 'ConNumber', title: '合同编号', width: 100,halign:'center' },
                                                        { field: 'ConName', title: '合同名称', width: 150,halign:'center' },
                                                        { field: 'CustName', title: '客户单位', width: 100,halign:'center' },
                                                        { field: 'ConFee', title: '合同金额', width: 100,halign:'center',align:'right',formatter:function (value, row, index) {
                                                            if (row.ConFulfilType == '");

            
            #line 90 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                                                                  Write((int)DataModel.ConDealWays.开口);

            
            #line default
            #line hidden
WriteLiteral("\') {\r\n                                                                return \"<di" +
"v title=\\\"开口合同、红色金额为主合同金额\\\"><span>\" + row.SumConFee + \"</span><span style=\\\"colo" +
"r:red;\\\">（\" + row.ConFee + \"）</span></div>\";\r\n                                  " +
"                          } else {\r\n                                            " +
"                    return \"<div title=\\\"闭口合同、红色金额为主合同金额\\\"><span>\" + row.SumConB" +
"alanceFee + \"</span><span style=\\\"color:red;\\\">（\" + row.ConBalanceFee + \"）</span" +
"></div>\";\r\n                                                            }\r\n      " +
"                                                  } },\r\n                        " +
"                    ]],\r\n                                            keyHandler:" +
" {query: function (keyword) {\r\n                                                v" +
"ar  _params= $(this).combogrid(\"grid\").datagrid(\"options\").queryParams;\r\n       " +
"                                         _params.Filter=keyword;\r\n              " +
"                                  $(this).combogrid(\"grid\").datagrid(\'load\',_par" +
"ams);\r\n                                                $(this).combogrid(\"setVal" +
"ue\", keyword);\r\n                                            }},\r\n               " +
"                             onSelect:function (rowIndex, rowData) {\r\n          " +
"                                      var _row=$(this).attr(\"_row\");\r\n          " +
"                                      //debugger;\r\n                             " +
"                   var EditorArray=$(\'#FeeGrid\').datagrid(\'getEditors\',_row);\r\n " +
"                                               $(EditorArray[1].target).combogri" +
"d(\"grid\").datagrid(\"load\",{ConID:rowData.Id,Filter:\'\'});\r\n                      " +
"                          var ConFeeToop=\"\";\r\n                                  " +
"              var ConFeeHtml=\"\";\r\n                                              " +
"  var CurrentConFee=0;//合同金额\r\n                                                if" +
" (rowData.ConFulfilType == \'");

            
            #line 111 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                                                          Write((int)DataModel.ConDealWays.开口);

            
            #line default
            #line hidden
WriteLiteral("\') {\r\n                                                    ConFeeHtml= rowData.Sum" +
"ConFee+\"（\" + rowData.ConFee + \"）\";\r\n                                            " +
"        ConFeeToop=\"开口合同、括号中主合同金额\";\r\n                                           " +
"         CurrentConFee=rowData.SumConFee;\r\n                                     " +
"           } else {\r\n                                                    ConFeeH" +
"tml=rowData.SumConBalanceFee+\"（\" + rowData.ConBalanceFee + \"）\";\r\n               " +
"                                     ConFeeToop=\"闭口合同(结算金额)、括号中主合同金额\";\r\n        " +
"                                            CurrentConFee=rowData.SumConBalanceF" +
"ee;\r\n                                                }\r\n                        " +
"                        $(EditorArray[2].target).text(ConFeeHtml);\r\n            " +
"                                    $(EditorArray[2].target).attr(\"title\",ConFee" +
"Toop);\r\n                                                $(EditorArray[2].target)" +
".attr(\"CurrentConFee\",CurrentConFee);//设置合同金额\r\n                                 " +
"               $(EditorArray[3].target).text(rowData.FeeFact==null?0:rowData.Fee" +
"Fact);\r\n                                                $(EditorArray[4].target)" +
".attr(\"_row\",_row);\r\n\r\n                                                GetPercen" +
"t(_row);\r\n                                            }\r\n                       " +
"                 }\r\n                                    }\r\n                     " +
"           },\r\n                                { title: \'项目名称\', field: \'ProjNumb" +
"er\', width: 180, align: \'center\', JQIsExclude: true,\r\n                          " +
"          formatter: function (value, row) {\r\n                                  " +
"      return row.ProjName;\r\n                                    },\r\n            " +
"                        editor:{\r\n                                        type:\"" +
"combogrid\",\r\n                                        options: {\r\n               " +
"                             panelWidth: 650,\r\n                                 " +
"           idField: \'ProjID\',\r\n                                            textF" +
"ield: \'ProjName\',\r\n                                            url: \'");

            
            #line 141 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                             Write(Url.Action("JsonProject", "BussFeeFact", new { @area = "Bussiness" }));

            
            #line default
            #line hidden
WriteLiteral("?CompanyType=FGS\',\r\n                                            queryParams:{ConI" +
"D:\'0\'},\r\n                                            pagination: true,\r\n        " +
"                                    nowrap:false,//是否换行\r\n                       " +
"                     striped: true,\r\n                                           " +
" method: \'post\',\r\n                                            required: true,\r\n " +
"                                           singleSelect:true,\r\n                 " +
"                           columns: [[\r\n                                        " +
"                { field: \'ProjID\', title: \'主键ID\', width: 100 ,hidden:true,},\r\n  " +
"                                                      { field: \'ProjNumber\', tit" +
"le: \'项目编号\', width: 100 },\r\n                                                     " +
"   { field: \'ProjName\', title: \'项目名称\', width: 150 },\r\n                          " +
"                              { field: \'Customer\', title: \'客户单位\', width: 100 },\r" +
"\n                                                        { field: \'ConFee\', titl" +
"e: \'金额\', width: 100 },\r\n                                            ]],\r\n       " +
"                                     keyHandler: {query: function (keyword) {\r\n " +
"                                               $(this).combogrid(\"grid\").datagri" +
"d(\'load\',{Filter:keyword,FatherID:\'0\'});\r\n                                      " +
"          $(this).combogrid(\"setValue\", keyword);\r\n                             " +
"               }},\r\n                                        }\r\n                 " +
"                   }\r\n                                },\r\n                      " +
"          { title: \'合同金额\', field: \'ConFee\', width: 100, align: \'right\',editor:\'s" +
"pan\'},\r\n                                { title: \'已收款金额\', field: \'SumFeeMoney\', " +
"width: 100, align: \'right\',editor:\'span\'},\r\n                                { ti" +
"tle: \'本次收款金额\', field: \'FeeMoney\', width: 100, align: \'right\',editor:{type:\'numbe" +
"rbox\',options: {  precision: 2,  required: true,onChange:function (_new,_old) {\r" +
"\n                                    if ($(this).attr(\"_row\")!=undefined) {\r\n   " +
"                                     GetPercent($(this).attr(\"_row\"));\r\n        " +
"                            }\r\n                                } }}},\r\n         " +
"                       { title: \'本次收款日期\', field: \'FeeData\', width: 100, align: \'" +
"center\',  editor: { type: \'datebox\',   options: { validType: [\'dateISO\'],require" +
"d: true } }  },\r\n                                { title: \'累计比例\', field: \'Persen" +
"t\', width: 80, align: \'center\', JQIsExclude: true,editor:\'span\' },\r\n            " +
"                    { title: \'是否结清\', field: \'IsSettle\', width: 100, align: \'cent" +
"er\', JQIsExclude: true },\r\n                            ]],\r\n                    " +
"        onEndEdit:function (rowIndex, rowData) {\r\n                              " +
"  alert(JSON.stringify(rowData));\r\n                                //var ed = $(" +
"\'#FeeGrid\').datagrid(\'getEditors\', rowIndex)[0];\r\n                              " +
"  //$(ed.target).combogrid(\'setValue\',rowData.Id);\r\n                            " +
"}\r\n                        });\r\n                    });\r\n\r\n                    f" +
"unction Add() {\r\n                        var rowlength=typeof($(\'#FeeGrid\').data" +
"grid(\"getRows\"))==\"undefined\"?0:$(\'#FeeGrid\').datagrid(\"getRows\").length;\r\n     " +
"                   $(\'#FeeGrid\').datagrid(\'appendRow\', {});\r\n                   " +
"     $(\'#FeeGrid\').datagrid(\'beginEdit\', rowlength);\r\n\r\n                        " +
"var ed = $(\'#FeeGrid\').datagrid(\'getEditors\', rowlength)[0];\r\n                  " +
"      $(ed.target).combogrid(\'grid\').attr(\"_row\",rowlength);\r\n                  " +
"  }\r\n\r\n                    function GetPercent(rowIndex) {\r\n                    " +
"    var EditorArray=$(\'#FeeGrid\').datagrid(\'getEditors\',rowIndex);\r\n            " +
"            //获取合同金额\r\n                        var CurrentConFee=isNaN(parseFloat" +
"($(EditorArray[2].target).attr(\"CurrentConFee\")))?0:parseFloat($(EditorArray[2]." +
"target).attr(\"CurrentConFee\"));\r\n                        //获取已收款\r\n              " +
"          var HasFee=isNaN(parseFloat($(EditorArray[3].target).text()))?0:parseF" +
"loat($(EditorArray[3].target).text());\r\n                        //获取本次收款金额\r\n    " +
"                    var getNum= isNaN(parseFloat($(EditorArray[4].target).number" +
"box(\'getValue\')))?0:parseFloat($(EditorArray[4].target).numberbox(\'getValue\'));\r" +
"\n                        if (CurrentConFee==0) {\r\n                            $(" +
"EditorArray[6].target).text(\"0%\");\r\n                        }\r\n                 " +
"       else {\r\n                            $(EditorArray[6].target).text(((HasFe" +
"e+getNum)/CurrentConFee*100).toFixed(2)+\"%\");\r\n                            if ((" +
"CurrentConFee-HasFee)>0) {\r\n                                $(EditorArray[4].tar" +
"get).numberbox({prompt:(CurrentConFee-HasFee)});\r\n                            }\r" +
"\n                        }\r\n\r\n                        $(EditorArray[6].target).a" +
"ttr(\"title\",\"(已收款金额+本次收款金额)/合同金额\");\r\n                    }\r\n                </sc" +
"ript>\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">备注说明</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" name=\"FeeNote\"");

WriteLiteral(" style=\"width:98%;\"");

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"required:true\"");

WriteLiteral(" validType=\"length[0,200]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 14285), Tuple.Create("\"", 14307)
            
            #line 218 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                                             , Tuple.Create(Tuple.Create("", 14293), Tuple.Create<System.Object, System.Int32>(Model.FeeNote
            
            #line default
            #line hidden
, 14293), false)
);

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">经办人</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" name=\"EmpId\"");

WriteLiteral(" style=\"width:98%;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" validType=\"length[0,19]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 14508), Tuple.Create("\"", 14528)
            
            #line 222 "..\..\Views\BussFeeFact\info_gc.cshtml"
                                   , Tuple.Create(Tuple.Create("", 14516), Tuple.Create<System.Object, System.Int32>(Model.EmpId
            
            #line default
            #line hidden
, 14516), false)
);

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <th>\r\n        " +
"        上传附件\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 231 "..\..\Views\BussFeeFact\info_gc.cshtml"
           Write(Html.Action("uploadFile", "usercontrol", new
           {
               @area = "Core",
               AttachRefID = Model.Id,
               AttachRefTable = "BussFeeFact"
           }));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

            
            #line 240 "..\..\Views\BussFeeFact\info_gc.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
