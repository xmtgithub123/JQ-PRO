#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 4 "..\..\Views\ArchShareFolder\fileList.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/ArchShareFolder/fileList.cshtml")]
    public partial class _Views_ArchShareFolder_fileList_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_ArchShareFolder_fileList_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\ArchShareFolder\fileList.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
        var ckTreeId = """";

        $(function () {

            $(""#WJ"").panel('open');
            $('#ML').panel('close');
            $(""#MLPanel"").hide();
            $(""#ArchShareFolderFilePanel"").show();

            $(function () {
                $('#lefttree').treegrid({
                    url: '");

            
            #line 18 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("filetreejson", "ArchShareFolder", new { @area= "Archive"}));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                    idField: \'id\',\r\n                    treeField: \'text\',\r\n " +
"                   border: 0,\r\n                    toolbar: \'#tbleft\',\r\n        " +
"            fit: true,\r\n                    animate: true,\r\n                    " +
"singleSelect: true,\r\n                    columns: [[\r\n                       { t" +
"itle: \'<b>选择节点</b>\', field: \'text\', width: 240, align: \'left\' }\r\n               " +
"     ]],\r\n                    onLoadSuccess: function (row, data) {\r\n           " +
"             FileBtnShow(true);\r\n                    },\r\n                    onS" +
"elect: function (node) {\r\n                        if (node.text == \"目录\") {\r\n    " +
"                        $(\"#WJ\").panel(\'close\');\r\n                            $(" +
"\'#ML\').panel(\'open\');\r\n                            $(\"#MLPanel\").show();\r\n      " +
"                      $(\"#ArchShareFolderFilePanel\").hide();\r\n                  " +
"          $(\'#MLGrid\').datagrid(\'load\', {\r\n                                Folde" +
"rId: node.id\r\n                            });\r\n                        } else {\r" +
"\n                            debugger;\r\n                            $(\"#WJ\").pan" +
"el(\'open\');\r\n                            $(\'#ML\').panel(\'close\');\r\n             " +
"               $(\"#MLPanel\").hide();\r\n                            $(\"#ArchShareF" +
"olderFilePanel\").show();\r\n                            $(\"#AttID\").val(node.id);\r" +
"\n                            $(\'#ArchShareFolderFileGrid\').datagrid(\'load\', {\r\n " +
"                               FolderId: node.id\r\n                            })" +
";\r\n                            if (node.empid == \'");

            
            #line 51 "..\..\Views\ArchShareFolder\fileList.cshtml"
                                          Write(ViewBag.EmpID);

            
            #line default
            #line hidden
WriteLiteral(@"')
                                FileBtnShow(false);
                            else
                                FileBtnShow(true);
                        }
                    }
                });

                JQ.datagrid.datagrid({
                    JQIsSearch: false,
                    JQPrimaryID: 'Id',//主键的字段
                    JQID: 'MLGrid',//数据表格ID
                    JQDialogTitle: '文件信息',//弹出窗体标题
                    JQWidth: '600',//弹出窗体宽
                    JQHeight: '600',//弹出窗体高
                    JQLoadingType: 'datagrid',//数据表格类型 [datagrid,treegrid]
                    JQFields: [""Id""],//追加的字段名
                    url: '");

            
            #line 68 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("json", "ArchShareFolderML",new { @area="Archive"}));

            
            #line default
            #line hidden
WriteLiteral("?FlderId=\' + ckTreeId + \'\',//请求的地址\r\n                    checkOnSelect: true,//是否包" +
"含check\r\n                    fitColumns: true,\r\n                    nowrap: false" +
",\r\n                    toolbar: \'#MLPanel\',//工具栏的容器ID\r\n                    colum" +
"ns: [[\r\n                        { field: \'ck\', align: \'center\', checkbox: true, " +
"JQIsExclude: true },\r\n                        { title: \'文件编号\', field: \'FileNumbe" +
"r\', width: 50, align: \'center\', sortable: true },\r\n                        { tit" +
"le: \'责任者\', field: \'Manager\', width: 50, align: \'center\', sortable: true, },\r\n   " +
"                     { title: \'文件材料题名\', field: \'FileName\', width: 100, align: \'c" +
"enter\', sortable: true },\r\n                        { title: \'日期\', field: \'Time\'," +
" width: 100, align: \'center\', sortable: true, formatter: JQ.tools.DateTimeFormat" +
"terByT },\r\n                        { title: \'页数\', field: \'PageNumber\', width: 10" +
"0, align: \'center\', sortable: true },\r\n                        { title: \'备注\', fi" +
"eld: \'Remark\', width: 100, align: \'center\', sortable: true },\r\n                 " +
"   ]]\r\n                });\r\n\r\n                JQ.datagrid.datagrid({\r\n          " +
"          JQIsSearch: true,\r\n                    JQPrimaryID: \'Id\',//主键的字段\r\n    " +
"                JQID: \'ArchShareFolderFileGrid\',//数据表格ID\r\n                    JQ" +
"DialogTitle: \'文件信息\',//弹出窗体标题\r\n                    JQWidth: \'600\',//弹出窗体宽\r\n      " +
"              JQHeight: \'600\',//弹出窗体高\r\n                    JQLoadingType: \'datag" +
"rid\',//数据表格类型 [datagrid,treegrid]\r\n                    JQFields: [\"Id\"],//追加的字段名" +
"\r\n                    url: \'");

            
            #line 93 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("filejson", "ArchShareFolder",new { @area="Archive"}));

            
            #line default
            #line hidden
WriteLiteral("\',//请求的地址\r\n                    checkOnSelect: true,//是否包含check\r\n                 " +
"   fitColumns: true,\r\n                    nowrap: false,\r\n                    to" +
"olbar: \'#ArchShareFolderFilePanel\',//工具栏的容器ID\r\n                    columns: [[\r\n" +
"                            { field: \'ck\', align: \'center\', checkbox: true, JQIs" +
"Exclude: true },\r\n                            { title: \'文件名称\', field: \'FileName\'" +
", width: 100, align: \'center\', sortable: true },\r\n                            {\r" +
"\n                                title: \'文件类型\', field: \'FileType\', width: 100, a" +
"lign: \'center\', sortable: true, formatter: function (val, data) {\r\n             " +
"                       if (data.FileType == \"IsoBCD\") {\r\n                       " +
"                 data.FileType = \"附件文件\";\r\n                                    } " +
"else {\r\n                                        data.FileType = data.FileType;\r\n" +
"                                    }\r\n                                    retur" +
"n data.FileType;\r\n                                }\r\n                           " +
" },\r\n                    ]]\r\n                });\r\n\r\n                $(\"#JQSearch" +
"\").textbox({\r\n                    buttonText: \'筛选\',\r\n                    buttonI" +
"con: \'fa fa-search\',\r\n                    height: 25,\r\n                    promp" +
"t: \'文件名称\',\r\n                    onClickButton: function () {\r\n                  " +
"      JQ.datagrid.searchGrid(\r\n                            {\r\n                  " +
"              dgID: \'ArchShareFolderFileGrid\',\r\n                                " +
"loadingType: \'datagrid\',\r\n                                queryParams: { FolderI" +
"d: $(\"#AttID\").val() }\r\n                            });\r\n                    }\r\n" +
"                });\r\n            });\r\n        });\r\n\r\n        function addMl(flag" +
") {\r\n            var url = \"\";\r\n            var node = $(\"#lefttree\").treegrid(\"" +
"getSelected\");\r\n            if (!isNaN(node)) {\r\n                JQ.dialog.info(" +
"\"请选择\");\r\n                return;\r\n            }\r\n            var mlDataId = 0;\r\n" +
"            if (flag > 1) {\r\n                var mlData = $(\"#MLGrid\").datagrid(" +
"\"getChecked\");\r\n                if (mlData.length == 0) {\r\n                    J" +
"Q.dialog.info(\"请选择要修改的目录\");\r\n                    return;\r\n                }\r\n   " +
"             debugger;\r\n                mlDataId = mlData[0].Id;\r\n            }\r" +
"\n\r\n            switch (flag) {\r\n                case 1:\r\n                    JQ." +
"dialog.dialog({\r\n                        title: \"添加文件\",\r\n                       " +
" url: \'");

            
            #line 153 "..\..\Views\ArchShareFolder\fileList.cshtml"
                         Write(Url.Action("add","ArchShareFolderML",new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"?FolderId=' + node.id + '',
                        width: '600',
                        height: '600',
                        JQID: 'ArchShareFolderFileGrid',
                        JQLoadingType: 'datagrid',
                        iconCls: 'fa fa-plus'
                    });
                    break;
                case 2:
                    JQ.dialog.dialog({
                        title: ""目录"",
                        url: '");

            
            #line 164 "..\..\Views\ArchShareFolder\fileList.cshtml"
                         Write(Url.Action("edit","ArchShareFolderML",new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"?FolderId=' + node.id + '&id=' + mlDataId + '',
                        width: '600',
                        height: '400',
                        JQID: 'lefttree',
                        JQLoadingType: 'treegrid',
                        iconCls: 'fa fa-plus'
                    });
                    break;
                case 3:
                    JQ.tools.ajax({
                        doBackResult: true,
                        url: '");

            
            #line 175 "..\..\Views\ArchShareFolder\fileList.cshtml"
                         Write(Url.Action("del","ArchShareFolderML",new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"?FolderId=' + node.id + '&id=' + mlDataId + '',
                    });
                    $('#MLGrid').treegrid('reload');
                    break;
            }
        }

        function save(flag) {
            var node = $(""#lefttree"").treegrid(""getSelected"");
            if (!isNaN(node)) {
                JQ.dialog.info(""请选择"");
                return;
            }
            var id = node.id;
            var Url = '';
            if (flag == 1) {
                Url = '");

            
            #line 191 "..\..\Views\ArchShareFolder\fileList.cshtml"
                  Write(Url.Action("add", "ArchShareFolder", new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"';
                JQ.dialog.dialog({
                    title: ""目录"",
                    url: Url + '?ParentId=' + id,
                    width: '600',
                    height: '400',
                    JQID: 'lefttree',
                    JQLoadingType: 'treegrid',
                    iconCls: 'fa fa-plus'
                });
            }
            else if (flag == 2) {
                Url = '");

            
            #line 203 "..\..\Views\ArchShareFolder\fileList.cshtml"
                  Write(Url.Action("edit", "ArchShareFolder", new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"';
                JQ.dialog.dialog({
                    title: ""目录"",
                    url: Url + '?Id=' + id,
                    width: '600',
                    height: '400',
                    JQID: 'lefttree',
                    JQLoadingType: 'treegrid',
                    iconCls: 'fa fa-plus'
                });
            }
            else {
                Url = '");

            
            #line 215 "..\..\Views\ArchShareFolder\fileList.cshtml"
                  Write(Url.Action("del", "ArchShareFolder", new { @area = "Archive", }));

            
            #line default
            #line hidden
WriteLiteral(@"';
                JQ.tools.ajax({
                    doBackResult: true,
                    url: Url,
                    data: 'Id=' + id
                });
                $('#lefttree').treegrid('reload');
                return;
            }
        }

        function savefile(flag) {
            if (flag == 1) {
                var id = $(""#lefttree"").treegrid(""getSelected"").id;
                if (isNaN(id)) {
                    JQ.dialog.info(""请选择"");
                    return;
                }
                JQ.dialog.dialog({
                    title: ""添加文件"",
                    url: '");

            
            #line 235 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("add","ArchShareFolderFile",new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?FolderId=' + id,
                    width: '600',
                    height: '600',
                    JQID: 'ArchShareFolderFileGrid',
                    JQLoadingType: 'datagrid',
                    iconCls: 'fa fa-plus'
                });
                return;
            }
            var row = $(""#ArchShareFolderFileGrid"").datagrid(""getSelections"");
            if (row.length <= 0) {
                JQ.dialog.info(""请选择"");
                return;
            }
            var id = row[0].Id;
            if (flag == 2) {
                JQ.dialog.dialog({
                    title: ""修改文件"",
                    url: '");

            
            #line 253 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("edit", "ArchShareFolderFile",new {@area="Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?Id=' + id,
                    width: '600',
                    height: '600',
                    JQID: 'ArchShareFolderFileGrid',
                    JQLoadingType: 'datagrid',
                    iconCls: 'fa fa-plus'
                });
            }
            else if (flag == 3) {
                var parm;
                $.each(row, function (i, n) {
                    if (i == 0) {
                        parm = ""id="" + n[""Id""];

                    } else {
                        parm += ""&id="" + n[""Id""];
                    }
                });

                JQ.tools.ajax({
                    doBackResult: true,
                    url: '");

            
            #line 274 "..\..\Views\ArchShareFolder\fileList.cshtml"
                     Write(Url.Action("del", "ArchShareFolderFile", new { @area = "Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"',
                    data: parm
                });
                $('#ArchShareFolderFileGrid').datagrid('reload');
                return;
            }
        }

        function downurl(url) {
            var _a = document.createElement(""a"");
            _a.setAttribute(""href"", url);
            document.body.appendChild(_a);
            _a.click();
            document.body.removeChild(_a);
        }

        function down() {
            var row = $(""#ArchShareFolderFileGrid"").datagrid(""getSelections"");
            if (row.length <= 0) {
                JQ.dialog.info(""请选择"");
                return;
            }

            var parm;
            $.each(row, function (i, n) {
                if (i == 0) {
                    parm = ""id="" + n[""Id""];

                } else {
                    parm += ""&id="" + n[""Id""];
                }
            });
            Url = '");

            
            #line 306 "..\..\Views\ArchShareFolder\fileList.cshtml"
              Write(Url.Action("DownFile", "ArchShareFolderFile", new { @area = "Archive" }));

            
            #line default
            #line hidden
WriteLiteral(@"?';
            downurl(Url + parm);
            $('#ArchShareFolderFileGrid').datagrid('reload');
        }

        function FileBtnShow(b) {
            if (b) {
                $(""#fileadd"").hide();
                $(""#fileedit"").hide();
                $(""#filedel"").hide();
            }
            else {
                $(""#fileadd"").show();
                $(""#fileedit"").show();
                $(""#filedel"").show();
            }
        }
    </script>
");

WriteLiteral("    ");

            
            #line 324 "..\..\Views\ArchShareFolder\fileList.cshtml"
Write(RenderPage("~/Areas/Core/Views/Shared/_Init.cshtml"));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

});

WriteLiteral("\r\n");

DefineSection("Body_Content", () => {

WriteLiteral("\r\n    <div");

WriteLiteral(" id=\"treePanel\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" style=\"overflow: hidden\"");

WriteLiteral(" fit=\"true\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" data-options=\"region:\'west\',split:false\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" id=\"lefttree\"");

WriteLiteral("></table>\r\n        </div>\r\n\r\n        <div");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(" style=\"background:#eee;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"WJ\"");

WriteLiteral(" style=\"height:100%;\"");

WriteLiteral(" class=\"easyui-panel\"");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" id=\"ArchShareFolderFileGrid\"");

WriteLiteral("></table>\r\n            </div>\r\n\r\n            <div");

WriteLiteral(" id=\"ML\"");

WriteLiteral(" style=\"height:100%;\"");

WriteLiteral(" class=\"easyui-panel\"");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" id=\"MLGrid\"");

WriteLiteral("></table>\r\n            </div>\r\n        </div>\r\n\r\n        <div");

WriteLiteral(" id=\"MLPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n            <span");

WriteLiteral(" JQPanel=\"mltoolbarPanel\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-plus\'\"");

WriteLiteral(" id=\"fileadd\"");

WriteLiteral(" onclick=\"addMl(1)\"");

WriteLiteral(">新增</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-pencil\'\"");

WriteLiteral(" id=\"fileedit\"");

WriteLiteral(" onclick=\"addMl(2)\"");

WriteLiteral(">修改</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-trash\'\"");

WriteLiteral(" id=\"filedel\"");

WriteLiteral(" onclick=\"addMl(3)\"");

WriteLiteral(">删除</a>\r\n            </span>\r\n        </div>\r\n\r\n        <div");

WriteLiteral(" id=\"ArchShareFolderFilePanel\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n            <span");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-plus\'\"");

WriteLiteral(" id=\"fileadd\"");

WriteLiteral(" onclick=\"savefile(1)\"");

WriteLiteral(">新增</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-pencil\'\"");

WriteLiteral(" id=\"fileedit\"");

WriteLiteral(" onclick=\"savefile(2)\"");

WriteLiteral(">修改</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-trash\'\"");

WriteLiteral(" id=\"filedel\"");

WriteLiteral(" onclick=\"savefile(3)\"");

WriteLiteral(">删除</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-minus-circle\'\"");

WriteLiteral(" onclick=\"down()\"");

WriteLiteral(">下载</a>\r\n            </span>\r\n            <input");

WriteLiteral(" id=\"startTime\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"easyui-datebox\"");

WriteLiteral(" style=\"width:110px\"");

WriteLiteral(" data-options=\"prompt: \'开始日期\'\"");

WriteLiteral(" JQWhereOptions=\"{ Key:\'CreationTime\', Contract:\'>=\',filedType:\'Date\' }\"");

WriteLiteral(">\r\n            至\r\n            <input");

WriteLiteral(" id=\"endTime\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"easyui-datebox\"");

WriteLiteral(" style=\"width:110px\"");

WriteLiteral(" data-options=\"prompt: \'结束日期\'\"");

WriteLiteral(" JQWhereOptions=\"{ Key:\'CreationTime\', Contract:\'<=\',filedType:\'Date\' }\"");

WriteLiteral(">&nbsp;\r\n\r\n            <input");

WriteLiteral(" id=\"JQSearch\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(" JQWhereOptions=\"{ \'Key\': \'FileName\', \'Contract\': \'like\' }\"");

WriteLiteral(" />\r\n        </div>\r\n    </div>\r\n    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" value=\"0\"");

WriteLiteral(" id=\"DeleterEmpId\"");

WriteLiteral(" JQWhereOptions=\"{ \'Key\': \'DeleterEmpId\', \'Contract\': \'=\',filedType:\'Int\' }\"");

WriteLiteral(" />\r\n    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" value=\"0\"");

WriteLiteral(" id=\"AttID\"");

WriteLiteral(" />\r\n");

});

        }
    }
}
#pragma warning restore 1591
