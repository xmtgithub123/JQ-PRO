#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 5 "..\..\Views\OaMail\MailWrite.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/OaMail/MailWrite.cshtml")]
    public partial class _Views_OaMail_MailWrite_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.OaMail>
    {
        public _Views_OaMail_MailWrite_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 2 "..\..\Views\OaMail\MailWrite.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        $(function () {\r\n            $(\'#lefttreeemp\').treegrid({\r\n           " +
"     url: \'");

            
            #line 10 "..\..\Views\OaMail\MailWrite.cshtml"
                 Write(Url.Action("employeeByDepJson", "usercontrol", new { @area = "Core", state = "closed" }));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                idField: \'id\',\r\n                treeField: \'text\',\r\n         " +
"       border: 0,\r\n                fit: true,\r\n                animate: true,\r\n " +
"               singleSelect: true,\r\n                columns: [[\r\n               " +
"    { title: \'\', field: \'text\', width: 240, align: \'left\' }\r\n                ]]," +
"\r\n                onLoadSuccess: function (row, data) {\r\n\r\n                },\r\n " +
"               onSelect: function (node) {\r\n                    if (node.isEmp) " +
"{\r\n                        var emp1 = $(\'#SendEmp\').textbox(\'getValue\').split(\'," +
"\');\r\n\r\n                        var arr = node.text.split(\',\');\r\n                " +
"        if (Enumerable.From(emp1).Contains(node.text)) {\r\n                      " +
"      var atext = Enumerable.From(emp1).Except(arr).Distinct().ToArray().join(\"," +
"\");\r\n                        }\r\n                        else {\r\n                " +
"            var atext = Enumerable.From(emp1).Union(arr).Distinct().ToArray().jo" +
"in(\",\");\r\n                        }\r\n                        $(\'#SendEmp\').textb" +
"ox(\'setValue\', atext);\r\n                    }\r\n                    else {\r\n     " +
"                   if (node.id != -1) {\r\n                            var emp1 = " +
"$(\'#SendEmp\').textbox(\'getValue\').split(\',\');\r\n                            //ale" +
"rt(node.id);\r\n\r\n                            var arr = [];\r\n                     " +
"       Enumerable.From(node.children)\r\n                                .ToArray(" +
")\r\n                                .forEach(function (i) {\r\n                    " +
"                arr.push(i.text);\r\n                                });\r\n        " +
"                    //debugger;\r\n                            var atext = Enumera" +
"ble.From(emp1).Union(arr).Distinct().ToArray().join(\",\");\r\n\r\n                   " +
"         $(\'#SendEmp\').textbox(\'setValue\', atext);\r\n                        }\r\n " +
"                   }\r\n                }\r\n            });\r\n            document.g" +
"etElementById(\"contentframe\").onload = function () {\r\n                var _mailC" +
"ontent = document.getElementById(\"divMailContent\");\r\n                document.ge" +
"tElementById(\"contentframe\").contentWindow.loadEditor(_mailContent.innerHTML);\r\n" +
"                _mailContent.parentNode.removeChild(_mailContent);\r\n            " +
"}\r\n            document.getElementById(\"contentframe\").setAttribute(\"src\", \"");

            
            #line 60 "..\..\Views\OaMail\MailWrite.cshtml"
                                                                     Write(Url.Action("Editor","OaNew",new { @area="OA" }));

            
            #line default
            #line hidden
WriteLiteral(@""");
        });


        function Reset() {
            $('#SendEmp').textbox('setValue', """");
            $('#MailTitle').textbox('setValue', """");
            document.getElementById(""contentframe"").contentWindow.resetEditor();
        }

        function Send(Flag) {
            var msg = ""您确定要发送邮件吗？"";
            if (Flag != 0) msg = ""您确定要保存到草稿箱吗？"";
            window.top.JQ.dialog.confirm(msg, function () {
                $(""#MailFlag"").val(Flag);
                document.getElementById(""MailNote"").setAttribute(""value"", document.getElementById(""contentframe"").contentWindow.getContent());
                JQ.form.submit({
                    formid: 'OaMailForm',
                    succesCollBack: function (data) {
                        if (Flag == 0)
                            window.location.href = '");

            
            #line 80 "..\..\Views\OaMail\MailWrite.cshtml"
                                               Write(Url.Action("MailSend", "OaMail",new { @area="Oa"}));

            
            #line default
            #line hidden
WriteLiteral("\';\r\n                        else\r\n                            window.location.hre" +
"f = \'");

            
            #line 82 "..\..\Views\OaMail\MailWrite.cshtml"
                                               Write(Url.Action("MailDraft", "OaMail",new { @area="Oa"}));

            
            #line default
            #line hidden
WriteLiteral("\';\r\n                    }\r\n                });\r\n            }, null);\r\n        }\r" +
"\n    </script>\r\n");

});

WriteLiteral("\r\n");

DefineSection("Body_Content", () => {

WriteLiteral("\r\n\r\n    <div");

WriteLiteral(" id=\"BaseQualificationlayout\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" style=\"overflow: hidden\"");

WriteLiteral(" fit=\"true\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" data-options=\"region:\'west\'\"");

WriteLiteral(" style=\"width:80%\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"tbQual\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-envelope\'\"");

WriteLiteral(" onclick=\"Send(0)\"");

WriteLiteral(">发送邮件</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-save\'\"");

WriteLiteral(" onclick=\"Send(1)\"");

WriteLiteral(">保存草稿箱</a>\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-refresh\'\"");

WriteLiteral(" onclick=\"Reset()\"");

WriteLiteral(">重置</a>\r\n            </div>\r\n");

            
            #line 99 "..\..\Views\OaMail\MailWrite.cshtml"
            
            
            #line default
            #line hidden
            
            #line 99 "..\..\Views\OaMail\MailWrite.cshtml"
             using (Html.BeginForm("save", "oamail", FormMethod.Post, new { @area = "Oa", @id = "OaMailForm" }))
            {
                
            
            #line default
            #line hidden
            
            #line 101 "..\..\Views\OaMail\MailWrite.cshtml"
           Write(Html.HiddenFor(m => m.Id));

            
            #line default
            #line hidden
            
            #line 101 "..\..\Views\OaMail\MailWrite.cshtml"
                                          

            
            #line default
            #line hidden
WriteLiteral("                <input");

WriteLiteral(" name=\"MailFlag\"");

WriteLiteral(" id=\"MailFlag\"");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" value=\"0\"");

WriteLiteral(" />\r\n");

WriteLiteral("                <input");

WriteLiteral(" name=\"TypeID\"");

WriteLiteral(" id=\"TypeID\"");

WriteLiteral(" type=\"hidden\"");

WriteAttribute("value", Tuple.Create(" value=\"", 4796), Tuple.Create("\"", 4819)
            
            #line 103 "..\..\Views\OaMail\MailWrite.cshtml"
, Tuple.Create(Tuple.Create("", 4804), Tuple.Create<System.Object, System.Int32>(ViewBag.TypeID
            
            #line default
            #line hidden
, 4804), false)
);

WriteLiteral(" />\r\n");

            
            #line 104 "..\..\Views\OaMail\MailWrite.cshtml"


            
            #line default
            #line hidden
WriteLiteral("                <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n                    <tr>\r\n                        <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">收件人</th>\r\n                        <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" name=\"SendEmp\"");

WriteLiteral(" id=\"SendEmp\"");

WriteLiteral(" style=\"width:98%;height:60px\"");

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"required:true,multiline:true,editable:false\"");

WriteAttribute("value", Tuple.Create(" value=\"", 5173), Tuple.Create("\"", 5197)
            
            #line 109 "..\..\Views\OaMail\MailWrite.cshtml"
                                                                                                      , Tuple.Create(Tuple.Create("", 5181), Tuple.Create<System.Object, System.Int32>(ViewBag.SendEmp
            
            #line default
            #line hidden
, 5181), false)
);

WriteLiteral(" />\r\n                        </td>\r\n                    </tr>\r\n                  " +
"  <tr>\r\n                        <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">标题</th>\r\n                        <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" name=\"MailTitle\"");

WriteLiteral(" id=\"MailTitle\"");

WriteLiteral(" style=\"width:98%;\"");

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"required:true\"");

WriteLiteral(" validType=\"length[0,255]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 5541), Tuple.Create("\"", 5565)
            
            #line 115 "..\..\Views\OaMail\MailWrite.cshtml"
                                                                                           , Tuple.Create(Tuple.Create("", 5549), Tuple.Create<System.Object, System.Int32>(Model.MailTitle
            
            #line default
            #line hidden
, 5549), false)
);

WriteLiteral(" />\r\n                        </td>\r\n                    </tr>\r\n\r\n                " +
"    <tr>\r\n                        <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">内容</th>\r\n                        <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                            <iframe");

WriteLiteral(" id=\"contentframe\"");

WriteLiteral(" frameborder=\"0\"");

WriteLiteral(" style=\"width:100%;height:300px\"");

WriteLiteral("></iframe>\r\n                            <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" name=\"MailNote\"");

WriteLiteral(" id=\"MailNote\"");

WriteLiteral(" />\r\n                        </td>\r\n                    </tr>\r\n\r\n                " +
"    <tr>\r\n                        <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">发送日期</th>\r\n                        <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" name=\"MailDate\"");

WriteLiteral(" readonly=\"readonly\"");

WriteLiteral(" style=\"width:98%;\"");

WriteLiteral(" class=\"easyui-datebox\"");

WriteLiteral(" validType=\"length[0,23]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 6260), Tuple.Create("\"", 6283)
            
            #line 130 "..\..\Views\OaMail\MailWrite.cshtml"
                                                                 , Tuple.Create(Tuple.Create("", 6268), Tuple.Create<System.Object, System.Int32>(Model.MailDate
            
            #line default
            #line hidden
, 6268), false)
);

WriteLiteral(" />\r\n                        </td>\r\n                        <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">密送</th>\r\n                        <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" name=\"MailIsBBC\"");

WriteLiteral(" type=\"checkbox\"");

WriteAttribute("value", Tuple.Create(" value=\"", 6478), Tuple.Create("\"", 6502)
            
            #line 134 "..\..\Views\OaMail\MailWrite.cshtml"
, Tuple.Create(Tuple.Create("", 6486), Tuple.Create<System.Object, System.Int32>(Model.MailIsBBC
            
            #line default
            #line hidden
, 6486), false)
);

WriteLiteral(" />\r\n                        </td>\r\n                    </tr>\r\n                  " +
"  <tr>\r\n                        <th>\r\n                            上传附件\r\n        " +
"                </th>\r\n                        <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

            
            #line 142 "..\..\Views\OaMail\MailWrite.cshtml"
                            
            
            #line default
            #line hidden
            
            #line 142 "..\..\Views\OaMail\MailWrite.cshtml"
                              
                                var uploader = new DataModel.FileUploader();
                                uploader.RefID = Model.Id;
                                uploader.RefTable = "OaMail";
                                uploader.Name = "UploadFile1";
                                
            
            #line default
            #line hidden
            
            #line 147 "..\..\Views\OaMail\MailWrite.cshtml"
                            Write(Html.Partial("~/Areas/Core/Views/UserControl/FileUploader.cshtml", uploader));

            
            #line default
            #line hidden
            
            #line 147 "..\..\Views\OaMail\MailWrite.cshtml"
                                                                                                               
                            
            
            #line default
            #line hidden
WriteLiteral("\r\n                        </td>\r\n                    </tr>\r\n                </tab" +
"le>\r\n");

            
            #line 152 "..\..\Views\OaMail\MailWrite.cshtml"
                                }

            
            #line default
            #line hidden
WriteLiteral("        </div>\r\n        <div");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(" style=\"width:20%\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" id=\"lefttreeemp\"");

WriteLiteral("></table>\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" id=\"attachesData\"");

WriteLiteral(" style=\"display:none\"");

WriteLiteral(">");

            
            #line 158 "..\..\Views\OaMail\MailWrite.cshtml"
                                            Write(ViewBag.AttachData);

            
            #line default
            #line hidden
WriteLiteral("</div>\r\n    <div");

WriteLiteral(" id=\"divMailContent\"");

WriteLiteral(" style=\"display:none\"");

WriteLiteral(">");

            
            #line 159 "..\..\Views\OaMail\MailWrite.cshtml"
                                              Write(Html.Raw(Model.MailNote));

            
            #line default
            #line hidden
WriteLiteral("</div>\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        var _uploader = uploader_");

            
            #line 161 "..\..\Views\OaMail\MailWrite.cshtml"
                             Write(Html.ViewContext.Controller.ViewData["UploadFileUnqiueID"]);

            
            #line default
            #line hidden
WriteLiteral(";\r\n        var attachesData = JQ.Flow.htmlDecode(document.getElementById(\"attache" +
"sData\").innerHTML);\r\n        window.afterFileUploaderLoad = function ($grid, ref" +
"Table) {\r\n            if (!attachesData) {\r\n                return;\r\n           " +
" }\r\n            var xml = GoldPM.loadXml(attachesData);\r\n            var nodes =" +
" GoldPM.selectNodes(xml, \"Root/File\");\r\n            if (nodes.length > 0) {\r\n   " +
"             for (var i = 0; i < nodes.length; i++) {\r\n                    _uplo" +
"ader.tempID--;\r\n                    var fileID = _uploader.tempID;\r\n            " +
"        $grid.datagrid(\"appendRow\", {\r\n                        ID: fileID,\r\n    " +
"                    Name: nodes[i].getAttribute(\"RealName\"),\r\n                  " +
"      Size: parseInt(nodes[i].getAttribute(\"Size\")),\r\n                        La" +
"stModifyDate: nodes[i].getAttribute(\"LastModifiedTime\"),\r\n                      " +
"  UploadDate: null,\r\n                        Version: 0,\r\n                      " +
"  UploadStatus: 2,\r\n                        RemoteName: nodes[i].getAttribute(\"F" +
"ileName\"),\r\n                        FileID: fileID,\r\n                        Rea" +
"lUploadTime: nodes[i].getAttribute(\"UploadTime\")\r\n                    });\r\n     " +
"               var temp = document.getElementById(\"f_\" + fileID).parentNode;\r\n  " +
"                  temp.innerHTML = \"\";\r\n                    temp.appendChild(JQ." +
"Flow.createElement(\"a\", { href: JQ.Upload.Tools.buildDownloadUrl(_uploader.downl" +
"oadUrl, 0, { name: nodes[i].getAttribute(\"FileName\"), realName: nodes[i].getAttr" +
"ibute(\"RealName\") }) }, null, nodes[i].getAttribute(\"RealName\")));\r\n            " +
"        document.getElementById(\"p_\" + fileID).parentNode.innerHTML = nodes[i].g" +
"etAttribute(\"UploadTime\").substring(0, 10);\r\n                    document.getEle" +
"mentById(\"e_\" + fileID).parentNode.innerHTML = nodes[i].getAttribute(\"EmpName\");" +
"\r\n                    _uploader.addToCache(refTable, fileID, nodes[i].getAttribu" +
"te(\"RealName\"), nodes[i].getAttribute(\"FileName\"), nodes[i].getAttribute(\"LastMo" +
"difiedTime\"), nodes[i].getAttribute(\"UploadTime\"));\r\n                }\r\n        " +
"        _uploader.saveCache();\r\n            }\r\n            delete window.afterFi" +
"leUploaderLoad;\r\n        }\r\n    </script>\r\n");

});

        }
    }
}
#pragma warning restore 1591
