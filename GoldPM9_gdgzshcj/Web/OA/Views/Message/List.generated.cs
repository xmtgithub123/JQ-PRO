#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 4 "..\..\Views\Message\List.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Message/List.cshtml")]
    public partial class _Views_Message_List_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_Message_List_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\Message\List.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
        $(function () {
            $(""#status"").combobox({
                panelHeight: ""auto"",
                editable: false,
                onSelect: function () {
                    refreshGrid();
                }
            });
            $(""#JQSearch"").textbox({
                buttonText: '筛选',
                buttonIcon: 'fa fa-search',
                height: 25,
                prompt: '筛选字段',
                onClickButton: function () {
                    window.refreshGrid();
                }
            });

            $(""#starttime"").datebox({
                prompt: ""发送时间开始"",
                width: 100
            });
            $(""#endtime"").datebox({
                prompt: ""发送时间结束"",
                width: 100
            });
            JQ.datagrid.datagrid({
                JQPrimaryID: ""Id"",
                JQID: ""tbList"",
                JQLoadingType: ""datagrid"",
                checkOnSelect: true,
                toolbar: ""#list_toolbar"",
                url: """);

            
            #line 39 "..\..\Views\Message\List.cshtml"
                  Write(Url.Action("GetList", "Message",new { @area="OA" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                rownumbers: true,\r\n                JQFields: [\"Id\"],\r\n       " +
"         columns: [[\r\n                       { field: \"ck\", align: \"center\", che" +
"ckbox: true, JQIsExclude: true },\r\n                    { title: \"消息标题\", field: \"" +
"MessTitle\", width: 420, align: \"left\", halign: \"center\" },\r\n                    " +
" {\r\n                         title: \"消息链接\", field: \"MessLinkTitle\", width: 120, " +
"align: \"left\", halign: \"center\", formatter: function (value, rowData) {\r\n       " +
"                      if (rowData.MessLinkTitle && rowData.MessLinkUrl) {\r\n     " +
"                            return JQ.Flow.createElement(\"a\", { href: \"javascrip" +
"t:void(0)\", onclick: \"showdialog(\'\" + encodeURIComponent(rowData.MessLinkTitle) " +
"+ \"\',\'\" + encodeURIComponent(rowData.MessLinkUrl) + \"\',\" + rowData.MessDialogWid" +
"th + \",\" + rowData.MessDialogHeight + \");\" }, null, rowData.MessLinkTitle).outer" +
"HTML;\r\n                             }\r\n                             else {\r\n    " +
"                             return \"无\";\r\n                             }\r\n      " +
"                   }\r\n                     }, {\r\n                         title:" +
" \"发送时间\", field: \"MessDate\", width: 130, align: \"center\", halign: \"center\", sorta" +
"ble: true, formatter: function (value) {\r\n                             return JQ" +
".Flow.parseDateTimeText(value);\r\n                         }\r\n                   " +
"  }, {\r\n                         title: \"阅读日期\", field: \"MessReadDate\", width: 13" +
"0, align: \"center\", halign: \"center\", formatter: function (value) {\r\n           " +
"                  return JQ.Flow.parseDateTimeText(value);\r\n                    " +
"     }\r\n                     }, {\r\n                         title: \"自动发送\", field" +
": \"MessIsSystem\", width: 60, align: \"center\", halign: \"center\", formatter: funct" +
"ion (value) {\r\n                             return value ? \"是\" : \"否\";\r\n         " +
"                }\r\n                     }, { title: \"发送人\", field: \"MessEmpName\"," +
" width: 60, align: \"center\", halign: \"center\" }, {\r\n                         tit" +
"le: \"操作\", field: \"MessLinkUrl\", width: 60, align: \"center\", halign: \"center\", fo" +
"rmatter: function (value, rowData) {\r\n                             return \"<a hr" +
"ef=\\\"javascript:void(0)\\\" onclick=\\\"showMessage(\" + rowData.Id + \")\\\">查看</a>\"\r\n " +
"                        }\r\n                     }\r\n                ]],\r\n        " +
"        queryParams: getQueryParams()\r\n            });\r\n        });\r\n\r\n        w" +
"indow.refreshGrid = function () {\r\n            $(\"#tbList\").datagrid(\"load\", get" +
"QueryParams());\r\n        }\r\n\r\n        function getQueryParams() {\r\n            r" +
"eturn { text: $(\"#JQSearch\").textbox(\"getText\"), status: $(\"#status\").combobox(\"" +
"getValue\"), starttime: $(\"#starttime\").textbox(\"getText\"), endtime: $(\"#endtime\"" +
").textbox(\"getText\") };\r\n        }\r\n\r\n        function showMessage(id) {\r\n      " +
"      JQ.dialog.dialog({\r\n                title: \"查看消息\",\r\n                url: \"" +
"");

            
            #line 87 "..\..\Views\Message\List.cshtml"
                  Write(Url.Action("Display","Message",new { @area="OA" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + id,
                width: 800,
                height: 630,
                iconCls: ""fa fa-comments-o"",
                onClose: function () {
                    window.refreshGrid();
                }
            });
            JQ.Flow.stopBubble();
        }

        function showdialog(title, url, width, height) {
            JQ.dialog.dialog({
                title: decodeURIComponent(title),
                url: """);

            
            #line 101 "..\..\Views\Message\List.cshtml"
                  Write(ViewBag.sitePath);

            
            #line default
            #line hidden
WriteLiteral(@""" + decodeURIComponent(url),
                width: width ? width : 800,
                height: height ? height : 600,
                iconCls: ""fa fa-table""
            });
            JQ.Flow.stopBubble();
        }

        function setReadStatus(status) {
            var selections = $(""#tbList"").datagrid(""getSelections"");
            if (!selections || selections.length == 0) {
                return;
            }
            var idSet = """";
            for (var i = 0; i < selections.length; i++) {
                if (i != 0) {
                    idSet += "","";
                }
                idSet += selections[i].Id;
            }
            var confirmed = function () {
                window.top.$.messager.progress();
                $.ajax({
                    url: """);

            
            #line 124 "..\..\Views\Message\List.cshtml"
                      Write(Url.Action("SetReadStatus", "Message",new { @area="OA" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
                    type: ""POST"",
                    data: { idSet: idSet, status: status },
                    success: function (result) {
                        if (result.Result == false) {
                            JQ.dialog.alert(""操作失败！"");
                            return;
                        }
                        window.refreshGrid();
                    }, complete: function () {
                        window.top.$.messager.progress(""close"");
                    }
                });
            };
            if (status == 1) {
                JQ.dialog.confirm(""确定要将选中的消息设置为已读吗？"", confirmed);
            }
            else if (status == 2) {
                JQ.dialog.confirm(""确定要将选中的消息设置为未读吗？"", confirmed);
            }
        }

        function deleteRead() {
            var selections = $(""#tbList"").datagrid(""getSelections"");
            if (!selections || selections.length == 0) {
                return;
            }
            var idSet = """";
            for (var i = 0; i < selections.length; i++) {
                if (i != 0) {
                    idSet += "","";
                }
                idSet += selections[i].Id;
            }
            JQ.dialog.confirm(""确定要删除选中的消息吗？"", function () {
                window.top.$.messager.progress();
                $.ajax({
                    url: """);

            
            #line 161 "..\..\Views\Message\List.cshtml"
                      Write(Url.Action("DeleteRead", "Message",new { @area="OA" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
                    type: ""POST"",
                    data: { idSet: idSet },
                    success: function (result) {
                        if (result.Result == false) {
                            JQ.dialog.alert(""操作失败！"");
                            return;
                        }
                        window.refreshGrid();
                    }, complete: function () {
                        window.top.$.messager.progress(""close"");
                    }
                });
            });
        }
    </script>
");

});

DefineSection("Body_Content", () => {

WriteLiteral("\r\n    <table");

WriteLiteral(" id=\"tbList\"");

WriteLiteral("></table>\r\n    <div");

WriteLiteral(" id=\"list_toolbar\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-check-circle\'\"");

WriteLiteral(" onclick=\"setReadStatus(1)\"");

WriteLiteral(">设为已读</a>\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-minus-circle\'\"");

WriteLiteral(" onclick=\"setReadStatus(2)\"");

WriteLiteral(">设为未读</a>\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-trash-o\'\"");

WriteLiteral(" onclick=\"deleteRead()\"");

WriteLiteral(">删除</a>\r\n        <span");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n        </span>\r\n        <select");

WriteLiteral(" id=\"status\"");

WriteLiteral(" name=\"status\"");

WriteLiteral(" class=\"easyui-combobox\"");

WriteLiteral(">\r\n            <option");

WriteLiteral(" value=\"\"");

WriteLiteral(">所有状态</option>\r\n            <option");

WriteLiteral(" value=\"0\"");

WriteLiteral(" selected=\"selected\"");

WriteLiteral(">未读</option>\r\n            <option");

WriteLiteral(" value=\"1\"");

WriteLiteral(">已读</option>\r\n        </select>\r\n        <input");

WriteLiteral(" id=\"starttime\"");

WriteLiteral(" name=\"starttime\"");

WriteLiteral(" type=\"text\"");

WriteLiteral("> 至 <input");

WriteLiteral(" id=\"endtime\"");

WriteLiteral(" name=\"endtime\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(">&nbsp;\r\n        <input");

WriteLiteral(" id=\"JQSearch\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(" JQWhereOptions=\"{ Key: \'MessTitle\', \'Contract\': \'like\' }\"");

WriteLiteral(" />\r\n    </div>\r\n");

});

        }
    }
}
#pragma warning restore 1591
