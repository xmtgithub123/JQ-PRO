#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.33440
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/OaBookUse/listBookLendInfo.cshtml")]
    public partial class _Views_OaBookUse_listBookLendInfo_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_OaBookUse_listBookLendInfo_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n");

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    $(function () {\r\n        $(\'#lefttreeemp\').treegrid({\r\n            url: \'");

            
            #line 7 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
             Write(Url.Action("employeeByDepJson", "usercontrol", new { @area = "Core", state = "closed" }));

            
            #line default
            #line hidden
WriteLiteral(@"',
            idField: 'id',
            treeField: 'text',
            border: 0,
            fit: true,
            animate: true,
            singleSelect: true,
            columns: [[
               { title: '', field: 'text', width: 240, align: 'left' }
            ]],
            onLoadSuccess: function (row, data) {

            },
            onSelect: function (node) {
                if (node.isEmp) {
                    $('#SelectPerson').html(""<b>选择人员</b>："" + node.text);
                    $('#SelectPerson').attr({ ""EmpID"": node.empid });
                    $('#menulist').datagrid('load', {
                        EmpID: node.empid
                    });

                }
            }
        });


        JQ.datagrid.datagrid({
            JQPrimaryID: 'id',
            JQID: 'menulist',
            JQDialogTitle: '菜单信息',
            JQWidth: '100%',
            JQHeight: '100%',
            JQLoadingType: 'treegrid',
            url: '");

            
            #line 40 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
             Write(Url.Action("GetJsonByPerson", "OaBookUse",new {@area="OA" }));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n            toolbar: \'#tbMenu\',\r\n            animate: true,\r\n            colu" +
"mns: [[\r\n                 { title: \'图书类别\', field: \'BookTypeName\', width: \"8%\", a" +
"lign: \'center\', sortable: true },\r\n                { title: \'图书名称\', field: \'Book" +
"Name\', width: \"20%\", align: \'center\', sortable: true },\r\n                { title" +
": \'图书编号\', field: \'BookNameNumber\', width: \"15%\", align: \'center\', sortable: true" +
" },\r\n                 { title: \'出版商\', field: \'BookPublisher\', width: \"15%\", alig" +
"n: \'center\', sortable: true },\r\n                  { title: \'作者\', field: \'BookAut" +
"hor\', width: \"8%\", align: \'center\', sortable: true },\r\n                  { title" +
": \'借阅数量\', field: \'LendCount\', width: \"10%\", align: \'center\', sortable: true },\r\n" +
"                      { title: \'借阅时间\', field: \'DateLend\', width: \"10%\", align: \'" +
"center\', sortable: true, formatter: JQ.tools.DateTimeFormatterByT },\r\n          " +
"         {\r\n                       field: \'opt\', title: \'操作\', width: \"14%\", alig" +
"n: \'center\', JQIsExclude: true,\r\n                       formatter: function (val" +
"ue, row, index) {\r\n                           if (JQ.tools.DateTimeFormatterByT(" +
"row.DateReturnFact) != \"\") {\r\n                               return \"已归还\";\r\n    " +
"                       } else {\r\n                               //return \"<a hre" +
"f=\\\"javascript:void(0)\\\" id=\\\"mb\" + index + \"\\\" dataid=\\\"\" + row.Id + \"\\\" flag=\\" +
"\"menubutton\\\"   >操作</a>\";\r\n                               return \'<a btn  class=" +
"\"easyui-linkbutton\"  data-options=\"iconCls:\\\'fa fa-check\\\'\"   onclick=\"borrHisto" +
"ry(\' + row.Id + \')\">归还</a>\';\r\n                           }\r\n\r\n                  " +
"     }\r\n                   }\r\n            ]],\r\n            queryParams: {\r\n     " +
"           EmpID: 0\r\n            }  ,\r\n            onLoadSuccess: function (valu" +
"e, row, index) {\r\n                $(\"a[btn]\").linkbutton({ iconCls: \'fa fa-edit\'" +
" });\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    //归还\r\n    function borrHistor" +
"y(Id) {\r\n        JQ.dialog.dialog({\r\n            title: \"归还图书\",\r\n            url" +
": \'");

            
            #line 78 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
             Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + Id,
            width: '900',
            height: '100%',
            JQID: 'menulist',
            JQLoadingType: 'datagrid',
            iconCls: 'fa fa-plus'
        });
    }


    function borrMenu() {
        var empid = $('#SelectPerson').attr(""EmpID"");
        if (!empid) {
            JQ.dialog.warning('请先选人~');
            return false;
        }

        JQ.dialog.dialog({
            title: ""借阅"",
            url: '");

            
            #line 97 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
             Write(Url.Action("borrBook"));

            
            #line default
            #line hidden
WriteLiteral("?id=");

            
            #line 97 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
                                        Write(ViewBag.bookModel.Id);

            
            #line default
            #line hidden
WriteLiteral("\' + \'&empID=\' + empid + \'&rowCount=\'+");

            
            #line 97 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
                                                                                                  Write(ViewBag.rowCount);

            
            #line default
            #line hidden
WriteLiteral(@",//+ '&EmpName='
            width: '1024',
        height: '100%',
        JQID: 'menulist',
        JQLoadingType: 'datagrid',
        iconCls: 'fa fa-list',

        });
    }
    window.top._BookBorrCallBack = function () {
        $('#menulist').treegrid('load', {
            EmpID: $('#SelectPerson').attr(""EmpID"")
        });
    };

    function menuHandler(item) {
        var key = $(""#mm3"").attr(""rowid"");
        switch (item.text) {
            case ""归还"":
                JQ.dialog.dialog({
                    title: ""归还图书"",
                    url: '");

            
            #line 118 "..\..\Views\OaBookUse\listBookLendInfo.cshtml"
                     Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + key,
                    width: '900',
                    height: '100%',
                    JQID: 'menulist',
                    JQLoadingType: 'datagrid',
                    iconCls: 'fa fa-plus'
                });
                break;
            default:
                break;
        }
    }

    $.extend($.fn.datagrid.defaults.view, {
        onAfterRender: function () {
            $(""a[flag='menubutton']"").mouseover(function () {
                document.getElementById(""mm3"").setAttribute(""rowid"", this.getAttribute(""dataid""));
            }).menubutton({
                iconCls: 'icon-edit',
                menu: '#mm3'
            });
        }
    });

    </script>

    <div");

WriteLiteral(" id=\"cc\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" style=\"overflow: hidden\"");

WriteLiteral(" fit=\"true\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" data-options=\"region:\'west\',split:false\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"tt\"");

WriteLiteral(" class=\"easyui-tabs\"");

WriteLiteral(" data-options=\"fit:true\"");

WriteLiteral(" style=\"width:200px;height:100%;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" title=\"按人员选择\"");

WriteLiteral(" data-options=\"closable:false\"");

WriteLiteral(" style=\"overflow:auto;padding:2px;\"");

WriteLiteral(">\r\n                    <table");

WriteLiteral(" id=\"lefttreeemp\"");

WriteLiteral("></table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <d" +
"iv");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(" style=\"background:#eee;\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" id=\"menulist\"");

WriteLiteral("> </table>\r\n        </div>\r\n        <div");

WriteLiteral(" id=\"tbMenu\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n            <span");

WriteLiteral(" id=\"SelectPerson\"");

WriteLiteral(">选择人员：</span>\r\n            <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-save\'\"");

WriteLiteral(" onclick=\"borrMenu()\"");

WriteLiteral(">借阅</a>\r\n            ");

WriteLiteral("\r\n        </div>\r\n    </div>\r\n");

WriteLiteral("\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
