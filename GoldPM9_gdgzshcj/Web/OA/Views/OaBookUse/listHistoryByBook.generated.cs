#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.33440
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 4 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/OaBookUse/listHistoryByBook.cshtml")]
    public partial class _Views_OaBookUse_listHistoryByBook_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_OaBookUse_listHistoryByBook_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        $(function () {\r\n            $(\'#lefttreeemp\').treegrid({\r\n           " +
"     url: \'");

            
            #line 9 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
                 Write(Url.Action("employeeByDepJson", "usercontrol", new { @area = "Core", state = "closed" }));

            
            #line default
            #line hidden
WriteLiteral(@"',
                idField: 'id',
                treeField: 'text',
                border: 0,
                fit: true,
                animate: true,
                singleSelect: true,
                columns: [[
                   { title: '', field: 'text', width: 240, align: 'left' }
                ]],
                onLoadSuccess: function (row, data) {

                },
                onSelect: function (node) {
                    if (node.isEmp) {
                        $('#SelectPerson').html(""<b>选择人员</b>："" + node.text);
                        $('#SelectPerson').attr({ ""EmpID"": node.empid });
                        $('#menulist').datagrid('load', {
                            EmpID: node.empid
                        });

                    }
                }
            });


            JQ.datagrid.datagrid({
                JQPrimaryID: 'id',
                JQID: 'menulist',
                JQDialogTitle: '菜单信息',
                JQWidth: '100%',
                JQHeight: '100%',
                JQLoadingType: 'treegrid',
                url: '");

            
            #line 42 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
                 Write(Url.Action("GetJsonByPerson", "OaBookUse",new {@area="OA" }));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                toolbar: \'#tbMenu\',\r\n                animate: true,\r\n        " +
"        columns: [[\r\n                     { title: \'图书类别\', field: \'BookTypeName\'" +
", width: \"10%\", align: \'center\', sortable: true },\r\n\t\t            { title: \'图书名称" +
"\', field: \'BookName\', width: \"20%\", align: \'center\', sortable: true },\r\n\t\t      " +
"      { title: \'图书编号\', field: \'BookNameNumber\', width: \"15%\", align: \'center\', s" +
"ortable: true },\r\n                     { title: \'出版商\', field: \'BookPublisher\', w" +
"idth: \"15%\", align: \'center\', sortable: true },\r\n                      { title: " +
"\'作者\', field: \'BookAuthor\', width: \"8%\", align: \'center\', sortable: true },\r\n    " +
"                  { title: \'借阅数量\', field: \'LendCount\', width: \"10%\", align: \'cen" +
"ter\', sortable: true },\r\n                          { title: \'借阅时间\', field: \'Date" +
"Lend\', width: \"10%\", align: \'center\', sortable: true, formatter: JQ.tools.DateTi" +
"meFormatterByT },\r\n                       {\r\n                           field: \'" +
"opt\', title: \'操作\', width: \"12%\", align: \'center\', JQIsExclude: true,\r\n          " +
"                 formatter: function (value, row, index) {\r\n                    " +
"           if (JQ.tools.DateTimeFormatterByT(row.DateReturnFact) != \"\") {\r\n     " +
"                              return \"已归还\";\r\n                               } el" +
"se {\r\n                                   //return \"<a href=\\\"javascript:void(0)\\" +
"\" id=\\\"mb\" + index + \"\\\" dataid=\\\"\" + row.Id + \"\\\" flag=\\\"menubutton\\\"   >操作</a>" +
"\";\r\n                                   return \'<a btn  class=\"easyui-linkbutton\"" +
"  data-options=\"iconCls:\\\'fa fa-check\\\'\"   onclick=\"borrHistory(\' + row.Id + \')\"" +
">归还</a>\';\r\n                               }\r\n                           }\r\n     " +
"                  }\r\n                ]],\r\n                queryParams: {\r\n      " +
"              EmpID: 0\r\n                },\r\n                onLoadSuccess: funct" +
"ion (value, row, index) {\r\n                    $(\"a[btn]\").linkbutton({ iconCls:" +
" \'fa fa-edit\' });\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        " +
"//归还\r\n        function borrHistory(Id) {\r\n            JQ.dialog.dialog({\r\n      " +
"          title: \"归还图书\",\r\n                url: \'");

            
            #line 79 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
                 Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + Id,
                width: '900',
                height: '100%',
                JQID: 'menulist',
                JQLoadingType: 'datagrid',
                iconCls: 'fa fa-plus'
            });
        }

        function borrMenu() {
            var empid = $('#SelectPerson').attr(""EmpID"");
            if (!empid) {
                JQ.dialog.warning('请先选人~');
                return false;
            }

            JQ.dialog.dialog({
                title: ""选择图书"",
                url: '");

            
            #line 97 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
                 Write(Url.Action("selectBook"));

            
            #line default
            #line hidden
WriteLiteral(@"?empID=' + empid,
                width: '1024',
                height: '100%',
                JQID: 'menulist',
                JQLoadingType: 'datagrid',
                iconCls: 'fa fa-list',

            });
        }
        window.top._BookBorrCallBack = function () {
            $('#menulist').treegrid('load', {
                EmpID: $('#SelectPerson').attr(""EmpID"")
            });
        };

        function menuHandler(item) {
            var key = $(""#mm3"").attr(""rowid"");
            switch (item.text) {
                case ""归还"":
                    JQ.dialog.dialog({
                        title: ""归还图书"",
                        url: '");

            
            #line 118 "..\..\Views\OaBookUse\listHistoryByBook.cshtml"
                         Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + key,
                        width: '900',
                        height: '100%',
                        JQID: 'menulist',
                        JQLoadingType: 'datagrid',
                        iconCls: 'fa fa-plus'
                    });
                    break;
                default:
                    break;
            }
        }

        $.extend($.fn.datagrid.defaults.view, {
            onAfterRender: function () {
                $(""a[flag='menubutton']"").mouseover(function () {
                    document.getElementById(""mm3"").setAttribute(""rowid"", this.getAttribute(""dataid""));
                }).menubutton({
                    iconCls: 'icon-edit',
                    menu: '#mm3'
                });
            }
        });

    </script>
");

});

WriteLiteral("\r\n");

DefineSection("Body_Content", () => {

WriteLiteral("\r\n    <div");

WriteLiteral(" id=\"cc\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" style=\"overflow: hidden\"");

WriteLiteral(" fit=\"true\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" data-options=\"region:\'west\',split:false\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"tt\"");

WriteLiteral(" class=\"easyui-tabs\"");

WriteLiteral(" data-options=\"fit:true\"");

WriteLiteral(" style=\"width:300px;height:100%;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" title=\"按人员选择\"");

WriteLiteral(" data-options=\"closable:false\"");

WriteLiteral(" style=\"overflow:auto;padding:2px;\"");

WriteLiteral(">\r\n                    <table");

WriteLiteral(" id=\"lefttreeemp\"");

WriteLiteral("></table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <d" +
"iv");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(" style=\"background:#eee;\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" id=\"menulist\"");

WriteLiteral("> </table>\r\n        </div>\r\n        <div");

WriteLiteral(" id=\"tbMenu\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n            <span");

WriteLiteral(" id=\"SelectPerson\"");

WriteLiteral(">选择人员：</span>\r\n            <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-save\'\"");

WriteLiteral(" onclick=\"borrMenu()\"");

WriteLiteral(">借阅</a>\r\n            ");

WriteLiteral("\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" id=\"mm3\"");

WriteLiteral(" class=\"easyui-menu\"");

WriteLiteral(" style=\"width:80px;\"");

WriteLiteral(" data-options=\"onClick:menuHandler\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" id=\"div1\"");

WriteLiteral(">归还</div>\r\n    </div>\r\n");

});

        }
    }
}
#pragma warning restore 1591
