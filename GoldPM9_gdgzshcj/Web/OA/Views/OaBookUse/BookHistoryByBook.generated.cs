#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/OaBookUse/BookHistoryByBook.cshtml")]
    public partial class _Views_OaBookUse_BookHistoryByBook_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_OaBookUse_BookHistoryByBook_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
    $(function () {
        JQ.datagrid.datagrid({
            JQPrimaryID: 'id',
            JQID: 'menulist',
            JQDialogTitle: '菜单信息',
            JQWidth: '100%',
            JQHeight: '100%',
            JQLoadingType: 'treegrid',
            url: '");

            
            #line 12 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
             Write(Url.Action("GetJsonByPersonHistory", "OaBookUse", new { @area = "OA" }));

            
            #line default
            #line hidden
WriteLiteral("?BookID=\' + ");

            
            #line 12 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
                                                                                                 Write(ViewBag.bookModel.Id);

            
            #line default
            #line hidden
WriteLiteral(",\r\n            toolbar: \'#tbMenu\',\r\n            animate: true,\r\n            colum" +
"ns: [[\r\n                 { title: \'图书类别\', field: \'BookTypeName\', width: \"7%\", al" +
"ign: \'center\', sortable: true },\r\n                { title: \'图书名称\', field: \'BookN" +
"ame\', width: \"15%\", align: \'center\', sortable: true },\r\n                { title:" +
" \'图书编号\', field: \'BookNameNumber\', width: \"15%\", align: \'center\', sortable: true " +
"},\r\n                 { title: \'出版商\', field: \'BookPublisher\', width: \"15%\", align" +
": \'center\', sortable: true },\r\n                  { title: \'作者\', field: \'BookAuth" +
"or\', width: \"8%\", align: \'center\', sortable: true },\r\n                  { title:" +
" \'借阅数量\', field: \'LendCount\', width: \"5%\", align: \'center\', sortable: true },\r\n  " +
"                { title: \'借阅人\', field: \'ReturnEmpName\', width: \"10%\", align: \'ce" +
"nter\', sortable: true },\r\n                      { title: \'借阅时间\', field: \'DateLen" +
"d\', width: \"10%\", align: \'center\', sortable: true, formatter: JQ.tools.DateTimeF" +
"ormatterByT },\r\n                   {\r\n                       field: \'opt\', title" +
": \'操作\', width: \"15%\", align: \'center\', JQIsExclude: true,\r\n                     " +
"  formatter: function (value, row, index) {\r\n                           if (JQ.t" +
"ools.DateTimeFormatterByT(row.DateReturnFact) != \"\") {\r\n                        " +
"       return \"已归还\";\r\n                           }else  if (row.BookLoseType > 0" +
") {\r\n                               return \"遗失\";\r\n                           }\r\n" +
"                           else {\r\n                               return \"<a hre" +
"f=\\\"javascript:void(0)\\\" id=\\\"mb\" + index + \"\\\" dataid=\\\"\" + row.Id + \"\\\" flag=\\" +
"\"menubutton\\\"   >操作</a>\";\r\n                               //return \'<a btn  clas" +
"s=\"easyui-linkbutton\"  data-options=\"iconCls:\\\'fa fa-check\\\'\"   onclick=\"returnB" +
"ackBook(\' + row.Id + \')\">归还</a><a btn  class=\"easyui-linkbutton\"  data-options=\"" +
"iconCls:\\\'fa fa-check\\\'\"   onclick=\"returnBackBook(\' + row.Id + \')\">遗失</a>\';\r\n  " +
"                         }\r\n                           \r\n                       " +
"}\r\n                   }\r\n            ]],\r\n            queryParams: {\r\n          " +
"      EmpID: 0\r\n            }\r\n            ,\r\n            onLoadSuccess: functio" +
"n (value, row, index) {\r\n                $(\"a[btn]\").linkbutton({ iconCls: \'fa f" +
"a-edit\' });\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    $.extend($.fn.datagrid" +
".defaults.view, {\r\n        onAfterRender: function () {\r\n            $(\"a[flag=\'" +
"menubutton\']\").mouseover(function () {\r\n                document.getElementById(" +
"\"mm3\").setAttribute(\"rowid\", this.getAttribute(\"dataid\"));\r\n            }).menub" +
"utton({\r\n                iconCls: \'icon-edit\',\r\n                menu: \'#mm3\'\r\n  " +
"          });\r\n        }\r\n    });\r\n\r\n    //归还\r\n    function returnBackBook(Id) {" +
"\r\n        JQ.dialog.dialog({\r\n            title: \"归还图书\",\r\n            url: \'");

            
            #line 66 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
             Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + Id,
            width: '900',
            height: '100%',
            JQID: 'menulist',
            JQLoadingType: 'datagrid',
            iconCls: 'fa fa-plus'
        });
    }

    function menuHandler(item) {
        var key = $(""#mm3"").attr(""rowid"");
        switch (item.text) {
            case ""归还"":
                JQ.dialog.dialog({
                    title: ""归还图书"",
                    url: '");

            
            #line 81 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
                     Write(Url.Action("returnBackBook"));

            
            #line default
            #line hidden
WriteLiteral(@"' + '?borrID=' + key,
                    width: '900',
                    height: '100%',
                    JQID: 'menulist',
                    JQLoadingType: 'datagrid',
                    iconCls: 'fa fa-plus'
                });
                break;
            case ""遗失"":
                if (!confirm(""是否确定遗失该图书？"")) {
                    return;
                }
                $.ajax({
                    url: """);

            
            #line 94 "..\..\Views\OaBookUse\BookHistoryByBook.cshtml"
                      Write(Url.Action("editIsBookLose", "OaBookUse", new { @area = "OA" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
                    data: { BookLoseType: 1, Id: key },  //1 代表遗失
                    type: ""POST"",
                    success: function (result) {
                        $(""#menulist"").datagrid(""reload"");
                    }
                });
                break;
            default:
                break;
        }
    }

    ");

WriteLiteral(@"

    $.extend($.fn.datagrid.defaults.view, {
        onAfterRender: function () {
            $(""a[flag='menubutton']"").mouseover(function () {
                document.getElementById(""mm3"").setAttribute(""rowid"", this.getAttribute(""dataid""));
            }).menubutton({
                iconCls: 'icon-edit',
                menu: '#mm3'
            });
        }
    });

</script>


<div");

WriteLiteral(" id=\"cc\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" style=\"overflow: hidden\"");

WriteLiteral(" fit=\"true\"");

WriteLiteral(">\r\n    ");

WriteLiteral("\r\n    <div");

WriteLiteral(" data-options=\"region:\'center\'\"");

WriteLiteral(" style=\"background:#eee;\"");

WriteLiteral(">\r\n        <table");

WriteLiteral(" id=\"menulist\"");

WriteLiteral("> </table>\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" id=\"mm3\"");

WriteLiteral(" class=\"easyui-menu\"");

WriteLiteral(" style=\"width:80px;\"");

WriteLiteral(" data-options=\"onClick:menuHandler\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" id=\"div1\"");

WriteLiteral(">归还</div>\r\n    <div");

WriteLiteral(" id=\"div2\"");

WriteLiteral(">遗失</div>\r\n</div>\r\n\r\n");

WriteLiteral("\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
