@model DataModel.Models.PayModel
@using JQ.Web;
<script type="text/javascript">
    JQ.form.submitInit({
        formid: 'PayModelForm',//formid提交需要用到
        buttonTypes: ['submit', 'close'],//默认按钮
        succesCollBack: function (data) {//成功回调函数,data为服务器返回值
            JQ.datagrid.autoRefdatagrid();//刷新上一级数据表格，必须在close窗体前调用
            JQ.dialog.dialogClose();//关闭窗体放在最后一步执行，以避免找不到事件源
        }
    });
    $("#CompanyPercent").numberspinner({ precision: 2,min:0 });
    $("#EngiTypePercent").numberspinner({ precision: 2, min: 0 });
    $("#EngiHardPercent").numberspinner({ precision: 2, min: 0 });
    $("#ProjManagerPercent").numberspinner({ precision: 2, min: 0 });
    $("#EletricFirst").numberspinner({ precision: 2, min: 0 });
    $("#EletricSecond").numberspinner({ precision: 2, min: 0 });
    $("#DirtyConstruct").numberspinner({ precision: 2, min: 0 });
    $("#LineRoad").numberspinner({ precision: 2, min: 0 });
    $("#Communication").numberspinner({ precision: 2, min: 0 });
    $("#TechBalace").numberspinner({ precision: 2, min: 0 });
    $("#TestExtend").numberspinner({ precision: 2, min: 0 });
    $("#SystemPercent").numberspinner({ precision: 2, min: 0 });
    $("#DesPercent").numberspinner({ precision: 2, min: 0 });
    $("#Checkpercent").numberspinner({ precision: 2, min: 0 });
    $("#ReviewPercent").numberspinner({ precision: 2, min: 0 });
</script>
@using (Html.BeginForm("save", "PayModel", FormMethod.Post, new { @area = "pay", @id = "PayModelForm" }))
{
    @Html.HiddenFor(m => m.Id)
    <table class="table table-bordered">
        <tr>
            <th>
                模板名称
            </th>
            <td>
                <input name="ModelName" style="width:98%;" class="easyui-textbox" data-options="required:true" validType="length[0,200]" value="@Model.ModelName" />
            </td>
            <th>
                工程阶段
            </th>
            <td colspan="3">
                @BaseData.getBase(new Params()
               {
                   controlName = "EngPhaseID",
                   isRequired = true,
                   engName = "ProjectPhase",
                   width = "98%",
                   ids = Model.EngPhaseID.ToString()
               })
            </td>
            @*<th>
                电压等级
            </th>
            <td>
                @BaseData.getBase(new Params()
               {
                   controlName = "EngVolID",
                   isRequired = true,
                   engName = "ProjectVolt",
                   width = "98%",
                   ids = Model.EngVolID.ToString()
               })
            </td>*@
        </tr>
        <tr>
            <th>
                公司提奖比例（%）
            </th>
            <td>
                <input id="CompanyPercent" name="CompanyPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["CompanyPercent"]" />
            </td>
            <th>
                工程类别比例（%）
            </th>
            <td>
                <input id="EngiTypePercent" name="EngiTypePercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["EngiTypePercent"]" />
            </td>
            <th>
                工程难度系数
            </th>
            <td>
                <input id="EngiHardPercent" name="EngiHardPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]"  value="@ViewData["EngiHardPercent"]" />
            </td>
        </tr>
        <tr>
            <th>
                项目经理比例（%）
            </th>
            <td colspan="5">
                <input id="ProjManagerPercent" name="ProjManagerPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]"  value="@ViewData["ProjManagerPercent"]"/>
            </td>
        </tr>
        <tr>
            <th>
                一次（%）
            </th>
            <td>
                <input name="EletricFirst" id="EletricFirst" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["EletricFirst"]" />
            </td>
            <th>
                二次（%）
            </th>
            <td>
                <input name="EletricSecond" id="EletricSecond" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["EletricSecond"]" />
            </td>
            <th>
                土建（%）
            </th>
            <td>
                <input name="DirtyConstruct" id="DirtyConstruct" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["DirtyConstruct"]" />
            </td>
        </tr>
        <tr>
            <th>
                线路（%）
            </th>
            <td>
                <input name="LineRoad" id="LineRoad" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["LineRoad"]" />
            </td>
            <th>
                通信（%）
            </th>
            <td>
                <input name="Communication" id="Communication" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["Communication"]" />
            </td>
            <th>
                技经（%）
            </th>
            <td>
                <input name="TechBalace" id="TechBalace" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]"  value="@ViewData["TechBalace"]"/>
            </td>
        </tr>
        <tr>
            <th>
                测量（%）
            </th>
            <td>
                <input name="TestExtend"id="TestExtend" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["TestExtend"]" />
            </td>
            <th>
                系统（%）
            </th>
            <td colspan="3">
                <input name="SystemPercent" id="SystemPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["SystemPercent"]"/>
            </td>

        </tr>
        <tr>
            <th>
                设计比例（%）
            </th>
            <td>
                <input  id="DesPercent" name="DesPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]"  value="@ViewData["DesPercent"]"/>
            </td>
            <th>
                校对比例（%）
            </th>
            <td>
                <input name="Checkpercent" id="Checkpercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["Checkpercent"]" />
            </td>
            <th>
                审核比例（%）
            </th>
            <td>
                <input id="ReviewPercent" name="ReviewPercent" style="width:98%;" class="easyui-numberspinner" validType="length[0,10]" value="@ViewData["ReviewPercent"]" />
            </td>
        </tr>
        <tr>
            <th>
                备注
            </th>
            <td colspan="5">
                <input name="Note" style="width:98%;height:60px;" class="easyui-textbox" data-options="multiline:true" validType="length[0,2000]" value="@Model.Note" />

            </td>

        </tr>
        <tr>
            <th>
                上传附件
            </th>
            <td colspan="5">
                @{
                    var uploader = new DataModel.FileUploader();
                    uploader.RefID = Model.Id;
                    uploader.RefTable = "PayModel";
                    uploader.Name = "uploadfile1";
                    @(Html.Partial("~/Areas/Core/Views/UserControl/FileUploader.cshtml", uploader))
                }
            </td>
        </tr>
    </table> 
}
@RenderPage("~/Areas/Core/Views/Shared/_Init.cshtml")



