#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/PayBalanceEngineering/TechInfo.cshtml")]
    public partial class _Views_PayBalanceEngineering_TechInfo_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.PayBalanceEngineering>
    {
        public _Views_PayBalanceEngineering_TechInfo_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    JQ.form.submitInit({\r\n        formid: \'PayBalanceTechInfoForm\',//formid提交需" +
"要用到\r\n        buttonTypes: [\'submit\', \'close\'],//默认按钮\r\n        succesCollBack: fu" +
"nction (data) {//成功回调函数,data为服务器返回值\r\n            JQ.dialog.dialogClose();//关闭窗体放" +
"在最后一步执行，以避免找不到事件源\r\n        },\r\n        beforeFormSubmit:function()\r\n        {\r\n " +
"           accept();\r\n        }\r\n    });\r\n\r\n    //本次分配产值\r\n    $(\"#EngAmountArran" +
"ge\").numberspinner({\r\n        precision: 2,\r\n        required: true,\r\n        on" +
"Change:function(newVal,oldVal)\r\n        {\r\n            if(isNaN(newVal)||newVal=" +
"=\"\"||newVal==\"0\"||newVal==0)\r\n            {\r\n                $(this).numberspinn" +
"er(\'setValue\',\'0\');\r\n            }\r\n            else\r\n            {\r\n           " +
"     SetDistributeProduct();\r\n            }\r\n        }\r\n    });\r\n\r\n    // 设总所得产值" +
"\r\n    $(\"#ProjEmpTotal\").numberspinner({\r\n        precision: 2,\r\n        readonl" +
"y: true\r\n    });\r\n\r\n    //公司提奖比例\r\n    $(\"#CompanyPercent\").numberspinner({\r\n    " +
"    precision: 2,\r\n        required: true,\r\n        onChange:function(newVal,old" +
"Val)\r\n        {\r\n            if(isNaN(newVal)||newVal==\"\"||newVal==\"0\"||newVal==" +
"0)\r\n            {\r\n                $(this).numberspinner(\'setValue\',\'0\');\r\n     " +
"       }\r\n            else\r\n            {\r\n                SetDistributeProduct(" +
");\r\n            }\r\n        }\r\n    });\r\n\r\n    // 工程类别比例\r\n\r\n    $(\"#EngiTypePercen" +
"t\").numberspinner({\r\n        precision: 2,\r\n        required: true,\r\n        onC" +
"hange:function(newVal,oldVal)\r\n        {\r\n            if(isNaN(newVal)||newVal==" +
"\"\")\r\n            {\r\n                $(this).numberspinner(\'setValue\',\'0\');\r\n    " +
"        }\r\n            else\r\n            {\r\n                SetDistributeProduct" +
"();\r\n            }\r\n        }\r\n    });\r\n    //工程难度系数\r\n    $(\"#EngiHardPercent\")." +
"numberspinner({\r\n        precision: 2,\r\n        required: true,\r\n        onChang" +
"e:function(newVal,oldVal)\r\n        {\r\n            if(isNaN(newVal)||newVal==\"\"||" +
"newVal==\"0\"||newVal==0)\r\n            {\r\n                $(this).numberspinner(\'s" +
"etValue\',\'0\');\r\n            }\r\n            else\r\n            {\r\n                " +
"SetDistributeProduct();\r\n            }\r\n        }\r\n    });\r\n    // 设总比例\r\n    $(\"" +
"#ProjEmpPercent\").numberspinner({\r\n        precision: 2,\r\n        required: true" +
",\r\n        onChange:function(newVal,oldVal)\r\n        {\r\n            if(isNaN(new" +
"Val)||newVal==\"\"||newVal==\"0\"||newVal==0)\r\n            {\r\n                $(this" +
").numberspinner(\'setValue\',\'0\');\r\n            }\r\n            else\r\n            {" +
"\r\n                SetDistributeProduct();\r\n            }\r\n        }\r\n    });\r\n\r\n" +
"\r\n    //剩余产值\r\n    $(\"#ElseProduct\").numberspinner({\r\n        precision: 2,\r\n    " +
"    readonly: true,\r\n        onChange:function(newVal,oldVal)\r\n        {\r\n      " +
"      //$(\"#PayBalanceTechInfoGrid\").datagrid(\'reload\');\r\n            SetChangeP" +
"roduct();\r\n        }\r\n    });\r\n\r\n\r\n    //设置分配产值\r\n    function SetDistributeProdu" +
"ct()\r\n    {\r\n        var EngAmountArrange=parseFloat($(\"#EngAmountArrange\").numb" +
"erspinner(\'getValue\'));\r\n        var CompanyPercent=parseFloat($(\"#CompanyPercen" +
"t\").numberspinner(\'getValue\'));\r\n        var EngiTypePercent=parseFloat($(\"#Engi" +
"TypePercent\").numberspinner(\'getValue\'));\r\n        var EngiHardPercent=parseFloa" +
"t($(\"#EngiHardPercent\").numberspinner(\'getValue\'));\r\n        var ProjEmpPercent=" +
"parseFloat($(\"#ProjEmpPercent\").numberspinner(\'getValue\'));\r\n        var Distrib" +
"uteproduct=EngAmountArrange*(CompanyPercent/100)*EngiHardPercent*(EngiTypePercen" +
"t/100);\r\n        var ProjEmpTotal=Distributeproduct*(ProjEmpPercent/100);\r\n     " +
"   if(ProjEmpTotal>Distributeproduct)//设总所得产值大于本次分配的值则=\r\n        {\r\n            " +
"ProjEmpTotal=Distributeproduct;\r\n        }\r\n        var ElseProduct=Distributepr" +
"oduct-ProjEmpTotal;\r\n        $(\"#ElseProduct\").numberspinner(\'setValue\',ElseProd" +
"uct.toString());\r\n        $(\"#ProjEmpTotal\").numberspinner(\'setValue\',ProjEmpTot" +
"al.toString());\r\n\r\n    }\r\n\r\n    $(\'#PayModelID\').combogrid({\r\n        panelWidth" +
": 900,\r\n        panelHeight: 385,\r\n        value: \'");

            
            #line 142 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
           Write(Model.PayModelID);

            
            #line default
            #line hidden
WriteLiteral("\',\r\n        idField: \'Id\',\r\n        textField: \'ModelName\',\r\n        url: \'");

            
            #line 145 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
         Write(Url.Action("ComboGridJson", "PayModel",new { @area="pay"}));

            
            #line default
            #line hidden
WriteLiteral("?PayModelID=");

            
            #line 145 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                Write(Model.PayModelID);

            
            #line default
            #line hidden
WriteLiteral("&PhaseID=");

            
            #line 145 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                                          Write(ViewBag.PhaseId);

            
            #line default
            #line hidden
WriteLiteral("&ProjectVolt=");

            
            #line 145 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                                                                       Write(ViewBag.Volt);

            
            #line default
            #line hidden
WriteLiteral("\',//请求的地址\r\n        editable: true,\r\n        pagination: true,           //是否分页\r\n " +
"       rownumbers: true,           //序号\r\n        collapsible: false,         //是" +
"否可折叠的\r\n        prompt: \'请下拉选择选择绩效模板\',\r\n        fit: true,\r\n        method: \'post" +
"\',\r\n        columns: [[\r\n            { title: \'模板名称\', field: \'ModelName\', width:" +
" \"20%\", align: \'left\'},\r\n            { title: \'阶段\', field: \'PhaseName\', width: \"" +
"10%\", align: \'center\'},\r\n            { title: \'公司提奖比例（%）\', field: \'CompanyPercen" +
"t\', width: \"12%\", align: \'center\'},\r\n            { title: \'工程类别比例（%）\', field: \'E" +
"ngiTypePercent\', width: \"12%\", align: \'center\'},\r\n            { title: \'工程难度系数\'," +
" field: \'EngiHardPercent\', width: \"10%\", align: \'center\'},\r\n            { title:" +
" \'设总比例\', field: \'ProjManagerPercent\', width: \"10%\", align: \'center\'}\r\n\r\n        " +
"]],\r\n        keyHandler: {\r\n            up: function () {               //【向上键】押" +
"下处理\r\n                var selected = $(\'#PayModelID\').combogrid(\'grid\').datagrid(" +
"\'getSelected\');\r\n                if (selected) {\r\n                    var index " +
"= $(\'#PayModelID\').combogrid(\'grid\').datagrid(\'getRowIndex\', selected);\r\n       " +
"             if (index > 0) {\r\n                        $(\'#PayModelID\').combogri" +
"d(\'grid\').datagrid(\'selectRow\', index - 1);\r\n                    }\r\n            " +
"    }\r\n                else {\r\n                    var rows = $(\'#PayModelID\').c" +
"ombogrid(\'grid\').datagrid(\'getRows\');\r\n                    $(\'#PayModelID\').comb" +
"ogrid(\'grid\').datagrid(\'selectRow\', rows.length - 1);\r\n                }\r\n      " +
"      },\r\n            down: function () {             //【向下键】押下处理\r\n             " +
"   //取得选中行\r\n                var selected = $(\'#PayModelID\').combogrid(\'grid\').da" +
"tagrid(\'getSelected\');\r\n                if (selected) {\r\n                    var" +
" index = $(\'#PayModelID\').combogrid(\'grid\').datagrid(\'getRowIndex\', selected);\r\n" +
"                    if (index < $(\'#PayModelID\').combogrid(\'grid\').datagrid(\'get" +
"Data\').rows.length - 1) {\r\n                        $(\'#PayModelID\').combogrid(\'g" +
"rid\').datagrid(\'selectRow\', index + 1);\r\n                    }\r\n                " +
"} else {\r\n                    $(\'#PayModelID\').combogrid(\'grid\').datagrid(\'selec" +
"tRow\', 0);\r\n                }\r\n            },\r\n            enter: function () { " +
"            //【回车键】押下处理\r\n                var row = $(\'#PayModelID\').combogrid(\'g" +
"rid\').datagrid(\'getSelected\');\r\n                $(\'#PayModelID\').combogrid(\'hide" +
"Panel\');\r\n            },\r\n            query: function (Words) {     //【动态搜索】处理\r\n" +
"                //设置查询参数\r\n                var queryPara = $(\'#PayModelID\').combo" +
"grid(\"grid\").datagrid(\'options\').queryParams;\r\n                queryPara.Words =" +
" Words;\r\n                $(\'#PayModelID\').combogrid(\"grid\").datagrid(\'options\')." +
"queryParams = queryPara;\r\n                //重新加载\r\n                var pager = $(" +
"\'#PayModelID\').combogrid(\'grid\').datagrid(\'getPager\');\r\n                pager.pa" +
"gination(\'refresh\');\r\n                pager.pagination(\'select\', 1);\r\n          " +
"      $(\'#PayModelID\').combogrid(\"grid\").datagrid(\"reload\");\r\n                $(" +
"\'#PayModelID\').combogrid(\"setValue\", Words);                    //将查询条件存入隐藏域\r\n  " +
"              $(\'#Words\').val(Words);\r\n            }\r\n        },\r\n        onSele" +
"ct: function (val, row) {\r\n            $(\"#CompanyPercent\").numberspinner(\'setVa" +
"lue\',row.CompanyPercent);\r\n            $(\"#EngiTypePercent\").numberspinner(\'setV" +
"alue\',row.EngiTypePercent);\r\n            $(\"#EngiHardPercent\").numberspinner(\'se" +
"tValue\',row.EngiHardPercent);\r\n            $(\"#ProjEmpPercent\").numberspinner(\'s" +
"etValue\',row.ProjManagerPercent);\r\n\r\n            $(\"#DesPercent\").val(row.DesPer" +
"cent);// 设计人员比例\r\n            $(\"#Checkpercent\").val(row.Checkpercent);\r\n        " +
"    $(\"#ReviewPercent\").val(row.ReviewPercent);\r\n\r\n        },\r\n        onLoadSuc" +
"cess: function () {\r\n            if($(\"#PayModelID\").combogrid(\'getValue\')==\"0\")" +
"\r\n            {\r\n                $(this).combogrid(\'setValue\',\"\");\r\n            " +
"}\r\n        }\r\n\r\n    });\r\n\r\n    $(\"#PayBalanceTechInfoGrid\").datagrid({\r\n        " +
"iconCls: \'icon-edit\',\r\n        multiSelect: true,\r\n        rownumbers: true,\r\n  " +
"      fitColumns: true,\r\n        url: \'");

            
            #line 231 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
         Write(Url.Action("json", "PayBalanceUserAccount", new { @area= "Pay" }));

            
            #line default
            #line hidden
WriteLiteral("?BalanceEngineeringID=\'+");

            
            #line 231 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                                   Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral(",//请求的地址\r\n        toolbar: \'#toolBar\',\r\n        columns: [[\r\n             {\r\n    " +
"             field: \'ck\', align: \'center\', checkbox: true\r\n             }, {\r\n\r\n" +
"                 title: \'技术人员姓名\', field: \'EmpId\', width: \"18%\", align: \'center\'," +
"\r\n                 formatter: function (val, row) {\r\n                     return" +
" row.TechEmpName;\r\n                 },\r\n                 editor: {\r\n            " +
"         type: \'combobox\',\r\n                     options:\r\n                     " +
"    {\r\n                             required: true,\r\n                           " +
"  prompt: \' 下拉选择人员\',\r\n                             width: \'180\',\r\n              " +
"               valueField: \'EmpID\',\r\n                             textField: \'Em" +
"pName\',\r\n                             groupField: \'EmpDepName\',\r\n               " +
"              validType: \'comboboxVali[true]\',//是否做完整性验证\r\n                      " +
"       url: JQ.tools.getRootPath() + \'/Core/usercontrol/employeeJson\',\r\n        " +
"                     groupFormatter: function (group) {\r\n                       " +
"          return \'<b style=\"color:black\">\' + group + \'</b>\';\r\n                  " +
"           },\r\n                             onLoadSuccess: function () {\r\n      " +
"                           if($(this).combobox(\'getValue\')==\"0\")\r\n              " +
"                   {\r\n                                     $(this).combobox(\'set" +
"Value\',\'\');\r\n                                 }\r\n                             }," +
"\r\n                             onChange:function(newVal,oldVal){\r\n              " +
"                   if(!isNaN(newVal)&&newVal!=\"0\"&&newVal!=\"\")\r\n                " +
"                 {\r\n                                     if(editIndex!=undefined" +
")\r\n                                     {\r\n                                     " +
"    $.post(\'");

            
            #line 268 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                            Write(Url.Action("GetSpecNameByEmp", "PayBalanceEngineering", new { @area = "Pay" }));

            
            #line default
            #line hidden
WriteLiteral("\',{EmpId:newVal},\r\n                                             function(data){\r\n" +
"                                                 var BalanceReason = $(\'#PayBala" +
"nceTechInfoGrid\').datagrid(\'getEditor\', { index: editIndex, field: \'BalanceReaso" +
"n\' });\r\n                                                 $(BalanceReason.target)" +
".textbox(\'setValue\',data);\r\n\r\n                                             });\r\n" +
"                                        \r\n                                     }" +
"}\r\n                             }\r\n                         }\r\n                 " +
"}\r\n             },\r\n             {\r\n\r\n                 title: \'来源\', field: \'Bala" +
"nceReason\', width: \"18%\", align: \'center\',\r\n                 editor: {\r\n        " +
"             type: \'textbox\',\r\n                     options:\r\n                  " +
"       {\r\n                             //required: true\r\n                       " +
"  }\r\n                 }\r\n             },\r\n             {\r\n\r\n                 tit" +
"le: \'比例%\', field: \'BalancePercent\', width: \"18%\", align: \'center\',\r\n            " +
"     editor: {\r\n                     type: \'numberspinner\',\r\n                   " +
"  options:\r\n                         {\r\n                             precision: " +
"2,\r\n                             required: true,\r\n                             m" +
"in:0,\r\n                             onChange:function(newVal,oldVal)\r\n          " +
"                   {\r\n\r\n                                 if(isNaN(newVal)||newVa" +
"l==\"0.00\")\r\n                                 {\r\n                                " +
"     $(this).numberspinner(\'setValue\',\'0\');\r\n                                 }\r" +
"\n                                 else\r\n                                 {\r\n    " +
"                                 if(editIndex!=undefined)\r\n                     " +
"                {\r\n                                         var BalanceAmount = " +
"$(\'#PayBalanceTechInfoGrid\').datagrid(\'getEditor\', { index: editIndex, field: \'B" +
"alanceAmount\' });\r\n                                         var BalancePercent=p" +
"arseFloat($(this).numberspinner(\'getValue\'));\r\n                                 " +
"        var ElseProduct=parseFloat($(\"#ElseProduct\").numberspinner(\'getValue\'));" +
"\r\n                                         var BalanceAmountS=BalancePercent*Els" +
"eProduct/100;\r\n                                         $(BalanceAmount.target)." +
"numberspinner(\'setValue\',BalanceAmountS.toString());\r\n\r\n                        " +
"                 var per=parseFloat($(\"#percent\").text());\r\n                    " +
"                     var resultpercent=per-parseFloat(oldVal)+parseFloat(newVal)" +
";\r\n                                         $(\"#percent\").text(resultpercent.toF" +
"ixed(2).toString());\r\n                                     }\r\n                  " +
"               }\r\n                             }\r\n                         }\r\n  " +
"               }\r\n             },\r\n             {\r\n\r\n                 title: \'技术" +
"人员产值\', field: \'BalanceAmount\', width: \"18%\", align: \'center\',\r\n                 " +
"editor: {\r\n                     type: \'numberspinner\',\r\n                     opt" +
"ions: {\r\n                         required: true,\r\n                         prec" +
"ision: 2,\r\n                         min:0,\r\n                         onChange:fu" +
"nction(newVal,oldVal){\r\n                             if(isNaN(newVal)||newVal==\"" +
"0.00\")\r\n                             {\r\n                                 $(this)" +
".numberspinner(\'setValue\',\'0\');\r\n                             }\r\n               " +
"              else\r\n                             {\r\n                            " +
"     if(editIndex!=undefined)\r\n                                 {\r\n             " +
"                        var pro=parseFloat($(\"#product\").text());\r\n             " +
"                        var product=pro-parseFloat(oldVal)+parseFloat(newVal);\r\n" +
"                                     $(\"#product\").text(product.toFixed(2).toStr" +
"ing());\r\n                                 }\r\n                             }\r\n   " +
"                      }\r\n                     }\r\n                 }\r\n           " +
"  },\r\n             {\r\n                 title: \'备注\', field: \'BalanceNote\', width:" +
" \"18%\", align: \'center\',\r\n                 editor: {\r\n                     type:" +
" \'textbox\',\r\n                     options: {\r\n                         // requir" +
"ed: true,\r\n                     }\r\n                 }\r\n             }\r\n        ]" +
"],\r\n        onDblClickRow: onDblClickRow,\r\n        onLoadSuccess:function(){\r\n  " +
"          getPercent();\r\n        }\r\n    });\r\n\r\n\r\n    var editIndex = undefined;\r" +
"\n    // 判断是否结束编辑行\r\n    function endEditing() {\r\n        if (editIndex == undefin" +
"ed) { return true }\r\n        if ($(\'#PayBalanceTechInfoGrid\').datagrid(\'validate" +
"Row\', editIndex)) {\r\n            var Emp = $(\'#PayBalanceTechInfoGrid\').datagrid" +
"(\'getEditor\', { index: editIndex, field: \'EmpId\' });\r\n            var EmpName = " +
"$(Emp.target).combobox(\'getText\');\r\n            var EmpId = $(Emp.target).combob" +
"ox(\'getValue\');\r\n            $(\'#PayBalanceTechInfoGrid\').datagrid(\'getRows\')[ed" +
"itIndex][\'TechEmpName\'] = EmpName;\r\n            $(\'#PayBalanceTechInfoGrid\').dat" +
"agrid(\'getRows\')[editIndex][\'EmpId\'] = EmpId;\r\n            $(\'#PayBalanceTechInf" +
"oGrid\').datagrid(\'endEdit\', editIndex);\r\n            editIndex = undefined;\r\n   " +
"         getRows();\r\n            return true;\r\n        } else {\r\n            ret" +
"urn false;\r\n        }\r\n    }\r\n    //双击事件\r\n    function onDblClickRow(index) {\r\n " +
"       if (editIndex != index) {\r\n            if (endEditing()) {\r\n             " +
"   $(\'#PayBalanceTechInfoGrid\').datagrid(\'selectRow\', index)\r\n                  " +
"      .datagrid(\'beginEdit\', index);\r\n                editIndex = index;\r\n      " +
"          getRows();\r\n            } else {\r\n                $(\'#PayBalanceTechIn" +
"foGrid\').datagrid(\'selectRow\', editIndex);\r\n                JQ.dialog.warning(\'请" +
"将当前信息填写完整，再编辑其他信息\');\r\n            }\r\n        }\r\n    }\r\n    //追加行元素\r\n    function" +
" append() {\r\n        if (endEditing()) {\r\n            $(\'#PayBalanceTechInfoGrid" +
"\').datagrid(\'appendRow\', { Id: 0, EmpId: 0,SpecID:0,BalancePercent:\"0.00\",Balanc" +
"eAmount:\"0.00\"});\r\n            editIndex = $(\'#PayBalanceTechInfoGrid\').datagrid" +
"(\'getRows\').length - 1;\r\n            $(\'#PayBalanceTechInfoGrid\').datagrid(\'sele" +
"ctRow\', editIndex)\r\n                    .datagrid(\'beginEdit\', editIndex);\r\n    " +
"    }\r\n        else {\r\n            JQ.dialog.warning(\'请将当前信息填写完整，再添加记录\');\r\n     " +
"   }\r\n    }\r\n    //删除行元素\r\n    function removexit() {\r\n        var rows = $(\"#Pay" +
"BalanceTechInfoGrid\").datagrid(\'getSelections\');\r\n        if (rows.length <= 0) " +
"{\r\n            JQ.dialog.warning(\'请选择要删除的行\');\r\n            return;\r\n        }\r\n " +
"       for (var i = 0; i < rows.length; i++) {\r\n            var index = $(\"#PayB" +
"alanceTechInfoGrid\").datagrid(\'getRowIndex\', rows[i]);\r\n            $(\'#PayBalan" +
"ceTechInfoGrid\').datagrid(\'cancelEdit\', index)\r\n                .datagrid(\'delet" +
"eRow\', index);\r\n        }\r\n        getPercent();\r\n        editIndex = undefined;" +
"\r\n        if ($(\"#PayBalanceTechInfoGrid\").datagrid(\"getRows\").length > 0) {\r\n  " +
"          getRows();\r\n        }\r\n    }\r\n    function accept() {\r\n        if (end" +
"Editing()) {\r\n            $(\'#PayBalanceTechInfoGrid\').datagrid(\'acceptChanges\')" +
";\r\n            getRows();\r\n        }\r\n        else {\r\n            JQ.dialog.warn" +
"ing(\'请将信息填写完整\');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function ge" +
"tRows() {\r\n        var rows = $(\'#PayBalanceTechInfoGrid\').datagrid(\'getRows\');\r" +
"\n        $(\"#JsonRows\").val(JSON.stringify(rows));\r\n    }\r\n    function openInse" +
"rtDialog() //导入数据\r\n    {\r\n        if (endEditing()) {\r\n            JQ.dialog.dia" +
"log({\r\n                title: \"选择相关的技术人员信息\",\r\n                width: \'1024\',\r\n  " +
"              height: \'100%\',\r\n                JQID: \'ReviewTable\',\r\n           " +
"     JQLoadingType: \'datagrid\',\r\n                iconCls: \'fa fa-plus\',\r\n       " +
"         url:\'");

            
            #line 458 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                Write(Url.Action("selectTechEmp","PayBalanceEngineering","pay"));

            
            #line default
            #line hidden
WriteLiteral("&projId=");

            
            #line 458 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                  Write(Model.EngineeringID);

            
            #line default
            #line hidden
WriteLiteral("&PhaseId=");

            
            #line 458 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                                               Write(ViewBag.PhaseId);

            
            #line default
            #line hidden
WriteLiteral("\'\r\n\r\n            });\r\n        }\r\n        else {\r\n            JQ.dialog.warning(\'请" +
"将当前信息填写完整,再导入数据\');\r\n        }\r\n    }\r\n    var insert=function(row)\r\n    {\r\n     " +
"   var BalancePercent=0.00;\r\n        var BalanceAmount=0.00;\r\n        var ElsePr" +
"oduct=parseFloat($(\"#ElseProduct\").numberspinner(\'getValue\'));\r\n        if(row.F" +
"lowNodeTypeID==\"19\")//设计\r\n        {\r\n            BalancePercent=parseFloat($(\"#D" +
"esPercent\").val()).toFixed(2);\r\n        }\r\n        if(row.FlowNodeTypeID==\"20\")/" +
"/校对\r\n        {\r\n            BalancePercent=parseFloat($(\"#Checkpercent\").val())." +
"toFixed(2);\r\n        }\r\n        if(row.FlowNodeTypeID==\"21\")//审核\r\n        {\r\n   " +
"         BalancePercent=parseFloat($(\"#ReviewPercent\").val()).toFixed(2);\r\n     " +
"   }\r\n        BalanceAmount=(ElseProduct*BalancePercent/100).toFixed(2);\r\n      " +
"  $(\'#PayBalanceTechInfoGrid\').datagrid(\'appendRow\', \r\n            { \r\n         " +
"       Id: 0, EmpId: row.FlowNodeEmpID,SpecID:row.SpecId,BalancePercent:BalanceP" +
"ercent,BalanceAmount:BalanceAmount,TechEmpName:row.FlowNodeEmpName,BalanceReason" +
":row.SpecName\r\n            });\r\n        getPercent();\r\n    }\r\n    function editS" +
"elected() {\r\n        var selectedRow = $(\"#PayBalanceTechInfoGrid\").datagrid(\'ge" +
"tSelections\');\r\n        if (selectedRow.length <= 0) {\r\n            JQ.dialog.wa" +
"rning(\"请选择要编辑的行记录\");\r\n        }\r\n        else {\r\n\r\n            var index = $(\'#P" +
"ayBalanceTechInfoGrid\').datagrid(\"getRowIndex\", selectedRow[0]);\r\n            $(" +
"\'#PayBalanceTechInfoGrid\').datagrid(\'beginEdit\', index);\r\n\r\n        }\r\n    }\r\n\r\n" +
"    function getPercent() {\r\n        var percent=0;\r\n        var product=0;\r\n   " +
"     var rows = $(\'#PayBalanceTechInfoGrid\').datagrid(\'getRows\');\r\n        if(ro" +
"ws.length>0)\r\n        {\r\n            for(var index=0;index<rows.length;index++)\r" +
"\n            {\r\n                percent+=parseFloat(rows[index].BalancePercent);" +
"\r\n                product+=parseFloat(rows[index].BalanceAmount);\r\n            }" +
"\r\n        }\r\n        $(\"#percent\").text(percent.toFixed(2).toString());\r\n       " +
" $(\"#product\").text(product.toFixed(2).toString());\r\n    }\r\n\r\n    //设置变化的产值\r\n   " +
" function SetChangeProduct()\r\n    {\r\n        var rows=$(\"#PayBalanceTechInfoGrid" +
"\").datagrid(\'getRows\');\r\n        var ElseProduct=parseFloat($(\"#ElseProduct\").nu" +
"mberspinner(\"getValue\"));\r\n        if(editIndex==undefined)\r\n        {\r\n        " +
"    if(rows.length>0)\r\n            {\r\n                for(var index=0;index<rows" +
".length;index++)\r\n                {\r\n                    //$(\'#PayBalanceTechInf" +
"oGrid\').datagrid(\'getRows\')[index][\'BalanceAmount\']=\"1\";\r\n                    va" +
"r targetvalue=ElseProduct*parseFloat(rows[index].BalancePercent)/100;\r\n         " +
"           $(\'#PayBalanceTechInfoGrid\').datagrid(\'updateRow\',{\r\n                " +
"        index: index,\r\n                        row: {\r\n                         " +
"   BalanceAmount:targetvalue.toFixed(2)\r\n                        }\r\n            " +
"        });\r\n\r\n                }\r\n                getPercent();\r\n            }\r\n" +
"        }\r\n        else\r\n        {\r\n            //编辑行时某条记录，剩余产值发生变化\r\n           " +
" var BalanceAmount = $(\'#PayBalanceTechInfoGrid\').datagrid(\'getEditor\', { index:" +
" editIndex, field: \'BalanceAmount\' });\r\n            var BalancePercent = $(\'#Pay" +
"BalanceTechInfoGrid\').datagrid(\'getEditor\', { index: editIndex, field: \'BalanceP" +
"ercent\' });\r\n            var Percent=parseFloat($(BalancePercent.target).numbers" +
"pinner(\'getValue\'));\r\n            var ElseProduct=parseFloat($(\"#ElseProduct\").n" +
"umberspinner(\'getValue\'));\r\n            var BalanceAmountS=Percent*ElseProduct/1" +
"00;\r\n            $(BalanceAmount.target).numberspinner(\'setValue\',BalanceAmountS" +
".toString());\r\n        }\r\n    }\r\n</script>\r\n");

            
            #line 555 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
 using (Html.BeginForm("TechInfoSave", "PayBalanceEngineering", FormMethod.Post, new { @area = "pay", @id = "PayBalanceTechInfoForm" }))
{
    
            
            #line default
            #line hidden
            
            #line 557 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
Write(Html.HiddenFor(m => m.Id));

            
            #line default
            #line hidden
            
            #line 557 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                              

            
            #line default
            #line hidden
WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" name=\"JsonRows\"");

WriteLiteral(" id=\"JsonRows\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"DesPercent\"");

WriteLiteral(" name=\"DesPercent\"");

WriteAttribute("value", Tuple.Create(" value=\"", 22188), Tuple.Create("\"", 22219)
            
            #line 559 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
, Tuple.Create(Tuple.Create("", 22196), Tuple.Create<System.Object, System.Int32>(ViewData["DesPercent"]
            
            #line default
            #line hidden
, 22196), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"Checkpercent\"");

WriteLiteral(" name=\"Checkpercent\"");

WriteAttribute("value", Tuple.Create("  value=\"", 22287), Tuple.Create("\"", 22321)
            
            #line 560 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
, Tuple.Create(Tuple.Create("", 22296), Tuple.Create<System.Object, System.Int32>(ViewData["Checkpercent"]
            
            #line default
            #line hidden
, 22296), false)
);

WriteLiteral("/>\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"ReviewPercent\"");

WriteLiteral(" name=\"ReviewPercent\"");

WriteAttribute("value", Tuple.Create(" value=\"", 22390), Tuple.Create("\"", 22424)
            
            #line 561 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
, Tuple.Create(Tuple.Create("", 22398), Tuple.Create<System.Object, System.Int32>(ViewData["ReviewPercent"]
            
            #line default
            #line hidden
, 22398), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"6\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" style=\"font-size:14px;\"");

WriteLiteral(">项目结算信息</span>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r" +
"\n                项目名称\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" id=\"ProjName\"");

WriteLiteral(">");

            
            #line 573 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                Write(ViewBag.ProjName);

            
            #line default
            #line hidden
WriteLiteral("</label>\r\n            </td>\r\n            <th>\r\n                本次分配产值\r\n          " +
"  </th>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"EngAmountArrange\"");

WriteLiteral(" name=\"EngAmountArrange\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23040), Tuple.Create("\"", 23071)
            
            #line 579 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                           , Tuple.Create(Tuple.Create("", 23048), Tuple.Create<System.Object, System.Int32>(Model.EngAmountArrange
            
            #line default
            #line hidden
, 23048), false)
);

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n          " +
"      考核模板\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"PayModelID\"");

WriteLiteral(" name=\"PayModelID\"");

WriteLiteral(" style=\"width:860px;\"");

WriteLiteral(" class=\"easyui-combogrid\"");

WriteLiteral("></select>\r\n                <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" name=\"Words\"");

WriteLiteral(" id=\"Words\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n          " +
"      公司提奖比例%\r\n            </th>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"CompanyPercent\"");

WriteLiteral(" name=\"CompanyPercent\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23682), Tuple.Create("\"", 23717)
            
            #line 596 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                       , Tuple.Create(Tuple.Create("", 23690), Tuple.Create<System.Object, System.Int32>(ViewData["CompanyPercent"]
            
            #line default
            #line hidden
, 23690), false)
);

WriteLiteral(" />\r\n            </td>\r\n            <th>\r\n                工程类别比例%\r\n            </" +
"th>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"EngiTypePercent\"");

WriteLiteral(" name=\"EngiTypePercent\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23984), Tuple.Create("\"", 24020)
            
            #line 602 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                         , Tuple.Create(Tuple.Create("", 23992), Tuple.Create<System.Object, System.Int32>(ViewData["EngiTypePercent"]
            
            #line default
            #line hidden
, 23992), false)
);

WriteLiteral(" />\r\n            </td>\r\n            <th>\r\n                工程难度系数\r\n            </t" +
"h>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"EngiHardPercent\"");

WriteLiteral(" name=\"EngiHardPercent\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 24286), Tuple.Create("\"", 24322)
            
            #line 608 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                         , Tuple.Create(Tuple.Create("", 24294), Tuple.Create<System.Object, System.Int32>(ViewData["EngiHardPercent"]
            
            #line default
            #line hidden
, 24294), false)
);

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n          " +
"      设总\r\n            </th>\r\n            <td>\r\n                <label");

WriteLiteral(" id=\"ProjEmpName\"");

WriteLiteral(">");

            
            #line 616 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                   Write(ViewBag.ProjEmpName);

            
            #line default
            #line hidden
WriteLiteral("</label>\r\n            </td>\r\n            <th>\r\n                设总比例%\r\n           " +
" </th>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"ProjEmpPercent\"");

WriteLiteral(" name=\"ProjEmpPercent\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 24778), Tuple.Create("\"", 24813)
            
            #line 622 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                       , Tuple.Create(Tuple.Create("", 24786), Tuple.Create<System.Object, System.Int32>(ViewData["ProjEmpPercent"]
            
            #line default
            #line hidden
, 24786), false)
);

WriteLiteral(" />\r\n            </td>\r\n            <th>\r\n                设总所得产值\r\n            </t" +
"h>\r\n            <td>\r\n                <input");

WriteLiteral(" id=\"ProjEmpTotal\"");

WriteLiteral(" name=\"ProjEmpTotal\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 25073), Tuple.Create("\"", 25106)
            
            #line 628 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                   , Tuple.Create(Tuple.Create("", 25081), Tuple.Create<System.Object, System.Int32>(ViewData["ProjEmpTotal"]
            
            #line default
            #line hidden
, 25081), false)
);

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n          " +
"      剩余分配产值\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"ElseProduct\"");

WriteLiteral(" name=\"ElseProduct\"");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(" class=\"easyui-numberspinner\"");

WriteLiteral(" data-options=\"min:0\"");

WriteLiteral(" validtype=\"length[0,10]\"");

WriteAttribute("value", Tuple.Create(" value=\"", 25405), Tuple.Create("\"", 25437)
            
            #line 636 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"
                                                                                 , Tuple.Create(Tuple.Create("", 25413), Tuple.Create<System.Object, System.Int32>(ViewData["ElseProduct"]
            
            #line default
            #line hidden
, 25413), false)
);

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"6\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" style=\"font-size:14px;\"");

WriteLiteral(">技术人员结算信息</span>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table\"");

WriteLiteral(" id=\"PayBalanceTechInfoGrid\"");

WriteLiteral("></table>\r\n");

WriteLiteral("    <table>\r\n        <tr>\r\n            <td");

WriteLiteral(" style=\"width:480px;line-height:35px;\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" style=\"margin-left:100px;font-size:15px;\"");

WriteLiteral(">\r\n                    合计\r\n                </span>\r\n            </td>\r\n          " +
"  <td");

WriteLiteral(" style=\"width:200px;\"");

WriteLiteral(">\r\n                <label");

WriteLiteral(" id=\"percent\"");

WriteLiteral(" style=\"color:red;font-size:13px;\"");

WriteLiteral("></label>\r\n            </td>\r\n            <td>\r\n                <label");

WriteLiteral(" id=\"product\"");

WriteLiteral(" style=\"color:red;font-size:13px;\"");

WriteLiteral("></label>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

            
            #line 661 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"


            
            #line default
            #line hidden
WriteLiteral("    <div");

WriteLiteral(" id=\"toolBar\"");

WriteLiteral(" style=\"height:auto;text-align:right;\"");

WriteLiteral(">\r\n        <span");

WriteLiteral(" style=\"color:red;font-weight:bold;padding-right:80px;\"");

WriteLiteral(">  *  双击行记录可进行编辑</span>\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton l-btn l-btn-small l-btn-plain\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-plus\',plain:true\"");

WriteLiteral(" onclick=\"append()\"");

WriteLiteral(">新增</a>\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton l-btn l-btn-small l-btn-plain\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-filter\',plain:true\"");

WriteLiteral(" onclick=\"openInsertDialog()\"");

WriteLiteral(">导入</a>\r\n        <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(" class=\"easyui-linkbutton l-btn l-btn-small l-btn-plain\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-trash\',plain:true\"");

WriteLiteral(" onclick=\"removexit()\"");

WriteLiteral(">删除</a>\r\n    </div>\r\n");

            
            #line 668 "..\..\Views\PayBalanceEngineering\TechInfo.cshtml"

}

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
