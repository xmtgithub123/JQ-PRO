#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesMutiSign/DesMutiSignInfo.cshtml")]
    public partial class _Views_DesMutiSign_DesMutiSignInfo_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.DesMutiSign>
    {
        public _Views_DesMutiSign_DesMutiSignInfo_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
    JQ.form.submitInit({
        formid: 'DesMutiSignForm',//formid提交需要用到
        //$form:$(""#DesTaskCheckform""),
        buttonTypes: ['close','exportForm'],//默认按钮
        ExportName: '设计会签单',
        docName: 'IsoSJHQ',
        succesCollBack: function (data) {//成功回调函数,data为服务器返回值
            if (typeof (window.window.showDesMutiSignGrid) == ""function"") {
                window.showDesMutiSignGrid();
            }
            if (typeof (window.TaskTabSelect) == ""function"") {
                window.TaskTabSelect(""会签记录"");
            }
            window.SpecEmps = null;
            JQ.datagrid.autoRefdatagrid();
            JQ.dialog.dialogClose();//关闭窗体放在最后一步执行，以避免找不到事件源
        },
        onBefore: function (resultArr) {
            resultArr.push({ Key: ""Permission"", Value: '");

            
            #line 22 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                   Write(ViewBag.Permission);

            
            #line default
            #line hidden
WriteLiteral("\' });\r\n            resultArr.push({ Key: \"HQD_DC\", Value: \"");

            
            #line 23 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral("\" });\r\n        },\r\n        flow: {\r\n            isShowSave: false,\r\n            f" +
"lowNodeID: \"");

            
            #line 27 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                     Write(Request.QueryString["flowNodeID"] == null ? 0 : int.Parse(Request.QueryString["flowNodeID"]));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            flowMultiSignID: \"");

            
            #line 28 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                          Write(Request.QueryString["flowMultiSignID"] == null ? 0 : int.Parse(Request.QueryString["flowMultiSignID"]));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            url: \"");

            
            #line 29 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
              Write(Url.Action("FlowWidget", "PubFlow", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            instance: \"_flowInstance\",\r\n            processor: \"Design,Design" +
".FlowProcessor.FlowDesMutiSign\",\r\n            refID: \"");

            
            #line 32 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            refTable: \"DesMutiSign\",\r\n            beforeFormSubmit: function " +
"() {\r\n                //判断是否有会签人\r\n                var selectEmp = $(\"#DesMutiSig" +
"n_EmpDiv\").find(\".EmpSpecDiv\");\r\n                if (selectEmp.length == 0) {\r\n " +
"                   JQ.dialog.warning(\"请选择会签人！！！\");\r\n                    return f" +
"alse;\r\n                } else {\r\n                    var RecEmp = [];\r\n         " +
"           $.each(selectEmp, function (i, e) {\r\n                        var empD" +
"ata = JSON.parse($(e).attr(\"data-emp\"));\r\n                        RecEmp.push({ " +
"\'RecSpecId\': empData.SpecID, \'RecSpecName\': empData.SpecName, \'RecEmpId\': empDat" +
"a.EmpID, \'RecEmpName\': empData.EmpName });\r\n                    })\r\n\r\n          " +
"          $(\"#RecEmpData\").val(JSON.stringify(RecEmp));\r\n                }\r\n\r\n  " +
"              var roots = $(\"#designFile\").treegrid(\"getRoots\");\r\n              " +
"  var addData = [];\r\n                if (roots != null && roots.length > 0) {\r\n " +
"                   $.each(roots, function (i, e) {\r\n                        if (" +
"e.AttachExt != \".\") {\r\n                            addData.push({\r\n             " +
"                   AttachID: e.AttachID,\r\n                                Attach" +
"Name: e.AttachName,\r\n                                AttachVer: e.AttachVer,\r\n  " +
"                              SplitFileIds: getCheckValue(e.AttachID)\r\n         " +
"                   });\r\n                        }\r\n\r\n                        var" +
" childroot = $(\"#designFile\").treegrid(\"getChildren\", e.AttachID);\r\n            " +
"            if (childroot != null && childroot.length > 0) {\r\n                  " +
"          $.each(childroot, function (ic, ec) {\r\n                               " +
" if (ec.AttachExt == \".\") {\r\n                                    return true;\r\n " +
"                               }\r\n                                addData.push({" +
"\r\n                                    AttachID: ec.AttachID,\r\n                  " +
"                  AttachName: ec.AttachName,\r\n                                  " +
"  AttachVer: ec.AttachVer,\r\n                                    SplitFileIds: ge" +
"tCheckValue(e.AttachID)\r\n                                });\r\n                  " +
"          })\r\n                        }\r\n                    })\r\n               " +
" }\r\n\r\n\r\n                if (addData.length == 0) {\r\n                    var othe" +
"rFile = $(\"table[id^=\'DesMutiSign\']\").datagrid(\"getRows\");\r\n                    " +
"if (otherFile.length == 0) {\r\n                        JQ.dialog.warning(\"没有文件可以进" +
"行会签！！！\");\r\n                        return false;\r\n                    }\r\n       " +
"         }\r\n                $(\"#AttachIDDate\").val(JSON.stringify(addData));\r\n  " +
"          },\r\n            onInit: function () {\r\n                window.SpecEmps" +
" = \"\";\r\n");

            
            #line 92 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                
            
            #line default
            #line hidden
            
            #line 92 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                  if (ViewData["showAgree"] != null) {

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("\r\n                //初始话\r\n                var toolbar = window.top.$(\".rwpdialogdi" +
"v:last\").dialog(\'panel\').find(\".dialog-toolbar\");\r\n                toolbar.prepe" +
"nd($(\"<a");

WriteLiteral(" id=\\");

WriteLiteral("\"CheckAgree\\\" class=\\\"easyui-linkbutton\\\" data-options=\\\"iconCls:\'fa fa-remove\'\\\"" +
" style=\'margin-right: 5px;\' onclick=\'DesMuliDisAgree()\'  >不同意</a>\"));\r\n         " +
"       toolbar.prepend($(\"<a");

WriteLiteral(" id=\\");

WriteLiteral("\"CheckAgree\\\" class=\\\"easyui-linkbutton\\\" data-options=\\\"iconCls:\'fa fa-check\'\\\" " +
"style=\'margin-right: 5px;\' onclick=\'DesMuliAgree()\' >同意</a>\"));\r\n               " +
" $(\"<div");

WriteLiteral(" style=\'display:block;padding: 5px 5px;\'");

WriteLiteral(">会签意见：<input");

WriteLiteral(" id=\'muliAdmice\'");

WriteLiteral(" class=\\");

WriteLiteral("\"easyui-textbox\\\" data-options=\\\"multiline:\'true\'\\\" style=\\\"width:300px\\\" /> </di" +
"v>\").appendTo(toolbar);\r\n\r\n                RecID = \'");

            
            #line 100 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                    Write(ViewData["RecID"]);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n\r\n                ");

WriteLiteral("\r\n");

            
            #line 103 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"

                    }
                
            
            #line default
            #line hidden
WriteLiteral("\r\n                try {\r\n                    window.SpecEmps = JSON.parse(\'");

            
            #line 107 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                             Write(Html.Raw(ViewBag.SpecEmps));

            
            #line default
            #line hidden
WriteLiteral(@"');
                } catch (e) {

                }

                showMuliEmp();
                setTimeout(function () {
                    if ($(""#selectEmp"").css(""display"") == ""none"") {
                        $("".EmpSpecDiv i"").hide();
                    }
                }, 1500);
            }
        }
    });

    var RecID;

    function DesMuliAgree() {
        return JQ.dialog.confirm(""你确定同意此会签内容！！！"", function () {
            postSave(2);
        })
    }

    function DesMuliDisAgree() {
        return JQ.dialog.confirm(""你确定不同意此会签内容！！！"", function () {
            if (window.top.$(""#muliAdmice"").textbox(""getValue"") == """") {
                JQ.dialog.warning(""请在下方，填写不同意原因！！！"");
                return false;
            }
            postSave(1);
        })
    }

    function postSave(typeID) {

        JQ.tools.ajax({
            method:'POST',
            data: { Id: $(""#DesMutiSignForm"").find(""input[id='Id']"").val(), RecStatus: typeID, RecContent: window.top.$(""#muliAdmice"").textbox(""getValue""), RecID: RecID },
            url: '");

            
            #line 145 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
             Write(Url.Action("UpdateRec"));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n            succesCollBack: function (param) {\r\n                if (param.sta" +
"teValue > 0) {\r\n                    JQ.dialog.dialogClose();\r\n                }\r" +
"\n            }\r\n        });\r\n    }\r\n\r\n    function showMuliEmp() {\r\n        if (" +
"typeof (window.SpecEmps) != \"undefined\") {\r\n            if (window.SpecEmps.leng" +
"th > 0) {\r\n                var $contain = $(\"#DesMutiSign_EmpDiv\");\r\n           " +
"     $contain.empty();\r\n                debugger;\r\n                var emplist =" +
" Enumerable.From(window.SpecEmps).Distinct(\"p=>p.SpecID,p.EmpID\").OrderBy(\"x=>x." +
"SpecID\").ToArray();\r\n                var hqzy = \"\";\r\n                $.each(empl" +
"ist, function (i, e) {\r\n                    hqzy += e.SpecName + \",\";\r\n         " +
"           $(\"<div class=\'EmpSpecDiv\' data-Emp=\'\" + JSON.stringify({ \'SpecID\': e" +
".SpecID, \'SpecName\': e.SpecName, \'EmpName\': e.EmpName, \'EmpID\': e.EmpID }) + \"\'>" +
"<span><\" + e.SpecName + \">\" + e.EmpName + \"</span><i class=\'fa fa-times-circle\' " +
"onclick=\\\"removeEmp(this)\\\"></i></div>\").appendTo($contain);\r\n                })" +
"\r\n                $(\"#HQZY\").val(hqzy.substr(0, hqzy.length - 1));\r\n            " +
"}\r\n        }\r\n    }\r\n\r\n    function getCheckValue(nodeID) {\r\n        var splitTa" +
"ble = $(\"#splitDwg_\" + nodeID, \"#DesMutiSignForm\");\r\n        var splitDwgId = \"\"" +
";\r\n        if (splitTable.length > 0) {\r\n            var checkCtl = splitTable.f" +
"ind(\"input[type=\'checkbox\']\");\r\n            var checkArrayID = [];\r\n            " +
"var NoCheckArrayID = [];\r\n            checkCtl.each(function (i, e) {\r\n         " +
"       if ($(e).attr(\"checked\") == \"checked\") {\r\n                    checkArrayI" +
"D.push($(e).attr(\"itemId\"));\r\n                } else {\r\n                    NoCh" +
"eckArrayID.push($(e).attr(\"itemId\"));\r\n                }\r\n            });\r\n     " +
"       if (checkArrayID.length > 0) {\r\n                splitDwgId = checkArrayID" +
".join(\",\");\r\n            } else {\r\n                splitDwgId = NoCheckArrayID.j" +
"oin(\",\");\r\n            }\r\n        }\r\n        return splitDwgId;\r\n    }\r\n</script" +
">\r\n<style");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(@">
    #DesTaskCheckForm .panel-body {
        border-width: 1px;
        border-style: solid;
    }

    .EmpSpecDiv {
        float: left;
        line-height: 16px;
        height: 16px;
        font-size: 16px;
        border: 1px solid #bbb;
        position: relative;
        padding: 5px 5px;
        margin: 0px 5px;
    }

        .EmpSpecDiv i {
            line-height: 16px;
            float: right;
            padding-left: 8px;
        }

    .remindCss {
        float: right;
        padding-left: 8px;
        line-height: 18px;
        font-size: 14px;
        width: 12px;
        color: #ec696b;
        /*cursor: pointer;*/
    }

    #DesMutiSignForm .panel-body-noheader {
        border-width: 1px;
    }
</style>
");

            
            #line 231 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
 using (Html.BeginForm("save", "DesMutiSign", FormMethod.Post, new { @area = "Design", @id = "DesMutiSignForm" }))
{

            
            #line default
            #line hidden
WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"TaskId\"");

WriteLiteral(" name=\"TaskId\"");

WriteAttribute("value", Tuple.Create(" value=\"", 9394), Tuple.Create("\"", 9423)
            
            #line 233 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
, Tuple.Create(Tuple.Create("", 9402), Tuple.Create<System.Object, System.Int32>(ViewBag.TaskModel.Id
            
            #line default
            #line hidden
, 9402), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"Id\"");

WriteLiteral(" name=\"Id\"");

WriteAttribute("value", Tuple.Create(" value=\"", 9471), Tuple.Create("\"", 9488)
            
            #line 234 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
, Tuple.Create(Tuple.Create("", 9479), Tuple.Create<System.Object, System.Int32>(Model.Id
            
            #line default
            #line hidden
, 9479), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"AttachIDDate\"");

WriteLiteral(" name=\"AttachIDDate\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"RecEmpData\"");

WriteLiteral(" name=\"RecEmpData\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n        <tr>\r\n            <th>工程名称</th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(" bookmark=\"ProjName\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 241 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
           Write(Html.Raw(ViewBag.ProjModel.ProjName));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n            <th>工程编号</th>\r\n            <td");

WriteLiteral(" bookmark=\"ProjNumber\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 245 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
           Write(Html.Raw(ViewBag.ProjModel.ProjNumber));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <th>子项名称</th>\r\n  " +
"          <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 252 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
           Write(Html.Raw(ViewBag.TaskGroupName));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n            <th>阶段</th>\r\n            <td");

WriteLiteral(" bookmark=\"JD\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 256 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
           Write(Html.Raw(ViewBag.TaskGroupPhaseName));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">任务名称</th>\r\n            <td");

WriteLiteral(" width=\"23%\"");

WriteLiteral(">");

            
            #line 261 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                       Write(Html.Raw(ViewBag.TaskModel.TaskName));

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">提出人</th>\r\n            <td");

WriteLiteral(" width=\"23%\"");

WriteLiteral(">");

            
            #line 263 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                       Write(Model.CreatorEmpName);

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">提出日期</th>\r\n            <td");

WriteLiteral(" width=\"24%\"");

WriteLiteral(">");

            
            #line 265 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                       Write(Model.CreationTime.ToString("yyyy-MM-dd"));

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n                会签人\r\n      " +
"      </th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-search\'\"");

WriteLiteral(" id=\"selectEmp\"");

WriteLiteral(" name=\"selectEmp\"");

WriteLiteral(">选择人员</a>\r\n                <div");

WriteLiteral(" id=\"DesMutiSign_EmpDiv\"");

WriteLiteral(" style=\"display:block;padding: 5px 0px;\"");

WriteLiteral(" data-Emp=\"\"");

WriteLiteral(">\r\n\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n    " +
"        <th>标题</th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" name=\"MutiSignTitle\"");

WriteLiteral(" style=\"width:98%;\"");

WriteAttribute("value", Tuple.Create(" value=\"", 11155), Tuple.Create("\"", 11183)
            
            #line 281 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
, Tuple.Create(Tuple.Create("", 11163), Tuple.Create<System.Object, System.Int32>(Model.MutiSignTitle
            
            #line default
            #line hidden
, 11163), false)
);

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"required:true\"");

WriteLiteral(" validType=\"length[0,500]\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>会签说明</th>\r\n " +
"           <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" name=\"MutiSignContent\"");

WriteLiteral(" style=\"width:98%;height:80px\"");

WriteAttribute("value", Tuple.Create(" value=\"", 11447), Tuple.Create("\"", 11477)
            
            #line 287 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
  , Tuple.Create(Tuple.Create("", 11455), Tuple.Create<System.Object, System.Int32>(Model.MutiSignContent
            
            #line default
            #line hidden
, 11455), false)
);

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"multiline:true,required:true\"");

WriteLiteral(" validType=\"length[0,2000]\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>设计文件</th>\r\n " +
"           <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
                    $(function () {
                        JQ.treegrid.treegrid({
                            JQID: 'designFile',//数据表格ID
                            JQLoadingType: 'datagrid',//数据表格类型 [datagrid,datagrid]
                            idField: 'AttachID',
                            treeField: 'AttachName',
");

            
            #line 300 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                            
            
            #line default
            #line hidden
            
            #line 300 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                              
                                if (Model.Id == 0)
                                {

            
            #line default
            #line hidden
WriteLiteral("                                    ");

WriteLiteral("\r\n                            url: \'");

            
            #line 304 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                             Write(Url.Action("TaskInfoGetDesTaskAttachSelDataJson", "DesTask"));

            
            #line default
            #line hidden
WriteLiteral("\',//请求的地址\r\n                            queryParams: { taskId: \'");

            
            #line 305 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                               Write(ViewBag.TaskModel.Id);

            
            #line default
            #line hidden
WriteLiteral("\', AttachIds: \'");

            
            #line 305 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                   Write(Html.Raw(ViewBag.fileIds));

            
            #line default
            #line hidden
WriteLiteral("\' },\r\n                            ");

WriteLiteral("\r\n");

            
            #line 307 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                }
                                else
                                {

            
            #line default
            #line hidden
WriteLiteral("                                    ");

WriteLiteral("\r\n                            url: \'");

            
            #line 311 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                             Write(Url.Action("DesMutiSignAttach", "DesMutiSign"));

            
            #line default
            #line hidden
WriteLiteral("\',//请求的地址\r\n                            queryParams: { MuliSignID: \'");

            
            #line 312 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                   Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral("\', AttachIds: \'");

            
            #line 312 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                           Write(Html.Raw(ViewBag.fileIds));

            
            #line default
            #line hidden
WriteLiteral("\' },\r\n                            ");

WriteLiteral("\r\n");

            
            #line 314 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                }
                            
            
            #line default
            #line hidden
WriteLiteral(@"
                            pagination: false,
                            rownumbers: true,
                            fit: false,
                            lines: true,
                            columns: [[
                                {
                                    title: '文件名称', field: 'AttachName', width: '30%', align: 'left', halign: 'center', sortable: false, formatter: function (value, row, index) {
                                        if (row.AttachExt == '.') {
                                            return row.AttachName;
                                        } else {
                                            //.fa-info
                                            if (typeof (row.NewAttachVer) != ""undefined"") {
                                                if (row.NewAttachVer == row.AttachVer) {
                                                    return ""<a  target=\""_blank\"" href='");

            
            #line 329 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                   Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral("?id=\" + row.AttachID + \"&type=attach&version=\" + row.AttachVer + \" \'>\" + row.Atta" +
"chName + \"</a> \";\r\n                                                } else {\r\n   " +
"                                                 return \"<a  target=\\\"_blank\\\" h" +
"ref=\'");

            
            #line 331 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                   Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + row.AttachID + ""&type=attach&version="" + row.AttachVer + "" '>"" + row.AttachName + ""</a><i class='fa fa-info-circle remindCss' title='此文件设计已上传新版本！最新版本(v"" + row.NewAttachVer + "")'></i>  "";
                                                }
                                            }
                                            else {
                                                return ""<a  target=\""_blank\"" href='");

            
            #line 335 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                               Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + row.AttachID + ""&type=attach&version="" + row.AttachVer + "" '>"" + row.AttachName + ""</a> "";
                                            }
                                        }
                                    }
                                },
                                {
                                    title: '拆图文件', field: 'SplitDwg', width: '33%', align: 'left', halign: 'center', sortable: false, formatter: function (value, row, index) {
                                        if (row.AttachExt == '.') {
                                            return """";
                                        } else {
");

            
            #line 345 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                            
            
            #line default
            #line hidden
            
            #line 345 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                              
                                                if (Model.Id == 0)
                                                {

            
            #line default
            #line hidden
WriteLiteral("                                                    ");

WriteLiteral(@"
                                            var resultHtml = """";
                                            $.ajax({
                                                async: false,
                                                type: ""GET"",
                                                data: { attachID: row.AttachID, attachVer: row.AttachVer },
                                                url: """);

            
            #line 354 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                  Write(Url.Action("GetSplitFiles", "DesTask", new { @area = "Design" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
                                                dataType: ""json"",
                                                success: function (data, status) {
                                                    if (data.length > 0) {
                                                        resultHtml += ""<table");

WriteLiteral(" id=\'splitDwg_\" + row.AttachID + \"\'");

WriteLiteral(" class=\'table-bordered\'");

WriteLiteral(" style=\'margin: 5px 5px;width:95%\'");

WriteLiteral(">\";\r\n                                                        $.each(data, functio" +
"n (i, e) {\r\n                                                            resultHt" +
"ml += \"<tr>\";\r\n                                                            resul" +
"tHtml += \"<td");

WriteLiteral(" style=\'padding: 3px 3px;text-align:center;\'");

WriteLiteral("><input");

WriteLiteral(" type=\'checkbox\'");

WriteLiteral(" itemId=\'\" + e.ID + \"\'");

WriteLiteral(" /></td>\";\r\n                                                            resultHtm" +
"l += \"<td");

WriteLiteral(" style=\'padding: 3px 3px;\'");

WriteLiteral("><a");

WriteLiteral("  target=\\");

WriteLiteral("\"_blank\\\" href=\'");

            
            #line 362 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                                                                Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + e.ID + ""&type=DesignSplitFile'>"" + e.Name + ""</a></td>"";
                                                            resultHtml += ""</tr>"";
                                                        })
                                                        resultHtml += ""</table>"";
                                                    }
                                                },
                                                error: function () {
                                                    resultHtml = """";
                                                }
                                            })
                                            return resultHtml;
                                            ");

WriteLiteral("\r\n");

            
            #line 374 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                }
                                                else
                                                {

            
            #line default
            #line hidden
WriteLiteral("                                                    ");

WriteLiteral(@"
                                            var resultHtml = """";
                                            $.ajax({
                                                async: false,
                                                type: ""GET"",
                                                data: { attachID: row.AttachID, attachVer: row.AttachVer, splitIds: row.SplitFileIds },
                                                url: """);

            
            #line 383 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                  Write(Url.Action("GetSplitFilesByMuli", "DesTask", new { @area = "Design" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
                                                dataType: ""json"",
                                                success: function (data, status) {
                                                    if (data.length > 0) {
                                                        resultHtml += ""<table");

WriteLiteral(" id=\'splitDwg_\" + row.AttachID + \"\'");

WriteLiteral(" class=\'table-bordered\'");

WriteLiteral(" style=\'margin: 5px 5px;width:95%\'");

WriteLiteral(">\";\r\n                                                        $.each(data, functio" +
"n (i, e) {\r\n                                                            resultHt" +
"ml += \"<tr>\";\r\n                                                            resul" +
"tHtml += \"<td");

WriteLiteral(" style=\'padding: 3px 3px;text-align:center;\'");

WriteLiteral(">\" + (parseInt(i) + 1) + \"</td>\";\r\n                                              " +
"              resultHtml += \"<td");

WriteLiteral(" style=\'padding: 3px 3px;\'");

WriteLiteral("><a");

WriteLiteral("  target=\\");

WriteLiteral("\"_blank\\\" href=\'");

            
            #line 391 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                                                                Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + e.ID + ""&type=DesignSplitFile'>"" + e.Name + ""</a></td>"";
                                                            resultHtml += ""</tr>"";
                                                        })
                                                        resultHtml += ""</table>"";
                                                    }
                                                },
                                                error: function () {
                                                    resultHtml = """";
                                                }
                                            })
                                            return resultHtml;
                                            ");

WriteLiteral("\r\n");

            
            #line 403 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                }
                                              
            
            #line default
            #line hidden
WriteLiteral("\r\n                                        }\r\n                                    " +
"}\r\n                                },\r\n                                {\r\n      " +
"                              title: \'当前版本\', field: \'AttachVer\', width: \'10%\', a" +
"lign: \'center\', sortable: false, formatter: function (value, row, index) {\r\n    " +
"                                    if (row.AttachExt == \".\") {\r\n               " +
"                             return \"\";\r\n                                       " +
" } else {\r\n                                            return value;\r\n          " +
"                              }\r\n                                    }\r\n        " +
"                        },\r\n                                { title: \'上传日期\', fie" +
"ld: \'AttachDateUpload\', width: \'12%\', align: \'center\', sortable: false, formatte" +
"r: JQ.tools.DateTimeFormatterByT },\r\n                                { title: \'上" +
"传人\', field: \'AttachEmpName\', width: \'10%\', align: \'center\', sortable: false },\r\n" +
"                            ]],\r\n                            onLoadSuccess: func" +
"tion (data) {\r\n                                //$(\"#designFile\").treegrid(\"resi" +
"ze\");\r\n\r\n                            }\r\n                        })\r\n            " +
"        })\r\n\r\n                    $(\"#selectEmp\").click(function () {\r\n         " +
"               var selectEmp = $(\"#DesMutiSign_EmpDiv\").find(\".EmpSpecDiv\");\r\n  " +
"                      var empids = [];\r\n                        if (selectEmp.le" +
"ngth > 0) {\r\n\r\n                            $.each(selectEmp, function (i, e) {\r\n" +
"                                var empData = JSON.parse($(e).attr(\"data-emp\"));" +
"\r\n                                empids.push({ \'SpecID\': empData.SpecID, \'EmpID" +
"\': empData.EmpID });\r\n                            })\r\n                        }\r" +
"\n                        JQ.dialog.dialog({\r\n                            url: \'");

            
            #line 438 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                             Write(Url.Action("SpecEmployee", "usercontrol", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?empids=' + JSON.stringify(empids),
                            width: 450,
                            height: 600,
                            title: '请选择人员',
                            onClose: function () {
                                showMuliEmp();
                            }
                        });
                    })



                    function removeEmp(thisDiv) {
                        $(thisDiv).parent().remove();
                    }

                </script>
                <table");

WriteLiteral(" id=\"designFile\"");

WriteLiteral("></table>\r\n            </td>\r\n        </tr>\r\n        <tr");

WriteLiteral(" id=\"SignTd\"");

WriteLiteral(">\r\n            <th></th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral("></td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n                其他会签文件\r\n  " +
"          </th>\r\n            <td");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n");

            
            #line 467 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                
            
            #line default
            #line hidden
            
            #line 467 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                  
                    var uploader = new DataModel.FileUploader();
                    uploader.RefID = Model.Id;
                    uploader.RefTable = "DesMutiSign";
                    uploader.Name = "DesMutiSign";
                    
            
            #line default
            #line hidden
            
            #line 472 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                Write(Html.Partial("~/Areas/Core/Views/UserControl/FileUploader.cshtml", uploader));

            
            #line default
            #line hidden
            
            #line 472 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
                                                                                                   
                
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

WriteLiteral("    <table");

WriteLiteral(" style=\'display: none\'");

WriteLiteral(" title=\'会签记录\'");

WriteLiteral(">\r\n        <tbody");

WriteLiteral(" bookmark=\'PlanTableInfo_Person\'");

WriteLiteral(">\r\n");

WriteLiteral("            ");

            
            #line 481 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
       Write(Html.Raw(ViewBag.HTML));

            
            #line default
            #line hidden
WriteLiteral("\r\n        </tbody>\r\n    </table>\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"SQZY\"");

WriteLiteral(" name=\"SQZY\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23654), Tuple.Create("\"", 23675)
            
            #line 484 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
, Tuple.Create(Tuple.Create("", 23662), Tuple.Create<System.Object, System.Int32>(ViewBag.SQZY
            
            #line default
            #line hidden
, 23662), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"SQZYFZR\"");

WriteLiteral(" name=\"SQZYFZR\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23733), Tuple.Create("\"", 23757)
            
            #line 485 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"
, Tuple.Create(Tuple.Create("", 23741), Tuple.Create<System.Object, System.Int32>(ViewBag.SQZYFZR
            
            #line default
            #line hidden
, 23741), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"HQZY\"");

WriteLiteral(" name=\"HQZY\"");

WriteLiteral(" />\r\n");

            
            #line 487 "..\..\Views\DesMutiSign\DesMutiSignInfo.cshtml"

                    }

            
            #line default
            #line hidden
        }
    }
}
#pragma warning restore 1591
