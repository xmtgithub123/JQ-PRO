#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesExch/ProjectProgressInfoExch.cshtml")]
    public partial class _Views_DesExch_ProjectProgressInfoExch_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_DesExch_ProjectProgressInfoExch_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    var requestUrl = \'");

            
            #line 4 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
                 Write(Url.Action("InHandExchTaskList", "DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral("?projID=");

            
            #line 4 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
                                                                                           Write(Request.Params["projID"]);

            
            #line default
            #line hidden
WriteLiteral("&taskGroupId=");

            
            #line 4 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
                                                                                                                                 Write(Request.Params["taskGroupId"]);

            
            #line default
            #line hidden
WriteLiteral("&IsProcess=1\';\r\n    JQ.datagrid.datagrid({\r\n        JQPrimaryID: \'Id\',//主键的字段\r\n  " +
"      JQID: \"DesExchGrid\",//数据表格ID\r\n        JQLoadingType: \'datagrid\',//数据表格类型 [" +
"datagrid,datagrid]\r\n        checkOnSelect: false,\r\n        selectOnCheck: false," +
"\r\n        fit: true,\r\n        pagination: true,\r\n        collapsible: true,\r\n   " +
"     JQMergeCells: { fields: [\'Id\', \'ExchTitle\', \'ExchSpecName\', \'ExchEmpName\', " +
"\'SpecIdent\', \'EmpIdent\', \'dateIdent\', \'NumberIdent\', \'projIdent\', \'process\'] },\r" +
"\n        url: requestUrl,\r\n        columns: [[\r\n            {\r\n                t" +
"itle: \'项目名称\', field: \'NumberIdent\', width: \'240\', halign: \'center\', align: \'left" +
"\',\r\n                formatter: function (val, row) {\r\n                    if (ro" +
"w.ExchIsInvalid == false) {\r\n                        return \'<span style=\"color:" +
"red;\">\' + row.ProjName + \'</span>\'\r\n                    }\r\n                    e" +
"lse {\r\n                        return row.ProjName;\r\n                    }\r\n\r\n  " +
"              }\r\n            },\r\n            {\r\n                title: \'项目阶段\', f" +
"ield: \'projIdent\', width: \'100\', halign: \'center\', align: \'center\',\r\n           " +
"     formatter: function (val, row) {\r\n                    if (row.ExchIsInvalid" +
" == false) {\r\n                        return \'<span style=\"color:red;\">\' + row.P" +
"hasename + \'</span>\'\r\n                    }\r\n                    else {\r\n       " +
"                 return row.Phasename;\r\n                    }\r\n\r\n               " +
" }\r\n            },\r\n            {\r\n                title: \'资料名称\', field: \'ExchTi" +
"tle\', width: 220, align: \'left\', halign: \'center\',\r\n                formatter: f" +
"unction (val, row) {\r\n                    if (row.ExchIsInvalid == false) {\r\n   " +
"                     return \'<span style=\"font-weight:600;color:red;\">\' + row.Ex" +
"chTitle + \'</span>\'\r\n                    }\r\n                    else {\r\n        " +
"                return \'<span style=\"font-weight:600;\">\' + row.ExchTitle + \'</sp" +
"an>\';\r\n                    }\r\n                    //\'<b>\'+row.ExchTitle+\'</b>\';\r" +
"\n                }\r\n            },\r\n            {\r\n                title: \'提资专业\'" +
", field: \'SpecIdent\', width: 120, align: \'center\', halign: \'center\',\r\n          " +
"      formatter: function (val, row, index) {\r\n                    return row.Ex" +
"chSpecName;\r\n                }\r\n            },\r\n            {\r\n                t" +
"itle: \'提资人\', field: \'EmpIdent\', width: 80, align: \'center\', halign: \'center\',\r\n " +
"               formatter: function (val, row) {\r\n                    return row." +
"ExchEmpName;\r\n                }\r\n            },\r\n            { title: \'收资专业\', fi" +
"eld: \'RecSpecName\', width: 120, align: \'left\', halign: \'center\' },\r\n            " +
"{ title: \'收资人\', field: \'RecEmpName\', width: 80, align: \'left\', halign: \'center\' " +
"},\r\n            {\r\n                title: \'提资期限\', field: \'dateIdent\', width: 100" +
", align: \'center\', halign: \'center\',\r\n                formatter: function (val, " +
"row)//JQ.tools.DateTimeFormatterByT\r\n                {\r\n                    var " +
"value = \"\";\r\n                    if (JQ.tools.isNotEmpty(row.ExcLastPutTime)) {\r" +
"\n                        value = row.ExcLastPutTime.replace(\"T\", \" \").substring(" +
"0, 10);\r\n\r\n                        if (row.ExcLastPutTime.substring(0, 4) <= 190" +
"0)\r\n                            value = \"\";\r\n                    }\r\n            " +
"        return value;\r\n                }\r\n            },\r\n\r\n        {\r\n         " +
"   title: \'发起时间\', field: \'CreationTime\', width: 100, align: \'center\', halign: \'c" +
"enter\',\r\n            formatter: JQ.tools.DateTimeFormatterByT\r\n        },\r\n\r\n   " +
"     {\r\n            title: \'接收时间\', field: \'RecTime\', width: 100, align: \'center\'" +
", halign: \'center\',\r\n            formatter: JQ.tools.DateTimeFormatterByT\r\n     " +
"   },\r\n        {\r\n            title: \'接收状态\', field: \'State\', width: 100, align: " +
"\'center\', halign: \'center\',\r\n            formatter: function (val, row) {\r\n     " +
"           if (row.State == \'通过\') {\r\n                    return \'<span style=\"co" +
"lor:green;\">\' + row.State + \'</span>\'\r\n                }\r\n                else {" +
"\r\n                    if (row.State == \"回退\") {\r\n                        return \'" +
"<span style=\"color:red;\">\' + row.State + \'</span>\'\r\n                    }\r\n     " +
"               else {\r\n                        return row.State;\r\n              " +
"      }\r\n                }\r\n            }\r\n        },\r\n\r\n        {\r\n            " +
"title: \'处理意见\', field: \'RecContent\', width: 120, align: \'center\', halign: \'center" +
"\'\r\n        },\r\n            {\r\n                field: \"process\", title: \"流程进度\", a" +
"lign: \"center\", halign: \"center\", width: 90,\r\n                formatter: JQ.Flow" +
".showFlowProgress(\"DesExchGrid\", \"DesExch\", \"Id\")\r\n            }\r\n\r\n        ]]\r\n" +
"    })\r\n\r\n\r\n\r\n    function getProgress(grid, refTable, refID, url) {\r\n        if" +
" (!JQ.Flow._progress) {\r\n            JQ.Flow._progress = {\r\n            };\r\n    " +
"    }\r\n        JQ.Flow._progress[\"$flow\" + grid] = {\r\n            url: url, refT" +
"able: refTable, ids: []\r\n        };\r\n        return JQ.Flow._progress[\"$flow\" + " +
"grid];\r\n    }\r\n\r\n\r\n\r\n    //提资审批页面信息\r\n    function ExchApprove(ExchId) {\r\n       " +
" JQ.dialog.dialog({\r\n            title: \'待办提资详细信息\',\r\n            width: \'1200\',\r" +
"\n            height: \'700\',\r\n            url: \'");

            
            #line 140 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
             Write(Url.Action("ExchInfoApprove","DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral("?Id=\' + ExchId + \'&taskId=");

            
            #line 140 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
                                                                                                     Write(Request.Params["taskId"]);

            
            #line default
            #line hidden
WriteLiteral(@"',
            onClose: function () {
                $(""#DesExchGrid"").datagrid(""reload"");
            }
        });
    }


    // 更换标题

    function ChangeTitle() {
        var $obj = $('div[class=""datagrid-body""]').find('td[field=""process""]').children('div').children('span');
        for (var index = 0; index < ($obj).length; index++) {
            var $target = $obj.eq(index);
            if ($target.text() != ""未审批"" && $target.text() != """") {

                $target.text(""查看流程"");
            }
        }



    }
    // 添加提资计划
    function AddSpecExchPlan() {
        JQ.dialog.dialog({
            title: '添加提资',
            height: '800',
            width: '1200',
            url: '");

            
            #line 169 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
             Write(Url.Action("AddExchPlan","DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral("?taskId=");

            
            #line 169 "..\..\Views\DesExch\ProjectProgressInfoExch.cshtml"
                                                                               Write(Request.Params["taskId"]);

            
            #line default
            #line hidden
WriteLiteral(@"',
            onClose: function () {
                $(""#DesExchGrid"").datagrid(""reload"");
            }
        });
    }

    JQ.Flow.onLoadFlowProgress = function () {
        ChangeTitle();
    }

    function ClosePage() {
        var info = JQ.tools.findDialogInfo();
        if (typeof (window[""FormExchRefresh_"" + info.parentid]) == ""function"") {
            window[""FormExchRefresh_"" + info.parentid]();
            window.top.$(""#"" + info.divid).dialog('close');
            window.top.$(""div.panel-tool"").show();
        }

    }
</script>


<table");

WriteLiteral(" id=\"DesExchGrid\"");

WriteLiteral("></table>\r\n\r\n");

        }
    }
}
#pragma warning restore 1591
