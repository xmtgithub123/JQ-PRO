#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 4 "..\..\Views\DesReceive\ExchRecList.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesReceive/ExchRecList.cshtml")]
    public partial class _Views_DesReceive_ExchRecList_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_DesReceive_ExchRecList_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\DesReceive\ExchRecList.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        var requestUrl = \'");

            
            #line 7 "..\..\Views\DesReceive\ExchRecList.cshtml"
                     Write(Url.Action("ExchRecJsonList", "DesReceive", new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral("?RecStatus=0&Type=");

            
            #line 7 "..\..\Views\DesReceive\ExchRecList.cshtml"
                                                                                                          Write(ViewBag.TypeKind);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n        var EmpId = \'");

            
            #line 8 "..\..\Views\DesReceive\ExchRecList.cshtml"
                Write(ViewBag.EmpId);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n\r\n        $(function () {\r\n            var addPermission = \'");

            
            #line 11 "..\..\Views\DesReceive\ExchRecList.cshtml"
                            Write(ViewBag.addPermission);

            
            #line default
            #line hidden
WriteLiteral(@"';
            if (addPermission != '1') {
                $(""#DesExchPanel"").children().eq(0).children().hide();
            }

            $(""#RecState"").combobox({
                editable: false,
                valueField: 'Value',
                textField: 'Text',
                value: '0',
                url: '");

            
            #line 21 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("getRecStateList", "DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral(@"',
                onChange: function (newVal, oldVal) {
                    var val = newVal;
                    if (newVal == ""-1"") {
                        val = """";
                    }

                    $(""#DesExchRecGrid"").datagrid(""reload"", '");

            
            #line 28 "..\..\Views\DesReceive\ExchRecList.cshtml"
                                                        Write(Url.Action("ExchRecJsonList", "DesReceive",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral("?RecStatus=\' + val + \'&Type=");

            
            #line 28 "..\..\Views\DesReceive\ExchRecList.cshtml"
                                                                                                                                                      Write(ViewBag.TypeKind);

            
            #line default
            #line hidden
WriteLiteral("\');\r\n                }\r\n            });\r\n\r\n            JQ.datagrid.datagrid({\r\n  " +
"              toolbar: \'#DesExchPanel\',\r\n                JQPrimaryID: \'Id\',//主键的" +
"字段\r\n                JQID: \"DesExchRecGrid\",//数据表格ID\r\n                JQLoadingTy" +
"pe: \'datagrid\',//数据表格类型 [datagrid,datagrid]\r\n                checkOnSelect: fals" +
"e,\r\n                selectOnCheck: false,\r\n                fit: true,\r\n         " +
"       JQMergeCells: { fields: [\'ExchId\'] },\r\n                pagination: true,\r" +
"\n                collapsible: false,\r\n                //JQMergeCells: { fields: " +
"[\'Id\', \'ExchTitle\', \'ExchSpecName\', \'ExchEmpName\', \'SpecIdent\', \'EmpIdent\', \'dat" +
"eIdent\', \'NumberIdent\', \'projIdent\', \'process\'] },\r\n                url: request" +
"Url,\r\n                columns: [[\r\n                    {\r\n                      " +
"  title: \'项目名称\', field: \'NumberIdent\', width: \'240\', halign: \'center\', align: \'l" +
"eft\',\r\n                        formatter: function (val, row) {\r\n               " +
"             return row.ProjName;\r\n                        }\r\n                  " +
"  },\r\n\r\n                    {\r\n                        title: \'资料名称\', field: \'Ex" +
"chTitle\', width: 220, align: \'left\', halign: \'center\'\r\n                    },\r\n " +
"                   {\r\n                        title: \'提资专业\', field: \'ExchSpecNam" +
"e\', width: 120, align: \'center\', halign: \'center\'\r\n                    },\r\n     " +
"               {\r\n                        title: \'提资人\', field: \'ExchEmpName\', wi" +
"dth: 80, align: \'center\', halign: \'center\'\r\n                    },\r\n            " +
"        { title: \'收资专业\', field: \'RecSpecName\', width: 120, align: \'left\', halign" +
": \'center\' },\r\n                    { title: \'收资人\', field: \'RecEmpName\', width: 8" +
"0, align: \'left\', halign: \'center\' },\r\n                    {\r\n                  " +
"      title: \'接收时间\', field: \'RecTime\', width: 100, align: \'center\', halign: \'cen" +
"ter\',\r\n                        formatter: JQ.tools.DateTimeFormatterByT\r\n\r\n     " +
"               },\r\n                   { title: \'处理意见\', field: \'RecContent\', widt" +
"h: 120, align: \'left\', halign: \'center\' },\r\n\r\n                   {\r\n            " +
"           title: \'接收状态\', field: \'State\', width: 90, align: \'center\', halign: \'c" +
"enter\',\r\n                       formatter: function (val, row) {\r\n              " +
"             if (row.State == \'通过\') {\r\n                               return \'<s" +
"pan style=\"color:green;\">\' + row.State + \'</span>\'\r\n                           }" +
"\r\n                           else {\r\n                               if (row.Stat" +
"e == \"回退\") {\r\n                                   return \'<span style=\"color:red;" +
"\">\' + row.State + \'</span>\'\r\n                               }\r\n                 " +
"              else {\r\n                                   return row.State;\r\n    " +
"                           }\r\n                           }\r\n                    " +
"   }\r\n\r\n                   },\r\n                   {\r\n                       fiel" +
"d: \"ExchId\", title: \"流程审批进度\", align: \"center\", halign: \"center\", width: 90,\r\n   " +
"                    formatter: JQ.Flow.showFlowProgress(\"DesExchRecGrid\", \"DesEx" +
"ch\", \"ExchId\")\r\n\r\n                   },\r\n                {\r\n                    " +
"title: \'操作\', field: \'Id\', width: 220, align: \'center\', halign: \'center\',\r\n      " +
"              formatter: function (val, row) {\r\n                        var url " +
"= \'&nbsp;<a btn class=\"easyui-linkbutton\" onclick=\"ReverseExch(\' + row.ExchId + " +
"\',\' + row.Id + \')\">反提</a>\';// +\r\n                         //   \'&nbsp;<a btn cla" +
"ss=\"easyui-linkbutton\" onclick=\"UrgenExch(\' + row.ExchId + \',\' + row.flowNodeId " +
"+ \')\">催资</a>\';//表示反提\r\n                        var urgenUrl = \'<a btn class=\"easy" +
"ui-linkbutton\" onclick=\"UrgenExch(\' + row.ExchId + \',\' + row.flowNodeId + \')\">催资" +
"</a>\';\r\n                        if (row.FlowStatusID == 3) {//审批完成的情况\r\n         " +
"                   if (row.RecEmpId == EmpId || row.RecEmpId == \"0\") {\r\n        " +
"                        if (row.IdentId == 1) {\r\n                               " +
"     if (row.RecStatus == 0) {\r\n                                        return \'" +
"<a btn class=\"easyui-linkbutton\" onclick=\"RecApprove(\' + row.Id + \')\">处理</a>\' + " +
"url;\r\n                                    }\r\n                                   " +
" else {\r\n                                        return \'<a btn class=\"easyui-li" +
"nkbutton\" onclick=\"RecApprove(\' + row.Id + \')\">查看</a>\' + url;\r\n                 " +
"                   }\r\n                                }\r\n                       " +
"         else {\r\n                                    return \'<a btn class=\"easyu" +
"i-linkbutton\" onclick=\"Accept(\' + row.Id + \')\">接收</a>\' + url;\r\n                 " +
"               }\r\n                            }\r\n                            els" +
"e {\r\n                                return \'<a btn class=\"easyui-linkbutton\" on" +
"click=\"RecApprove(\' + row.Id + \')\">查看</a>\' + url;\r\n                            }" +
"\r\n                        }\r\n                        else {\r\n                   " +
"         //退回的情况，收资人可以下载附件，但是不能进行其他操作\r\n                            if (row.FlowS" +
"tatusID == 2 && row.FlowStatusName.indexOf(\"退回\") >= 0) {\r\n                      " +
"          return \'<a btn class=\"easyui-linkbutton\" onclick=\"RecApprove(\' + row.I" +
"d + \')\">查看</a>\' + urgenUrl;\r\n                            }\r\n                    " +
"        else {\r\n                                return urgenUrl;\r\n              " +
"              }\r\n\r\n                        }\r\n\r\n                    }\r\n         " +
"       }\r\n\r\n                ]],\r\n                onLoadSuccess: function (row) {" +
"\r\n\r\n                    $(\"a[btn]\").linkbutton({ iconCls: \'fa fa-edit\' });\r\n\r\n  " +
"              }\r\n            })\r\n            $(\"#JQSearch\").textbox({\r\n         " +
"       buttonText: \'筛选\',\r\n                buttonIcon: \'fa fa-search\',\r\n         " +
"       height: 25,\r\n                prompt: \'资料名称、资料内容\',\r\n                onClic" +
"kButton: function () {\r\n                    JQ.datagrid.searchGrid(\r\n           " +
"             {\r\n                            dgID: \'DesExchRecGrid\',\r\n           " +
"                 loadingType: \'datagrid\',\r\n                            queryPara" +
"ms:\r\n                                {\r\n                                    KeyT" +
"ext: $(\"#JQSearch\").textbox(\'getValue\'),\r\n                                    st" +
"artTime: $(\"#startTime\").datebox(\'getValue\'),\r\n                                 " +
"   endTime: $(\"#endTime\").datebox(\'getValue\')\r\n                                }" +
"\r\n                        });\r\n                }\r\n            });\r\n\r\n\r\n        }" +
");\r\n        // 接收\r\n        function Accept(id) {\r\n            JQ.tools.ajax({\r\n " +
"               url: \'");

            
            #line 163 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("RecExchange", "DesReceive"));

            
            #line default
            #line hidden
WriteLiteral(@"?Id=' + id,
                succesCollBack: function (data) {
                    $(""#DesExchRecGrid"").datagrid(""reload"");
                }
            });
        }


        function closeDialog() {
            JQ.dialog.dialogClose();
        }

        //收资审批页面信息
        function RecApprove(RecId) {
            JQ.dialog.dialog({
                title: '收资详细信息',
                width: '1200',
                height: '700',
                url: '");

            
            #line 181 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("RecInfoApprove", "DesReceive", new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral(@"?Id=' + RecId,
                onClose: function () {
                    $(""#DesExchRecGrid"").datagrid(""reload"");
                }
            });
        }

        function ReverseExch(ExchId, RecId) {
            JQ.dialog.dialog({
                title: '反提资页面信息',
                width: '1200',
                height: '700',
                url: '");

            
            #line 193 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("ReverseExch","DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral(@"?ExchId=' + ExchId + '&RecId=' + RecId + '&ReverseIdent=2',
                onClose: function () {
                    $(""#DesExchRecGrid"").datagrid(""reload"");
                }
            });
        }
        //催资
        function UrgenExch(ExchId, flowNodeId) {
            JQ.tools.ajax({
                url: '");

            
            #line 202 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("UrgenExch", "DesExch",new { @area="Design"}));

            
            #line default
            #line hidden
WriteLiteral(@"?ExchId=' + ExchId + '&flowNodeId=' + flowNodeId,
                succesCollBack: function (data) {
                    $(""#DesExchRecGrid"").datagrid(""reload"");
                }
            });
        }
        //索资
        function AskingExch() {
            JQ.dialog.dialog({
                title: '索资',
                width: '800',
                height: '400',
                url: '");

            
            #line 214 "..\..\Views\DesReceive\ExchRecList.cshtml"
                 Write(Url.Action("AskingExch","DesExch",new { @area="design"}));

            
            #line default
            #line hidden
WriteLiteral(@"'
            });
        }

        function ChangeTitle() {
            var $obj = $('div[class=""datagrid-body""]').find('td[field=""process""]').children('div').children('span');
            for (var index = 0; index < ($obj).length; index++) {
                var $target = $obj.eq(index);
                if ($target.text() != ""未审批"" && $target.text() != """") {

                    $target.text(""查看流程"");
                }
            }



        }
        JQ.Flow.onLoadFlowProgress = function () {
            //ChangeTitle();
        }
    </script>
");

WriteLiteral("    ");

            
            #line 235 "..\..\Views\DesReceive\ExchRecList.cshtml"
Write(RenderPage("~/Areas/Core/Views/Shared/_Init.cshtml"));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

});

WriteLiteral("\r\n");

DefineSection("Body_Content", () => {

WriteLiteral("\r\n    <table");

WriteLiteral(" id=\"DesExchRecGrid\"");

WriteLiteral("></table>\r\n    <div");

WriteLiteral(" id=\"DesExchPanel\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;border:none;\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n            <a");

WriteLiteral(" id=\"AskingExch\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-plus\'\"");

WriteLiteral(" onclick=\"AskingExch()\"");

WriteLiteral(">索资</a>\r\n        </div>\r\n        <div");

WriteLiteral(" style=\"margin-left:20px;float:left;padding-bottom:5px;\"");

WriteLiteral(">\r\n            接收状态：<select");

WriteLiteral(" id=\"RecState\"");

WriteLiteral(" class=\"easyui-combobox\"");

WriteLiteral(" style=\"width:100px;\"");

WriteLiteral("></select>\r\n        </div>\r\n       \r\n        <div");

WriteLiteral(" style=\"margin-left:20px;float:left;padding-bottom:5px;\"");

WriteLiteral(">筛选条件：<input");

WriteLiteral(" id=\"JQSearch\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(" /></div>\r\n        \r\n        <div");

WriteLiteral(" style=\"margin-left:40px;float:left;padding-bottom:5px;\"");

WriteLiteral(">接收时间：<span>\r\n    <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"startTime\"");

WriteLiteral(" class=\"easyui-datebox\"");

WriteLiteral(" style=\"width:120px;\"");

WriteLiteral(" prompt=\"开始时间\"");

WriteLiteral(" />\r\n    --\r\n    <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"endTime\"");

WriteLiteral(" class=\"easyui-datebox\"");

WriteLiteral(" style=\"width:120px;\"");

WriteLiteral(" prompt=\"结束时间\"");

WriteLiteral(" />\r\n</span> </div>\r\n        \r\n    </div>\r\n");

});

WriteLiteral("\r\n");

        }
    }
}
#pragma warning restore 1591
