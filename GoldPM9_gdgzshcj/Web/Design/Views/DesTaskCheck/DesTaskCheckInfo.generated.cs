#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesTaskCheck/DesTaskCheckInfo.cshtml")]
    public partial class _Views_DesTaskCheck_DesTaskCheckInfo_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.DesTaskCheck>
    {
        public _Views_DesTaskCheck_DesTaskCheckInfo_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteAttribute("src", Tuple.Create(" src=\"", 86), Tuple.Create("\"", 139)
            
            #line 4 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 92), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/jquery.flex-images.js")
            
            #line default
            #line hidden
, 92), false)
);

WriteLiteral("></script>\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 157), Tuple.Create("\"", 213)
            
            #line 5 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 164), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/picbox/css/picbox.css")
            
            #line default
            #line hidden
, 164), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n");

WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteAttribute("src", Tuple.Create(" src=\"", 358), Tuple.Create("\"", 417)
            
            #line 7 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 364), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/picbox/jquery.mousewheel.js")
            
            #line default
            #line hidden
, 364), false)
);

WriteLiteral("></script>\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteAttribute("src", Tuple.Create(" src=\"", 460), Tuple.Create("\"", 508)
            
            #line 8 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 466), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/picbox/picbox.js")
            
            #line default
            #line hidden
, 466), false)
);

WriteLiteral("></script>\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    var CheckCurrentEmpID=");

            
            #line 10 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                     Write(ViewBag.CheckCurrentEmpID);

            
            #line default
            #line hidden
WriteLiteral(";\r\n    JQ.form.submitInit({\r\n        formid: \'DesTaskCheckForm\',//formid提交需要用到\r\n " +
"       //$form:$(\"#DesTaskCheckform\"),\r\n        buttonTypes: [\'submit\', \'close\']" +
",//默认按钮\r\n        beforeFormSubmit: function () {\r\n            var roots = $(\"#de" +
"signFile\").treegrid(\"getRoots\");\r\n            var addData = [];\r\n\r\n            i" +
"f (roots != null && roots.length > 0) {\r\n                $.each(roots, function " +
"(i, e) {\r\n                    if (e.AttachExt != \".\") {\r\n                       " +
" addData.push({\r\n                            AttachId: e.AttachID,\r\n            " +
"                AttachFlowNode: e.AttachFlowNodeJson == \"\" ? [] : JSON.parse(e.A" +
"ttachFlowNodeJson).hasOwnProperty(\"root\") ? JSON.stringify((JSON.parse(e.AttachF" +
"lowNodeJson).root.item)) : e.AttachFlowNodeJson\r\n                        });\r\n  " +
"                  }\r\n\r\n\r\n                    var childroot = $(\"#designFile\").tr" +
"eegrid(\"getChildren\", e.AttachID);\r\n                    if (childroot != null &&" +
" childroot.length > 0) {\r\n                        $.each(childroot, function (ic" +
", ec) {\r\n                            if (ec.AttachExt == \".\") {\r\n               " +
"                 return true;\r\n                            }\r\n                  " +
"          addData.push({\r\n                                AttachId: ec.AttachID," +
"\r\n                                AttachFlowNode: ec.AttachFlowNodeJson == \"\" ? " +
"[] : ec.AttachFlowNodeJson.hasOwnProperty(\"root\") ? JSON.stringify((JSON.parse(e" +
"c.AttachFlowNodeJson).root.item)) : ec.AttachFlowNodeJson\r\n                     " +
"       });\r\n                        });\r\n                    }\r\n                " +
"})\r\n                $(\"#AttachIDDate\").val(JSON.stringify(addData));\r\n          " +
"  }\r\n\r\n        },\r\n        succesCollBack: function (data) {\r\n            //成功回调" +
"函数,data为服务器返回值\r\n            var info = JQ.tools.findDialogInfo();\r\n            /" +
"/刷新上一级数据表格\r\n            if (typeof (window[\"FormCheckRefresh_\" + info.parentid])" +
" == \"function\") {\r\n                window[\"FormCheckRefresh_\" + info.parentid]()" +
";\r\n            }\r\n            //关闭窗体放在最后一步执行，以避免找不到事件源\r\n            window.top.$" +
"(\"#\" + info.divid).dialog(\'close\');\r\n        }\r\n    });\r\n\r\n\r\n    function getImg" +
"() {\r\n        if (window.JinQu) {\r\n            JinQu.query(\'httpScreenShot\', { u" +
"rl: \'");

            
            #line 61 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                             Write(ViewBag.Url);

            
            #line default
            #line hidden
WriteLiteral(@"?EmpID='+CheckCurrentEmpID }, function (file, uploadSize, totalSize) {
                console.log(file);
            }, function (response, request) {   // onSuccess
                showlist();

            }, function (error_code, error_message) {
                console.log(error_message);
                JQ.dialog.warning(error_message);
            });
        }
        else {
            JQ.dialog.warning(""请使用金曲客户端！！！"");
        }
    }


</script>
<style");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(@">
    #DesTaskCheckForm .panel-body {
        border-width: 1px;
        border-style: solid;
    }


    .flex-images {
        overflow: hidden;
    }

        .flex-images .item {
            float: left;
            margin: 4px;
            border: 1px solid #eee;
            box-sizing: content-box;
            overflow: hidden;
            position: relative;
        }

            .flex-images .item img {
                display: block;
                width: auto;
                height: 100%;
                margin-top: 0px;
            }

        .flex-images .over {
            position: absolute;
            text-align: center;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 4px 6px;
            font-size: 13px;
            color: #fff;
            background: #222;
            background: rgba(0,0,0,.7);
        }

        .flex-images .del {
            position: absolute;
            top: 0;
            right: 0;
            margin-top: 5px;
            margin-right: 5px;
            font-size: 15px;
            cursor: pointer;
        }
</style>
");

            
            #line 128 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
 using (Html.BeginForm("save", "DesTaskCheck", FormMethod.Post, new { @area = "Design", @id = "DesTaskCheckForm" }))
{
    
            
            #line default
            #line hidden
            
            #line 131 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                        

            
            #line default
            #line hidden
WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"TaskID\"");

WriteLiteral(" name=\"TaskID\"");

WriteAttribute("value", Tuple.Create(" value=\"", 4777), Tuple.Create("\"", 4800)
            
            #line 132 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 4785), Tuple.Create<System.Object, System.Int32>(ViewBag.TaskID
            
            #line default
            #line hidden
, 4785), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"Id\"");

WriteLiteral(" name=\"Id\"");

WriteAttribute("value", Tuple.Create(" value=\"", 4848), Tuple.Create("\"", 4865)
            
            #line 133 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
, Tuple.Create(Tuple.Create("", 4856), Tuple.Create<System.Object, System.Int32>(Model.Id
            
            #line default
            #line hidden
, 4856), false)
);

WriteLiteral(" />\r\n");

WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"AttachIDDate\"");

WriteLiteral(" name=\"AttachIDDate\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">提出人</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" nane=\"CheckEmpIDName\"");

WriteLiteral(">");

            
            #line 140 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                       Write(Model.CheckEmpIDName);

            
            #line default
            #line hidden
WriteLiteral("</span>\r\n                ");

WriteLiteral("\r\n\r\n            </td>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">提出日期</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" nane=\"CheckDate\"");

WriteLiteral(">");

            
            #line 146 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                  Write(Model.CheckDate.ToString("yyyy-MM-dd"));

            
            #line default
            #line hidden
WriteLiteral("</span>\r\n                ");

WriteLiteral("\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">校审建议</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 154 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
           Write(BaseData.getBaseSystem(new Params()
           {
               controlName = "CheckErrTypeID",
               isRequired = true,
               engName = "DesignErrorType",
               width = "98%",
               //ids = "CheckErrTypeID"
           }));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">校审意见</th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                <textarea");

WriteLiteral(" name=\"CheckNote\"");

WriteLiteral(" style=\"width:98%;height:200px\"");

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"multiline:true\"");

WriteLiteral(" validType=\"length[0,4000]\"");

WriteLiteral(">");

            
            #line 167 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                                                                                                                                      Write(Model.CheckNote);

            
            #line default
            #line hidden
WriteLiteral("</textarea>\r\n\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>设计" +
"文件</th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
                    $(function () {

                        JQ.treegrid.treegrid({
                            JQID: 'designFile',//数据表格ID
                            JQLoadingType: 'datagrid',//数据表格类型 [datagrid,datagrid]
                            idField: 'AttachID',
                            treeField: 'AttachName',
                            url: '");

            
            #line 182 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                             Write(Url.Action("TaskInfoGetDesTaskAttachSelDataJson","DesTask"));

            
            #line default
            #line hidden
WriteLiteral("\',//请求的地址\r\n                            queryParams: { taskId: \'");

            
            #line 183 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                               Write(ViewBag.taskId);

            
            #line default
            #line hidden
WriteLiteral("\', AttachIds: \'");

            
            #line 183 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                                                             Write(Html.Raw(ViewBag.fileIds));

            
            #line default
            #line hidden
WriteLiteral(@"' },
                            pagination: false,
                            rownumbers: true,
                            fit: false,
                            lines: true,
                            columns: [[
                                { title: '文件名称', field: 'AttachName', width: 400, align: 'left', halign: 'center', sortable: true },
                                {
                                    title: '文件版本', field: 'AttachVer', width: 100, align: 'center', sortable: true, formatter: function (value, row, index) {
                                        if (row.AttachExt == ""."") {
                                            return """";
                                        } else {

                                            return value;
                                        }
                                    }
                                },
                                { title: '上传日期', field: 'AttachDateUpload', width: 100, align: 'center', sortable: true, formatter: JQ.tools.DateTimeFormatterByT },
                                { title: '上传人', field: 'AttachEmpName', width: 100, align: 'center', sortable: true },
                            ]],
                        });

                        showlist();
                    })

                    function showlist() {
                        $.get(""");

            
            #line 209 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                          Write(Url.Action("GetImgList"));

            
            #line default
            #line hidden
WriteLiteral(@""",{},function (data) {
                            if (data.length>0) {
                                $(""#showImg"").empty();
                                $.each(data,function (i,e) {
                                    $(""<div class=\""item\"" data-w=\""100\"" data-h=\""100\"" rel=\""lightbox-group\"" href=\""");

            
            #line 213 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                                                                                                  Write(Url.Action("GetImg"));

            
            #line default
            #line hidden
WriteLiteral("?Id=\"+e+\"\\\"  ><img src=\\\"");

            
            #line 213 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                                                                                                                                                Write(Url.Action("GetImg"));

            
            #line default
            #line hidden
WriteLiteral(@"?Id=""+e+""\"" ><div class=\""over\"" >查看大图</div><i class='fa fa-times-circle del' onclick='removeEmp(this,""+e+"")' ><i/></div>"").appendTo($(""#showImg""));
                                })
                                $(""<div class=\""item\"" data-w=\""100\"" data-h=\""100\"" style=\""width:100px;height:100px;text-align: center;line-height: 100px;border:1px dashed red\"" onclick=\""getImg()\""><span>贴图</span></div>"").appendTo($(""#showImg""));
                            }
                            //$(""#"").appendTo($(""#showImg""));

                            $(""#showImg"").flexImages({ rowHeight: 100 });
                            if (window.JinQu) {
                                JinQu.clearClipboard();
                            }
                            showBigPic();

                        },""json"")
                    }
                </script>
                <table");

WriteLiteral(" id=\"designFile\"");

WriteLiteral("></table>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th>\r\n    " +
"            贴图信息\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"showImg\"");

WriteLiteral(" class=\"flex-images\"");

WriteLiteral(">\r\n                    ");

WriteLiteral("\r\n                    <div");

WriteLiteral(" class=\"item\"");

WriteLiteral(" data-w=\"100\"");

WriteLiteral(" data-h=\"100\"");

WriteLiteral(" style=\"text-align: center;line-height: 100px;border:1px dashed red\"");

WriteLiteral(" onclick=\"getImg()\"");

WriteLiteral("><span>贴图</span></div>\r\n                </div>\r\n                <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">

                    //显示大图
                    function showBigPic() {
                        $(""div[rel^='lightbox']"").picbox({}, null, function (el) {
                            return (this == el) || (($(this).attr(""rel"").length > 8) && ($(this).attr(""rel"") == $(el).attr(""rel"")));
                        });
                    }

                    function removeEmp(thisDiv,id) {

                        $.post('");

            
            #line 251 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                           Write(Url.Action("DelImg"));

            
            #line default
            #line hidden
WriteLiteral(@"',{'id':id},function () {
                            $(thisDiv).parent().remove();
                        })
                        if (window.event) {
                            window.event.stopPropagation();
                        }
                    }
                </script>
            </td>
        </tr>
        <tr>
            <th>
                上传附件
            </th>
            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

            
            #line 266 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                
            
            #line default
            #line hidden
            
            #line 266 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                  
                    var uploader = new DataModel.FileUploader();
                    uploader.RefID = Model.Id;
                    uploader.RefTable = "DesTaskCheck";
                    uploader.Name = "UploadFile1";
                    
            
            #line default
            #line hidden
            
            #line 271 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                Write(Html.Partial("~/Areas/Core/Views/UserControl/FileUploader.cshtml", uploader));

            
            #line default
            #line hidden
            
            #line 271 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"
                                                                                                   
                
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

            
            #line 278 "..\..\Views\DesTaskCheck\DesTaskCheckInfo.cshtml"

                    }

            
            #line default
            #line hidden
        }
    }
}
#pragma warning restore 1591
