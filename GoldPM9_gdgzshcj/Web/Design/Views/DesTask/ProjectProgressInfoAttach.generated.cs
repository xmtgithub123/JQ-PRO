#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesTask/ProjectProgressInfoAttach.cshtml")]
    public partial class _Views_DesTask_ProjectProgressInfoAttach_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_DesTask_ProjectProgressInfoAttach_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<style");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(@">
    #ProjectProgressInfoAttachDiv .tree-title {
        height: auto;
    }
    #ProjectProgressInfoAttachDiv .fa-folder,
    #ProjectProgressInfoAttachDiv .fa-folder-open {
        color: #ffb300;
    }

    .FlowNodeClass td {
        font-size: 12px !important;
        height: 20px !important;
        border: 1px solid #D3D3D3;
    }
</style>
<style");

WriteLiteral(" type=\"text/css\"");

WriteLiteral(@">
    .jq-panel .list-group-item {
        border-bottom: 1px solid #dbdbdb;
        padding: 10px 15px;
    }

    .jq-panel-heading {
        font-weight: bold;
    }

    .jq-btn-block {
        width: auto;
    }

    .jq-btn {
        padding: 2px 12px;
    }

    .jq-panel .list-group-item span.item-title {
        display: inline-block;
        float: left;
        width: 60px;
        text-align: left;
        margin-right: 5px;
    }

    .jq-panel .list-group-item p.item-text {
        padding-left: 70px;
        /* margin: -15px 0; */
        text-indent: -0px;
        color: #848484;
    }
</style>

<div");

WriteLiteral(" id=\"ProjectProgressInfoAttachDiv\"");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" data-options=\"fit:true\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" data-options=\"region:\'center\',border:false\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"easyui-layout\"");

WriteLiteral(" data-options=\"fit:true\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" data-options=\"region:\'north\',border:false\"");

WriteLiteral(" style=\"border-right-width:1px;border-bottom-width:1px;overflow:hidden\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" style=\"height:30px;padding:5px 0px;\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" style=\"float:left;margin-left:5px;\"");

WriteLiteral(">\r\n                        <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" id=\"reloadFiles\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-repeat\',plain:true\"");

WriteLiteral(">刷新</a>\r\n                        <a");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" id=\"downFile\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-download\'\"");

WriteLiteral(">下载</a>\r\n                    </div>\r\n                    <div");

WriteLiteral(" style=\"float:right;margin-right:5px;margin-top:7px;\"");

WriteLiteral(">\r\n                        节点状态：\r\n                        <span");

WriteLiteral(" class=\"node-example node-status-0-bg\"");

WriteLiteral(">未启动</span>\r\n                        <span");

WriteLiteral(" class=\"node-example node-status-1-bg\"");

WriteLiteral(">已安排</span>\r\n                        <span");

WriteLiteral(" class=\"node-example node-status-2-bg\"");

WriteLiteral(">进行中</span>\r\n                        <span");

WriteLiteral(" class=\"node-example node-status-3-bg\"");

WriteLiteral(">已完成</span>\r\n                        <span");

WriteLiteral(" class=\"node-example node-status-4-bg\"");

WriteLiteral(">已回退</span>\r\n                    </div>\r\n                </div>\r\n            </di" +
"v>\r\n            <div");

WriteLiteral(" data-options=\"region:\'center\',border:false\"");

WriteLiteral(" style=\"border-right-width:1px;\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" id=\"_desupload_$_1_temp\"");

WriteLiteral("></span>\r\n                <table");

WriteLiteral(" id=\"ProjectProgressInfoAttach_files\"");

WriteLiteral("></table>\r\n                <div");

WriteLiteral(" id=\"ProjectProgressInfoAttach_rigthMenu\"");

WriteLiteral(" data-options=\"onClick:ProjectProgressInfoAttach_rigthMenuHandler\"");

WriteLiteral(" class=\"easyui-menu\"");

WriteLiteral(" style=\"width:100px;display: none;\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" id=\"showAttachSplitFiles\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-object-ungroup\'\"");

WriteLiteral(">拆图文件</div>\r\n                    <div");

WriteLiteral(" id=\"showAttachHistory\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-history\'\"");

WriteLiteral(">历史版本</div>\r\n                    <div");

WriteLiteral(" id=\"showAttachInfo\"");

WriteLiteral(" data-options=\"iconCls:\'fa fa-info-circle\'\"");

WriteLiteral(">文件属性</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </di" +
"v>\r\n</div>\r\n\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3188), Tuple.Create("\"", 3236)
            
            #line 82 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
, Tuple.Create(Tuple.Create("", 3194), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/touchSlider.js")
            
            #line default
            #line hidden
, 3194), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3279), Tuple.Create("\"", 3331)
            
            #line 83 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
, Tuple.Create(Tuple.Create("", 3285), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/uploader/upload.js")
            
            #line default
            #line hidden
, 3285), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3374), Tuple.Create("\"", 3433)
            
            #line 84 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
, Tuple.Create(Tuple.Create("", 3380), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/uploader/jq.taskUpload.js")
            
            #line default
            #line hidden
, 3380), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3476), Tuple.Create("\"", 3523)
            
            #line 85 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
, Tuple.Create(Tuple.Create("", 3482), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/JQ/DesFlow.js")
            
            #line default
            #line hidden
, 3482), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n\r\n    var _ProjectProgressInfoAttachDesignUpload = new JQ.taskUpload();\r\n\r\n   " +
" var _ProjectProgressInfoAttach_projId = ");

            
            #line 91 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                       Write(ViewBag.projId);

            
            #line default
            #line hidden
WriteLiteral(";\r\n    var _ProjectProgressInfoAttach_taskGroupId = ");

            
            #line 92 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                            Write(ViewBag.taskGroupId);

            
            #line default
            #line hidden
WriteLiteral(";\r\n    var _ProjectProgressInfoAttach_taskId = ");

            
            #line 93 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                       Write(ViewBag.taskId);

            
            #line default
            #line hidden
WriteLiteral(@";


    // 打开模态对话框
    function ProjectProgressInfoAttach_showModelDialog(title, url, width, height, onclose) {
        var _ProjectProgressInfoAttach_DialogdivId = JQ.dialog.dialog({
            title: decodeURIComponent(title),
            url: url,
            width: width,
            height: height,
            JQID: """",
            JQLoadingType: """",
            iconCls: ""fa fa-table"",
            onClose: onclose
        });
        JQ.Flow.stopBubble();

        // 刷新列表
        window.top[""_DialogCallback_"" +_ProjectProgressInfoAttach_DialogdivId] = function () {
            $(""#ProjectProgressInfoAttach_files"", $(""#ProjectProgressInfoAttachDiv"")).treegrid(""unselectAll"");
            $(""#ProjectProgressInfoAttach_files"", $(""#ProjectProgressInfoAttachDiv"")).treegrid(""reload"");
        }
    }

    // 初始化附件列表
    function ProjectProgressInfoAttachInit() {
        _ProjectProgressInfoAttachDesignUpload.requireurl = '");

            
            #line 119 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                                        Write(Url.Action("ProjectProgressInfoAttachGetListJson"));

            
            #line default
            #line hidden
WriteLiteral("?projId=\' + _ProjectProgressInfoAttach_projId + \'&taskGroupId=\' + _ProjectProgres" +
"sInfoAttach_taskGroupId + \'&taskId=\' + _ProjectProgressInfoAttach_taskId;\r\n     " +
"   _ProjectProgressInfoAttachDesignUpload.downloadUrl = \"");

            
            #line 120 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                                          Write(Url.Action("Download", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        _ProjectProgressInfoAttachDesignUpload.batchDownloadUrl = \"");

            
            #line 121 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                                               Write(Url.Action("BatchDownload", "ProcessFile", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        _ProjectProgressInfoAttachDesignUpload.flash_swf_url=\"");

            
            #line 122 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                                          Write(Url.Content("~/Scripts/uploader/upload.swf"));

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        _ProjectProgressInfoAttachDesignUpload.silverlight_xap_url= \"");

            
            #line 123 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                                                                 Write(Url.Content("~/Scripts/uploader/upload.xap"));

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        _ProjectProgressInfoAttachDesignUpload.init($(\"#ProjectProgressInfoAt" +
"tach_files\", $(\"#ProjectProgressInfoAttachDiv\")),{\r\n            rownumbers:true," +
"\r\n            columns: [[\r\n                { field: \'ck\', align: \'center\', check" +
"box: true, JQIsExclude: true},\r\n                { title: \'附件信息\', field: \'AttachN" +
"ame\', align: \'left\',halign:\'center\',formatter:function (value,row,index) {\r\n    " +
"                var FileName=\"\";\r\n                    row._groupName = \"\";\r\n    " +
"                if (row.AttachExt==\".\") {\r\n                        if (row.Attac" +
"hID < 0) {\r\n                            row._groupName = ProjectProgressInfoAtta" +
"ch_createTaskPathText(row); //保存分组名称，用于批量下载时创建对应的分组文件夹\r\n                        " +
"    FileName=\"<div style=\\\"float:left;cursor:pointer\\\"  onclick=\\\"expandFun(\"+ro" +
"w.AttachID+\")\\\" ><strong>\"+row._groupName+\"</strong></div>\";\r\n                  " +
"      } else {\r\n                            FileName=\"<div style=\\\"float:left;cu" +
"rsor:pointer\\\"  onclick=\\\"expandFun(\"+row.AttachID+\")\\\" ><strong>\"+row.AttachNam" +
"e+\"</strong></div>\";\r\n                        }\r\n                    }else {\r\n  " +
"                      FileName=\"<div><a href=\\\"\"+_ProjectProgressInfoAttachDesig" +
"nUpload.buildDownloadUrl(row.AttachID, { type: \'attach\' })+\"\\\" target=\'_blank\' >" +
"\"+value+\"</a>\";\r\n                        FileName+=\"</div>\";\r\n                  " +
"  }\r\n                    return FileName;\r\n                } },\r\n               " +
" { title: \'校审流程\', field: \'12\', width: 500, align: \'left\',formatter:function (val" +
"ue,row,index) {\r\n                    return \"<div class=\\\"swipe\\\"><div id=\\\"Flow" +
"Node_files_\"+row.AttachID+\"\\\" class=\\\"approve-progress\\\"></div></div>\"\r\n        " +
"        } },\r\n                { title: \"版本\", field: \"AttachVer\", width: 50, alig" +
"n: \"center\", halign: \"center\",formatter:function (value, row,index) {\r\n         " +
"           if(row.AttachExt==\".\"){\r\n                        return \"\";\r\n        " +
"            }else {\r\n\r\n                        return value;\r\n                  " +
"  }\r\n                } },\r\n                {\r\n                    title: \"大小\", f" +
"ield: \"AttachSize\", width: 76, align: \"center\", halign: \"center\", formatter: fun" +
"ction (value, row,index) {\r\n                        if(row.AttachExt==\".\"){\r\n   " +
"                         return \"\";\r\n                        }else {\r\n          " +
"                  return JQ.tools.getFileSizeText(value);\r\n                     " +
"   }\r\n                    }},\r\n                {\r\n                    title: \"修改" +
"时间\", field: \"AttachDateChange\", width: 120, align: \"center\", halign: \"center\", f" +
"ormatter: function (value, rowData,index) {\r\n                        return JQ.t" +
"ools.DateTimeFormatterByT(rowData.AttachDateChange);\r\n                    }\r\n   " +
"             },\r\n                {\r\n                    title: \"上传日期\", field: \"A" +
"ttachDateUpload\", width: 90, align: \"center\", halign: \"center\", formatter: funct" +
"ion (value, rowData,index) {\r\n                        return JQ.tools.DateTimeFo" +
"rmatterByT(rowData.AttachDateUpload);\r\n                    }\r\n                }\r" +
"\n            ]],\r\n            onLoadSuccess:function (row,data) {\r\n             " +
"   if (data.total > 0) {\r\n\r\n                    // 统一数据的分组\r\n                    " +
"Enumerable.From(data.rows).Where(\"x => x._parentId == 0\").ForEach(function(x,ind" +
"ex) {\r\n                        Enumerable.From(data.rows).Where(\"s => s._parentI" +
"d != 0 && s.AttachRefID == {0}\".format(x.AttachRefID)).ForEach(function(s){\r\n   " +
"                         s._groupName = x._groupName;\r\n                        }" +
");\r\n                    });\r\n\r\n                    $.each(data.rows,function (i," +
"e) {\r\n                        e.__checkbox = true;\r\n                        var " +
"jsonNode = [];\r\n                        if (e.AttachFlowNodeJson!=\"\") {\r\n       " +
"                     jsonNode=JSON.parse(e.AttachFlowNodeJson).root.item;\r\n\r\n   " +
"                         if (e.AttachExt!=\".\") {\r\n                              " +
"  var $table=$(\"div[id=\'FlowNode_files_\"+e.AttachID+\"\']\", $(\"#ProjectProgressInf" +
"oAttachDiv\"));\r\n                                if (e.AttachFlowNodeJson!=\"\") {\r" +
"\n                                    JQ.DesFlow.show({\r\n                        " +
"                Ctl:$table,\r\n                                        FlowData:js" +
"onNode,\r\n                                    });\r\n                              " +
"  }\r\n                            }\r\n                        }\r\n                 " +
"   });\r\n                }\r\n            },\r\n            onContextMenu: function (" +
"e, row) {\r\n                if (row == null) return;\r\n                if (row.Att" +
"achId < 0) return;\r\n                $.data(document.body, \"selectTempData\", row)" +
";//把临时数据存在缓存中\r\n                // 显示右键菜单\r\n                var $m = $(\'#ProjectPr" +
"ogressInfoAttach_rigthMenu\');\r\n                $m.menu(\'show\', {\r\n              " +
"      left: e.pageX,\r\n                    top: e.pageY\r\n                });\r\n   " +
"             e.preventDefault();\r\n            }\r\n        });\r\n\r\n        \r\n\r\n    " +
"    // 下载文件\r\n        $(\"#downFile\", $(\"#ProjectProgressInfoAttachDiv\")).click(fu" +
"nction () {\r\n            _ProjectProgressInfoAttachDesignUpload.download($(this)" +
");\r\n        });\r\n\r\n        // 刷新文件列表\r\n        $(\"#reloadFiles\", $(\"#ProjectProgr" +
"essInfoAttachDiv\")).click(function () {\r\n            //_dialogClose = false;\r\n  " +
"          $(\"#ProjectProgressInfoAttach_files\", $(\"#ProjectProgressInfoAttachDiv" +
"\")).treegrid(\"reload\");\r\n            $(\"#ProjectProgressInfoAttach_files\", $(\"#P" +
"rojectProgressInfoAttachDiv\")).treegrid(\"unselectAll\");\r\n        });\r\n    }\r\n\r\n " +
"   function ProjectProgressInfoAttach_rigthMenuHandler(item) {\r\n        var data" +
" = $.data(document.body, \"selectTempData\");//获取临时数据\r\n        //var data = $(\"#Ta" +
"skInfo_files\", $(\"#TaskInfoDiv\")).treegrid(\"getSelected\");\r\n        if (JQ.tools" +
".isJson(data)) {\r\n            switch (item.id) {\r\n                case \"showAtta" +
"chSplitFiles\":\r\n                    ProjectProgressInfoAttach_showModelDialog(\r\n" +
"                        \"拆图文件：{0}\".format(data.AttachName),\r\n                   " +
"     \'");

            
            #line 240 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                    Write(Url.Action("TaskAttachSplitFilesList"));

            
            #line default
            #line hidden
WriteLiteral(@"?AttachID=' + data.AttachID + '&AttachVer=' + data.AttachVer,
                        800,
                        700
                    );
                    break;
                case ""showAttachHistory"":
                    ProjectProgressInfoAttach_showModelDialog(
                        ""历史版本：{0}"".format(data.AttachName),
                        '");

            
            #line 248 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                    Write(Url.Action("AttachHistory", "BaseAttach", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?AttachID=' + data.AttachID,
                        600,
                        600
                    );
                    break;
                case ""showAttachInfo"":
                    ProjectProgressInfoAttach_showModelDialog(
                        ""文件属性：{0}"".format(data.AttachName),
                        '");

            
            #line 256 "..\..\Views\DesTask\ProjectProgressInfoAttach.cshtml"
                    Write(Url.Action("AttachInfo", "BaseAttach", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral(@"?AttachID=' + data.AttachID,
                        500,
                        500
                    );
                    break;
            }
        }
        //$.data(document.body, ""selectTempData"", null);//清空临时数据
        return false;
    }

    // 获取任务路径（纯文本）
    function ProjectProgressInfoAttach_createTaskPathText(row) {
        var jsonItemPath1 = row.AttachGroup;
        var jsonItemPath2 = row.AttachName;

        var separator = ""\\""; //＞
        var arrItemPath1 = JSON.parse(jsonItemPath1);
        var arrItemPath2 = JSON.parse(jsonItemPath2);

        var path1 = (Enumerable.From(arrItemPath1).OrderBy(""x=>x.rownum"").Select(function (x) { return x.text; }).ToArray());
        var path2 = (Enumerable.From(arrItemPath2).OrderBy(""x=>x.rownum"").Select(function (x) { return x.text; }).ToArray());
        var path = [];
        if (path1 != undefined && path1 != null) {
            path.push(path1.join(separator));
        }
        if (path2 != undefined && path2 != null && path2.length > 0) {
            path.push(path2.join(separator));
        }

        return path.join(separator);
    }

    $(function () {
        // 初始化附件列表
        ProjectProgressInfoAttachInit();
    });
</script>
");

        }
    }
}
#pragma warning restore 1591
