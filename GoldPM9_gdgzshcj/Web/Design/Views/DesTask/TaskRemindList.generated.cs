#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesTask/TaskRemindList.cshtml")]
    public partial class _Views_DesTask_TaskRemindList_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_DesTask_TaskRemindList_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\DesTask\TaskRemindList.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n\r\n");

});

WriteLiteral("\r\n");

DefineSection("Body_Content", () => {

WriteLiteral("\r\n\r\n    <div");

WriteLiteral(" id=\"DesTaskPanel\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n        <span");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n            ");

WriteLiteral("\r\n            <span");

WriteLiteral(" class=\"datagrid-btn-separator\"");

WriteLiteral(" style=\"vertical-align: middle; height: 22px;display:inline-block;float:none;padd" +
"ing-right:5px;\"");

WriteLiteral("></span>\r\n            <a");

WriteLiteral(" id=\"itemStatusWaiting\"");

WriteLiteral(" href=\"#\"");

WriteLiteral(" class=\"easyui-linkbutton node-status-1\"");

WriteLiteral(" data-options=\"toggle: true,group:\'type\'\"");

WriteLiteral(" onclick=\"changeTaskStatus(\'Waiting\')\"");

WriteLiteral(">安排给你</a>\r\n            <a");

WriteLiteral(" id=\"itemStatusNow\"");

WriteLiteral(" href=\"#\"");

WriteLiteral(" class=\"easyui-linkbutton node-status-2\"");

WriteLiteral(" data-options=\"toggle: true,group:\'type\'\"");

WriteLiteral(" onclick=\"changeTaskStatus(\'Now\')\"");

WriteLiteral(">待你处理</a>\r\n");

            
            #line 16 "..\..\Views\DesTask\TaskRemindList.cshtml"
            
            
            #line default
            #line hidden
            
            #line 16 "..\..\Views\DesTask\TaskRemindList.cshtml"
             if (ViewBag._DesTaskApproveMode == "1")
            {

            
            #line default
            #line hidden
WriteLiteral("                <a");

WriteLiteral(" id=\"itemStatusRemind\"");

WriteLiteral(" href=\"#\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"toggle: true,group:\'type\'\"");

WriteLiteral(" onclick=\"changeTaskStatus(\'Remind\')\"");

WriteLiteral(">安排给你或待你处理</a>\r\n");

            
            #line 19 "..\..\Views\DesTask\TaskRemindList.cshtml"
            }

            
            #line default
            #line hidden
WriteLiteral("            <a");

WriteLiteral(" id=\"itemStatusFinished\"");

WriteLiteral(" href=\"#\"");

WriteLiteral(" class=\"easyui-linkbutton node-status-3\"");

WriteLiteral(" data-options=\"toggle: true,group:\'type\'\"");

WriteLiteral(" onclick=\"changeTaskStatus(\'Finished\')\"");

WriteLiteral(">你已完成</a>\r\n            <a");

WriteLiteral(" id=\"itemStatusBack\"");

WriteLiteral(" href=\"#\"");

WriteLiteral(" class=\"easyui-linkbutton node-status-5\"");

WriteLiteral(" data-options=\"toggle: true,group:\'type\'\"");

WriteLiteral(" onclick=\"changeTaskStatus(\'Back\')\"");

WriteLiteral(">被你回退</a>\r\n            <span");

WriteLiteral(" class=\"datagrid-btn-separator\"");

WriteLiteral(" style=\"vertical-align: middle; height: 22px;display:inline-block;float:none;padd" +
"ing-right:5px;margin-left: 5px;\"");

WriteLiteral("></span>\r\n            ");

WriteLiteral("\r\n        </span>\r\n        <input");

WriteLiteral(" id=\"JQSearch\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(" JQWhereOptions=\"{ Key:\'ItemPath1,ItemPath2\', Contract:\'like\'}\"");

WriteLiteral(" />\r\n        ");

WriteLiteral("\r\n    </div>\r\n    <table");

WriteLiteral(" id=\"DesTaskGrid\"");

WriteLiteral("></table>\r\n\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        var _webconfig = {\r\n            serverUrl: \'");

            
            #line 33 "..\..\Views\DesTask\TaskRemindList.cshtml"
                   Write(Url.Content("~"));

            
            #line default
            #line hidden
WriteLiteral("\'\r\n        };\r\n\r\n        var _DesTaskApproveMode = \'");

            
            #line 36 "..\..\Views\DesTask\TaskRemindList.cshtml"
                              Write(ViewBag._DesTaskApproveMode);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n\r\n        var queryParams = {\r\n            itemStatus: \"Now\",\r\n            sh" +
"owAll: 0\r\n        };\r\n\r\n        $(function () {\r\n\r\n            // 任务校审模式   单步 0；" +
"同步 1\r\n            if (_DesTaskApproveMode == \"0\") {\r\n                queryParams" +
".itemStatus = \"Now\";\r\n                $(\"#itemStatusNow\").linkbutton(\'select\');\r" +
"\n            } else {\r\n                queryParams.itemStatus = \"Remind\";\r\n     " +
"           $(\"#itemStatusRemind\").linkbutton(\'select\');\r\n            }\r\n\r\n      " +
"      JQ.datagrid.datagrid({\r\n                JQButtonTypes: [\'export\'],//需要显示的按" +
"钮\r\n                JQID: \'DesTaskGrid\',//数据表格ID\r\n                JQDialogTitle: " +
"\'信息\',//弹出窗体标题\r\n                JQLoadingType: \'datagrid\',//数据表格类型 [datagrid,data" +
"grid]\r\n                url: _webconfig.serverUrl + \'Design/DesTask/TaskRemindLis" +
"tJson\',//请求的地址\r\n                queryParams: queryParams,\r\n                check" +
"OnSelect: false,//是否包含check\r\n                selectOnCheck: false,\r\n            " +
"    singleSelect: true,\r\n                toolbar: \'#DesTaskPanel\',//工具栏的容器ID\r\n  " +
"              JQExcludeCol: [1, 7],//导出execl排除的列\r\n                columns: [[\r\n " +
"                   { field: \"ck\", checkbox: true },\r\n\t\t            {\r\n\t\t        " +
"        title: \'任务路径\', field: \'ItemPathText\', align: \'left\', formatter: function" +
" (value, row, index) {\r\n\t\t                    var itemPathText = \"\";\r\n\t\t        " +
"            if (row.ItemPath1 == \"\" || row.ItemPath2 == \"\") {\r\n\t\t               " +
"         row.ItemPathText = row.ItemName;\r\n\t\t                        itemPathTex" +
"t = row.ItemName.escapeHTML();\r\n                            } else {\r\n\t\t        " +
"                row.ItemPathText = createTaskPathText(row);\r\n\t\t                 " +
"       itemPathText = createTaskPath(row);\r\n                            }\r\n\t\t   " +
"                 return itemPathText;\r\n\t\t                }\r\n\t\t            },\r\n  " +
"                  { title: \'任务负责人\', field: \'ItemEmpName\', width: 80, align: \'cen" +
"ter\', sortable: false },\r\n\t\t            { title: \'计划开始\', field: \'DatePlanStart\'," +
" width: 80, align: \'center\', sortable: false, formatter: JQ.tools.DateTimeFormat" +
"terByT },\r\n\t\t            { title: \'计划结束\', field: \'DatePlanFinish\', width: 80, al" +
"ign: \'center\', sortable: true, formatter: JQ.tools.DateTimeFormatterByT },\r\n\t\t  " +
"          {\r\n\t\t                title: \'实际完成\', field: \'DateActualFinish\', width: " +
"140, align: \'left\', sortable: false, formatter: function (value, row, index) {\r\n" +
"\t\t                    debugger;\r\n\t\t                    var result = \"\";\r\n\t\t     " +
"               var showWarring = false;\r\n\t\t                    var datePlanStart" +
" = Date.jsonStringToDate(row.DatePlanStart);\r\n\t\t                    var datePlan" +
"Finish = Date.jsonStringToDate(row.DatePlanFinish);\r\n\t\t                    var d" +
"ateActualFinish = Date.jsonStringToDate(row.DateActualFinish);\r\n\t\t              " +
"      var noDateActualFinish = dateActualFinish.getFullYear() == 1900;\r\n\r\n\t\t    " +
"                if (datePlanStart.getFullYear() > 1900 && datePlanFinish.getFull" +
"Year() == 1900) {\r\n\t\t                        // 只有计划开始时间\r\n\t\t                    " +
"} else if (datePlanStart.getFullYear() == 1900 && datePlanFinish.getFullYear() >" +
" 1900) {\r\n\t\t                        // 只有计划结束时间\r\n\t\t                        showW" +
"arring = (noDateActualFinish ? new Date() : dateActualFinish).dateDiff(\'s\', date" +
"PlanFinish) < 0\r\n\t\t                    } else if (datePlanStart.getFullYear() > " +
"1900 && datePlanFinish.getFullYear() > 1900) {\r\n                                " +
"var timeNow=\'");

            
            #line 100 "..\..\Views\DesTask\TaskRemindList.cshtml"
                                        Write(ViewBag.TimeNow);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n\t\t                        // 计划开始结束时间都有\r\n\t\t                        showWarrin" +
"g = (noDateActualFinish ?Date.jsonStringToDate(timeNow) :Date.jsonStringToDate(d" +
"ateActualFinish.format(\"yyyy-MM-dd\"))).dateDiff(\'d\', datePlanFinish) < 0\r\n\t\t    " +
"                } else {\r\n\t\t                        // 计划开始结束时间都没有\r\n\t\t          " +
"          }\r\n\t\t                    result = \'<span class=\"{2}\">{0}{1}</span>\'.fo" +
"rmat(\r\n                                (noDateActualFinish ? \'\' : dateActualFini" +
"sh.format(\'yyyy-MM-dd \')),\r\n                                (showWarring ? (noDa" +
"teActualFinish ? \'超期未完成\' : \'超期完成\') : \'\'),\r\n                                (show" +
"Warring ? \'label label-important\' : \'\')\r\n                            );\r\n\t\t     " +
"               return result;\r\n\t\t                }\r\n\t\t            },\r\n          " +
"          {\r\n                        title: \'操作\', field: \'ItemAction\', width: 90" +
", align: \'center\', formatter: function (value, row, index) {\r\n                  " +
"          var title = value + \"：\" + row.ItemPathText.escapeHTML();\r\n            " +
"                return \"<a href=\\\"javascript:void(0);\\\" btnAction class=\\\"easyui" +
"-linkbutton\\\" data-options=\\\"plain:true\\\" onclick=\'openDialog(\\\"\" + title + \"\\\"," +
"\" + row.ItemType + \",\" + row.ProjId + \",\" + row.TaskGroupId + \",\" + row.TaskSpec" +
"Id + \",\" + row.TaskId + \",\" + row.TabId + \")\'>\" + value + \"</a>\";\r\n             " +
"           }\r\n                    }\r\n                ]],\r\n                onLoad" +
"Success: function (data) {\r\n                    setRowCheckbox(data);\r\n         " +
"           setBtnAction();\r\n                }\r\n            });\r\n\r\n            $(" +
"\"#JQSearch\").textbox({\r\n                buttonText: \'筛选\',\r\n                butto" +
"nIcon: \'fa fa-search\',\r\n                height: 25,\r\n                prompt: \'项目" +
"名称、任务名称\',\r\n                onClickButton: function () {\r\n                    JQ." +
"datagrid.searchGrid({\r\n                        dgID: \'DesTaskGrid\',\r\n           " +
"             loadingType: \'datagrid\',\r\n                        queryParams: quer" +
"yParams\r\n                    });\r\n                }\r\n            });\r\n        })" +
";\r\n\r\n        // 切换待办任务状态\r\n        function changeTaskStatus(status) {\r\n         " +
"   queryParams.itemStatus = status;\r\n            JQ.datagrid.searchGrid({\r\n     " +
"           dgID: \'DesTaskGrid\',\r\n                loadingType: \'datagrid\',\r\n     " +
"           queryParams: queryParams\r\n            });\r\n        }\r\n\r\n        // 获取" +
"任务路径（纯文本）\r\n        function createTaskPathText(row) {\r\n            var jsonItemP" +
"ath1 = row.ItemPath1;\r\n            var jsonItemPath2 = row.ItemPath2;\r\n\r\n       " +
"     var separator = \" ＞ \";\r\n            var arrItemPath1 = JSON.parse(jsonItemP" +
"ath1);\r\n            var arrItemPath2 = JSON.parse(jsonItemPath2);\r\n\r\n           " +
" var path1 = (Enumerable.From(arrItemPath1).OrderBy(\"x=>x.rownum\").Select(functi" +
"on (x) { return x.text; }).ToArray());\r\n            var path2 = (Enumerable.From" +
"(arrItemPath2).OrderBy(\"x=>x.rownum\").Select(function (x) { return x.text; }).To" +
"Array());\r\n            var path = [];\r\n            if (path1 != undefined && pat" +
"h1 != null) {\r\n                path.push(path1.join(separator));\r\n            }\r" +
"\n            if (path2 != undefined && path2 != null && path2.length > 0) {\r\n   " +
"             path.push(path2.join(separator));\r\n            }\r\n\r\n            swi" +
"tch (row.ItemType) {\r\n                case 5:\r\n                    path.push(\"{0" +
"}\".format(row.ItemName));\r\n                    break;\r\n            }\r\n\r\n        " +
"    return path.join(separator);\r\n\r\n        }\r\n\r\n        // 获取任务路径（带LinkButton）\r" +
"\n        function createTaskPath(row) {\r\n            var jsonItemPath1 = row.Ite" +
"mPath1;\r\n            var jsonItemPath2 = row.ItemPath2;\r\n\r\n            var separ" +
"ator = \"<i class=\'fa fa-caret-right\' style=\'margin: 0 5px;\'></i>\";\r\n            " +
"var arrItemPath1 = JSON.parse(jsonItemPath1);\r\n            var arrItemPath2 = JS" +
"ON.parse(jsonItemPath2);\r\n\r\n            var path1 = (Enumerable.From(arrItemPath" +
"1).OrderBy(\"x=>x.rownum\").Select(function (x) { return createLinkButton(x); }).T" +
"oArray());\r\n            var path2 = (Enumerable.From(arrItemPath2).OrderBy(\"x=>x" +
".rownum\").Select(function (x) { return createLinkButton(x); }).ToArray());\r\n    " +
"        // 给当前操作节点追加状态图标，和点击操作\r\n            if (path2 != undefined && path2 != n" +
"ull && path2.length > 0) {\r\n                setPathActionStatusIcon(path2, row);" +
"\r\n            } else {\r\n                setPathActionStatusIcon(path1, row);\r\n  " +
"          }\r\n            // 拼接两部分路径\r\n            var path = [];\r\n            if " +
"(path1 != undefined && path1 != null) {\r\n                path.push(path1.join(se" +
"parator));\r\n            }\r\n            if (path2 != undefined && path2 != null &" +
"& path2.length > 0) {\r\n                path.push(path2.join(separator));\r\n      " +
"      }\r\n            // 会签在原有任务路径后，再追加会签路径\r\n            if (row.ItemType == 5) {" +
"\r\n                path.push(createLinkButton({\r\n                    active: \"Mut" +
"iSign\",\r\n                    text: row.ItemName,\r\n                    value: row" +
".TabId\r\n                }));\r\n            }\r\n\r\n            return path.join(sepa" +
"rator);\r\n\r\n        }\r\n\r\n        function createLinkButton(data) {\r\n            /" +
"/data = {\"rownum\":1,\"value\":34,\"text\":\"常州河海路110kV输变电2#主变扩建工程\",\"active\":\"TaskGrou" +
"p\"}\r\n            var btn = \'<a href=\"javascript:void(0);\" onclick=\"clickLinkButt" +
"on(this, \\\'{0}\\\', \\\'{1}\\\', {2})\">{1}</a>\'.format(data.active, data.text, data.va" +
"lue);\r\n            return btn;\r\n        }\r\n\r\n        function clickLinkButton(_t" +
"his, active, text, id) {\r\n            var url = \"\";\r\n            switch (active)" +
" {\r\n                case \"Project\":\r\n                    //  项目查看页面\r\n           " +
"         url = _webconfig.serverUrl + \'Project/Project/ProjInfoOnlyRead?id=\' + i" +
"d;\r\n                    JQ.dialog.dialog({\r\n                        title: \'{0}\'" +
".format(text),\r\n                        url: url,\r\n                        width" +
": 1024,\r\n                        height: 900,\r\n                        onClose: " +
"function () {                            \r\n                        }\r\n          " +
"          });\r\n                    break;\r\n                case \"ProjPhase\":\r\n  " +
"                  //  阶段查看页面\r\n                    url = _webconfig.serverUrl + \'" +
"Design/DesTask/TaskPhaseInfo?id=\' + id;\r\n                    JQ.dialog.dialog({\r" +
"\n                        title: \'{0}\'.format(text),\r\n                        url" +
": url,\r\n                        width: 500,\r\n                        height: 500" +
",\r\n                        onClose: function () {\r\n                        }\r\n  " +
"                  });\r\n                    break;\r\n                case \"TaskGro" +
"up\":\r\n                    //  分组查看页面\r\n                    url = _webconfig.serve" +
"rUrl + \'Design/DesTask/TaskGroupInfo?id=\' + id;\r\n                    JQ.dialog.d" +
"ialog({\r\n                        title: \'{0}\'.format(text),\r\n                   " +
"     url: url,\r\n                        width: 500,\r\n                        hei" +
"ght: 500,\r\n                        onClose: function () {\r\n                     " +
"   }\r\n                    });\r\n                    break;\r\n                case " +
"\"TaskSpec\":\r\n                    //  专业查看页面\r\n                    url = _webconfi" +
"g.serverUrl + \'Design/DesTask/TaskSpecInfo?id=\' + id;\r\n                    JQ.di" +
"alog.dialog({\r\n                        title: \'{0}\'.format(text),\r\n             " +
"           url: url,\r\n                        width: 500,\r\n                     " +
"   height: 500,\r\n                        onClose: function () {\r\n               " +
"         }\r\n                    });\r\n                    break;\r\n               " +
" case \"TaskPath\":\r\n                case \"Task\":\r\n                    //  任务查看页面\r" +
"\n                    url = _webconfig.serverUrl + \'Design/DesTask/TaskInfo?from=" +
"Remind&Id=\' + id;\r\n                    JQ.dialog.dialog({\r\n                     " +
"   title: \'{0}\'.format(text),\r\n                        url: url,\r\n              " +
"          width: 1200,\r\n                        height: 900,\r\n                  " +
"      onClose: function () {\r\n                        }\r\n                    });" +
"\r\n                    break;\r\n                case \"MutiSign\":\r\n                " +
"    //  会签查看页面\r\n                    url = _webconfig.serverUrl + \'Design/DesMuti" +
"Sign/Edit?from=Remind&Id=\' + id;\r\n                    JQ.dialog.dialog({\r\n      " +
"                  title: \'{0}\'.format(text),\r\n                        url: url,\r" +
"\n                        width: 800,\r\n                        height: 800,\r\n    " +
"                    onClose: function () {\r\n                        }\r\n         " +
"           });\r\n                    break;\r\n            }\r\n        }\r\n\r\n        " +
"// 设置处理节点状态图标\r\n        function setPathActionStatusIcon(path2, row) {\r\n         " +
"   //path2 = [{\"rownum\":1,\"value\":34,\"text\":\"常州河海路110kV输变电2#主变扩建工程\",\"active\":\"Ta" +
"skGroup\"},{...}]\r\n            var icon = \"\";\r\n            var title = \"\";\r\n     " +
"       switch (row.ItemStatus) {\r\n                case 0:\r\n                    t" +
"itle = \"未启动\";\r\n                    icon = \"fa-circle-o text-muted\";\r\n           " +
"         break;\r\n                case 1:\r\n                    title = \"已轮到\";\r\n  " +
"                  icon = \"fa-dot-circle-o text-warning\";\r\n                    br" +
"eak;\r\n                case 2:\r\n                    title = \"进行中\";\r\n             " +
"       icon = \"fa-play-circle text-success\";\r\n                    break;\r\n      " +
"          case 3:\r\n                    title = \"已完成\";\r\n                    icon " +
"= \"fa-check-circle text-info\";\r\n                    break;\r\n                case" +
" 4:\r\n                    title = row.ItemType == 1 ? \"已停止\" : \"已回退\";\r\n           " +
"         icon = \"fa-minus-circle text-danger\";\r\n                    break;\r\n    " +
"        }\r\n            row.ItemStatusName = title;\r\n            var status = \"<i" +
" class=\\\"fa \" + icon + \"\\\" title=\\\"\" + title + \"\\\"></i>&nbsp;\";\r\n            pat" +
"h2[path2.length - 1] = status + path2[path2.length - 1];\r\n        }\r\n\r\n        /" +
"/ 设置是否显示用于 批量专业策划的 复选框\r\n        function setRowCheckbox(data) {\r\n            var" +
" $desTaskGrid = $(\"#DesTaskGrid\").parent().find(\"div.datagrid-view2 div.datagrid" +
"-body tr.datagrid-row\");\r\n            for (var i = 0; i < data.rows.length; i++)" +
" {\r\n                if (allowBatchPlan(data.rows[i])) {\r\n                    //配" +
"网工程的 专业策划 在办 配电、技经可批量策划\r\n                }\r\n                else {\r\n            " +
"        $desTaskGrid.filter(\"[datagrid-row-index=\'\" + i + \"\']\").find(\"td[field=\'" +
"ck\'] :checkbox\").remove();\r\n                }\r\n            }\r\n        }\r\n\r\n     " +
"   // 设置处理节点状态图标\r\n        function setBtnAction() {\r\n            var btnColor = " +
"\"\";\r\n            switch (queryParams.itemStatus.toLocaleLowerCase()) {\r\n        " +
"        case \'waiting\':\r\n                    //已安排\r\n                    btnColor" +
" = \"node-status-1\";\r\n                    break;\r\n                case \'now\':\r\n  " +
"              case \'remind\':\r\n                    //进行中\r\n                    btn" +
"Color = \"node-status-2\";\r\n                    break;\r\n                case \'fini" +
"shed\':\r\n                    //已完成\r\n                    btnColor = \"node-status-3" +
"\";\r\n                    break;\r\n                case \'back\':\r\n                  " +
"  //已回退\r\n                    btnColor = \"node-status-5\";\r\n                    br" +
"eak;\r\n            }\r\n            $(\"a[btnAction]\").addClass(btnColor).linkbutton" +
"();\r\n        }\r\n\r\n        // 判断是否用于 批量专业策划\r\n        function allowBatchPlan(item" +
") {\r\n            return item.ItemType == 2 && item.ItemStatus == 2 && (item.Task" +
"SpecId == 1296 || item.TaskSpecId == 1294 || item.TaskSpecId == 1295) && item.Pr" +
"ojTypeID == 409;\r\n        }\r\n\r\n        // 打开批量专业策划对话框\r\n        function openSpec" +
"PlanBatchDialog() {\r\n            //获取出选择项，过滤掉不可选中的\r\n            var checkeds = $" +
"(\"#DesTaskGrid\").datagrid(\"getChecked\");\r\n            var taskIDs = [];\r\n       " +
"     for (var i = 0; i < checkeds.length; i++) {\r\n                if (allowBatch" +
"Plan(checkeds[i])) {\r\n                    //配网工程的 专业策划 在办 配电、技经可批量策划\r\n          " +
"          taskIDs.push(checkeds[i].TaskId);\r\n                }\r\n            }\r\n " +
"           if (taskIDs.length > 0) {\r\n                JQ.dialog.dialog({\r\n      " +
"              url: _webconfig.serverUrl + \'Design/DesTask/SpecPlanBatch?taskIDs=" +
"{0}\'.format(taskIDs.join(\",\")),\r\n                    title: \"专业批量策划\",\r\n         " +
"           height: 800,\r\n                    width: 1200,\r\n                    o" +
"nClose: function () {\r\n                        $(\"#DesTaskGrid\").datagrid(\"clear" +
"Selections\");\r\n                        $(\"#DesTaskGrid\").datagrid(\"clearChecked\"" +
");\r\n                        $(\"#DesTaskGrid\").datagrid(\"reload\");\r\n             " +
"       }\r\n                });\r\n            }\r\n        }\r\n\r\n        // 根据不同的动作，打开" +
"对话框\r\n        function openDialog(title, itemType, projId, taskGroupId, taskSpecI" +
"d, taskId, tabId) {\r\n            var url = \"\";\r\n            switch (itemType) {\r" +
"\n                case 1:\r\n                    //  项目策划\r\n                    if (" +
"tabId == 0) {\r\n                        url = _webconfig.serverUrl + \'Design/DesT" +
"ask/PlanTableInfo?from=Remind&tabId=\' + tabId + \'&projID=\' + projId + \'&taskGrou" +
"pId=\' + taskGroupId;\r\n                    } else {\r\n                        url " +
"= _webconfig.serverUrl + \'Design/DesTask/ProjectPlanInfo?from=Remind&tabId=\' + t" +
"abId + \'&projID=\' + projId + \'&taskGroupId=\' + taskGroupId;\r\n                   " +
" }\r\n                    //window.top.addTab(title, url, \"\");\r\n                  " +
"  JQ.dialog.dialogIframe({\r\n                        title: title,\r\n             " +
"           url: url,\r\n                        width: 1366,\r\n                    " +
"    height: 900,\r\n                        onClose: function () {\r\n              " +
"              $(\"#DesTaskGrid\").datagrid(\"reload\");\r\n                        }\r\n" +
"                    });\r\n                    break;\r\n                case 2:\r\n  " +
"                  //  专业策划\r\n                    url = _webconfig.serverUrl + \'De" +
"sign/DesTask/SpecPlanInfo?from=Remind&tabId=\' + tabId + \'&projID=\' + projId + \'&" +
"taskGroupId=\' + taskGroupId + \'&taskSpecId=\' + taskSpecId;\r\n                    " +
"//window.top.addTab(title, url, \"\");\r\n                    JQ.dialog.dialogIframe" +
"({\r\n                        title: title,\r\n                        url: url,\r\n  " +
"                      width: 1366,\r\n                        height: 900,\r\n      " +
"                  onClose: function () {\r\n                            $(\"#DesTas" +
"kGrid\").datagrid(\"reload\");\r\n                        }\r\n                    });\r" +
"\n                    break;\r\n                case 3:\r\n                    //  提交" +
"设计\r\n                    url = _webconfig.serverUrl + \'Design/DesTask/TaskInfo?fr" +
"om=Remind&Id=\' + taskId;\r\n                    JQ.dialog.dialog({\r\n              " +
"          title: title,\r\n                        url: url,\r\n                    " +
"    width: 1200,\r\n                        height: 900,\r\n                        " +
"onClose: function () {\r\n                            $(\"#DesTaskGrid\").datagrid(\"" +
"reload\");\r\n                        }\r\n                    });\r\n                 " +
"   break;\r\n                case 4:\r\n                    //  设计校审\r\n              " +
"      url = _webconfig.serverUrl + \'Design/DesTask/TaskInfoApprove?from=Remind&I" +
"d=\' + taskId;\r\n                    JQ.dialog.dialog({\r\n                        t" +
"itle: title,\r\n                        url: url,\r\n                        width: " +
"1200,\r\n                        height: 900,\r\n                        onClose: fu" +
"nction () {\r\n                            $(\"#DesTaskGrid\").datagrid(\"reload\");\r\n" +
"                        }\r\n                    });\r\n                    break;\r\n" +
"                case 5:\r\n                    //会签任务\r\n                    url = _" +
"webconfig.serverUrl + \'Design/DesMutiSign/Edit?from=Remind&Id=\' + tabId + \'&RecI" +
"D=\' + taskGroupId;\r\n                    JQ.dialog.dialog({\r\n                    " +
"    title: title,\r\n                        url: url,\r\n                        wi" +
"dth: 800,\r\n                        height: 800,\r\n                        onClose" +
": function () {\r\n                            $(\"#DesTaskGrid\").datagrid(\"reload\"" +
");\r\n                        }\r\n                    });\r\n                    brea" +
"k;\r\n            }\r\n        }\r\n    </script>\r\n");

});

WriteLiteral("\r\n");

        }
    }
}
#pragma warning restore 1591
