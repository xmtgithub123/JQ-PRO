#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 5 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/DesDiscuss/ProjDiscussListView.cshtml")]
    public partial class _Views_DesDiscuss_ProjDiscussListView_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.DesDiscuss>
    {
        public _Views_DesDiscuss_ProjDiscussListView_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 2 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
  
    Layout = "~/Areas/Core/Views/Shared/_Layout.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("head", () => {

WriteLiteral("\r\n    <link");

WriteAttribute("href", Tuple.Create(" href=\"", 143), Tuple.Create("\"", 191)
            
            #line 7 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
, Tuple.Create(Tuple.Create("", 150), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Content/bootstrap.css")
            
            #line default
            #line hidden
, 150), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n    <link");

WriteAttribute("href", Tuple.Create(" href=\"", 223), Tuple.Create("\"", 267)
            
            #line 8 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
, Tuple.Create(Tuple.Create("", 230), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Content/style.css")
            
            #line default
            #line hidden
, 230), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n    <script");

WriteAttribute("src", Tuple.Create(" src=\"", 301), Tuple.Create("\"", 355)
            
            #line 9 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
, Tuple.Create(Tuple.Create("", 307), Tuple.Create<System.Object, System.Int32>(Url.Content("~/Scripts/jquery.pagination.js")
            
            #line default
            #line hidden
, 307), false)
);

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral("></script>\r\n");

});

DefineSection("Body_Content", () => {

WriteLiteral("\r\n    <div");

WriteLiteral(" class=\"dialog-box\"");

WriteLiteral(" style=\"position:relative\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" id=\"divDisucssMask1\"");

WriteLiteral(" style=\"position:absolute;top:0px;left:0px;width:100%;height:100%;background-colo" +
"r:#EFEFEF;opacity:0.6\"");

WriteLiteral("></div>\r\n        <div");

WriteLiteral(" id=\"divDisucssMask2\"");

WriteLiteral(" style=\"position:absolute;top:40%;left:0px;width:100%;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"text-align:center;width:100%;\"");

WriteLiteral(">\r\n                <span");

WriteLiteral(" class=\"fa fa-spin fa-spinner\"");

WriteLiteral(" style=\"font-size:22px;display:inline-block;\"");

WriteLiteral("></span>\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"media media-top\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"media-left\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(">\r\n                    <img");

WriteLiteral(" class=\"media-object\"");

WriteLiteral(" data-src=\"holder.js/64x64\"");

WriteAttribute("src", Tuple.Create(" src=\"", 1105), Tuple.Create("\"", 1194)
            
            #line 22 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
, Tuple.Create(Tuple.Create("", 1111), Tuple.Create<System.Object, System.Int32>(Url.Action("GetAvatar", "user", new { @area = "Core" })
            
            #line default
            #line hidden
, 1111), false)
, Tuple.Create(Tuple.Create("", 1169), Tuple.Create("?id=", 1169), true)
            
            #line 22 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                                             , Tuple.Create(Tuple.Create("", 1173), Tuple.Create<System.Object, System.Int32>(Model.CreatorEmpId
            
            #line default
            #line hidden
, 1173), false)
);

WriteLiteral(" data-holder-rendered=\"true\"");

WriteLiteral(">\r\n                </a>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"media-body\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"media-heading\"");

WriteLiteral("><a");

WriteLiteral(" href=\"javascript:void(0)\"");

WriteLiteral(">");

            
            #line 26 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                                                    Write(Model.CreatorEmpName);

            
            #line default
            #line hidden
WriteLiteral("</a></div>\r\n                <span");

WriteLiteral(" class=\"gray small\"");

WriteLiteral(">");

            
            #line 27 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                     Write(Model.CreationTime.ToString("yyyy-MM-dd HH:mm:ss"));

            
            #line default
            #line hidden
WriteLiteral("</span>\r\n");

            
            #line 28 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                
            
            #line default
            #line hidden
            
            #line 28 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                  
                    var texts = Model.TalkContent.ToString().Split(new char[] { '\n' }, StringSplitOptions.RemoveEmptyEntries);
                    for (var i = 0; i < texts.Length; i++)
                    {

            
            #line default
            #line hidden
WriteLiteral("                        <p>");

            
            #line 32 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                       Write(texts[i]);

            
            #line default
            #line hidden
WriteLiteral("</p>\r\n");

            
            #line 33 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                    }
                
            
            #line default
            #line hidden
WriteLiteral("\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"gray-bg-wrap\"");

WriteLiteral(">\r\n            <ul");

WriteLiteral(" id=\"ulContent\"");

WriteLiteral("></ul>\r\n            <div");

WriteLiteral(" style=\"width:100%;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"pagination\"");

WriteLiteral(" class=\"pagination\"");

WriteLiteral(" style=\"float:right\"");

WriteLiteral("></div>\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"comment-wrap\"");

WriteLiteral(">\r\n            <textarea");

WriteLiteral(" id=\"txtReplyContent\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" rows=\"2\"");

WriteLiteral("></textarea>\r\n            <div");

WriteLiteral(" class=\"clearfix\"");

WriteLiteral("></div>\r\n            <button");

WriteLiteral(" type=\"button\"");

WriteLiteral(" onclick=\"addReply()\"");

WriteLiteral(" class=\"btn btn-primary pull-right btn-sm mt-10\"");

WriteLiteral(" placeholder=\"请输入您的评论\"");

WriteLiteral(">评论</button>\r\n            <div");

WriteLiteral(" class=\"clearfix\"");

WriteLiteral("></div>\r\n        </div>\r\n    </div>\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        var currentEmpID = \"");

            
            #line 51 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                        Write(ViewBag.CurrentEmpID);

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        document.body.style.overflow = \"auto\";\r\n        var currentPage = 0;\r" +
"\n        var total = parseInt(\"");

            
            #line 54 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                          Write(ViewBag.TotalReply);

            
            #line default
            #line hidden
WriteLiteral(@""");
        var isToLoad = true;
        reload();
        function showMask() {
            document.getElementById(""divDisucssMask1"").style.display = """";
            document.getElementById(""divDisucssMask2"").style.display = """";
        }
        function hideMask() {
            document.getElementById(""divDisucssMask1"").style.display = ""none"";
            document.getElementById(""divDisucssMask2"").style.display = ""none"";
        }
        function reload() {
            showMask();
            $(""#pagination"").jPagination(total, {
                num_edge_entries: 1,
                num_display_entries: 10,
                current_page: currentPage,
                callback: function (pageIndex, jq) {
                    if (!isToLoad) {
                        hideMask();
                        isToLoad = true;
                        return;
                    }
                    isToLoad = false;
                    currentPage = pageIndex;
                    $.ajax({
                        url: """);

            
            #line 80 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                          Write(Url.Action("GetReplyData", "DesDiscuss",new { @area="Design" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                        type: \"POST\",\r\n                        data: { pageIn" +
"dex: pageIndex, pageSize: 10, talkId: \"");

            
            #line 82 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                                                         Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral(@""" },
                        success: function (result) {
                            var _ulContent = document.getElementById(""ulContent"");
                            _ulContent.innerHTML = """";
                            for (var i = 0; i < result.rows.length; i++) {
                                appendReply(_ulContent, result.rows[i]);
                            }
                            total = result.total;
                            reload();
                        }
                    });
                },
                items_per_page: 10,
                prev_text: ""前一页"",
                next_text: ""后一页""
            });
        }

        function appendReply(container, data) {
            var li = JQ.Flow.createElement(""li"");
            container.appendChild(li);
            var _div = JQ.Flow.createElement(""div"", { className: ""media media-comment"" });
            li.appendChild(_div);
            var _div_1 = JQ.Flow.createElement(""div"", { className: ""media-left"" });
            _div.appendChild(_div_1);
            var _div_1_a = JQ.Flow.createElement(""a"", { href: ""javascript:void(0)"" });
            _div_1.appendChild(_div_1_a);
            var _div_1_a_img = JQ.Flow.createElement(""img"", { className: ""media-object"", ""data-src"": ""holder.js/64x64"", ""data-holder-rendered"": ""true"", src: """);

            
            #line 109 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                                                                                                                                          Write(Url.Action("GetAvatar","User",new { @area="Core" }));

            
            #line default
            #line hidden
WriteLiteral("?id=\" + data.CreatorEmpId });\r\n            _div_1_a.appendChild(_div_1_a_img);\r\n " +
"           var _div_2 = JQ.Flow.createElement(\"div\", { className: \"media-body\" }" +
", { width: \"100%\", color: \"#000000\" });\r\n            _div.appendChild(_div_2);\r\n" +
"            var _div_2_1 = JQ.Flow.createElement(\"div\", { className: \"media-comm" +
"ent\" });\r\n            _div_2.appendChild(_div_2_1);\r\n            var _div_2_1_a " +
"= JQ.Flow.createElement(\"a\", { href: \"javascript:void(0)\" });\r\n            _div_" +
"2_1.appendChild(_div_2_1_a);\r\n            _div_2_1_a.appendChild(JQ.Flow.createE" +
"lement(\"span\", null, null, data.CreatorEmpName + \" : \"));\r\n            _div_2_1." +
"appendChild(JQ.Flow.createElement(\"span\", null, null, data.ReplyContent))\r\n     " +
"       var _div_2_2 = JQ.Flow.createElement(\"div\", { className: \"media-footer\" }" +
");\r\n            _div_2.appendChild(_div_2_2);\r\n            _div_2_2.appendChild(" +
"JQ.Flow.createElement(\"span\", { className: \"small gray pull-left\" }, null, JQ.Fl" +
"ow.parseDateTimeText(data.CreationTime)));\r\n            if (currentEmpID == data" +
".CreatorEmpId.toString()) {\r\n                var _div_2_2_1 = JQ.Flow.createElem" +
"ent(\"div\", { className: \"pull-right\" });\r\n                _div_2_2.appendChild(_" +
"div_2_2_1);\r\n                var _div_2_2_1_a = JQ.Flow.createElement(\"a\", { hre" +
"f: \"javascript:void(0)\" }, { color: \"#888888\" }, \"删除\");\r\n                _div_2_" +
"2_1.appendChild(_div_2_2_1_a);\r\n                _div_2_2_1_a.onclick = function " +
"(dataID) {\r\n                    return function () {\r\n                        JQ" +
".dialog.confirm(\"确定要删除吗？\", function () {\r\n                            showMask()" +
";\r\n                            $.ajax({\r\n                                url: \"");

            
            #line 132 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                                  Write(Url.Action("delReply", "DesDiscuss", new { @area="Design" }));

            
            #line default
            #line hidden
WriteLiteral(@"?id="" + dataID,
                                type: ""POST"",
                                success: function () {
                                    reload();
                                }
                            });
                        });
                    };
                }(data.Id);
            }
            _div_2_2.appendChild(JQ.Flow.createElement(""div"", { className: ""clearfix"" }));
        }

        function addReply() {
            var content = $.trim($(""#txtReplyContent"").val());
            if (content == """") {
                return;
            }
            showMask();
            $.ajax({
                url: """);

            
            #line 152 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                  Write(Url.Action("saveReply", "DesDiscuss",new { @area="Design" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                type: \"POST\",\r\n                data: { TalkId: \"");

            
            #line 154 "..\..\Views\DesDiscuss\ProjDiscussListView.cshtml"
                             Write(Model.Id);

            
            #line default
            #line hidden
WriteLiteral(@""", ReplyContent: content },
                success: function (result) {
                    if (result.Result == false) {
                        JQ.dialog.error(result.Message);
                        return;
                    }
                    $(""#txtReplyContent"").val("""");
                    reload();
                    //appendReply(document.getElementById(""ulContent""), result.Data);
                }
            })
        }
    </script>
");

});

        }
    }
}
#pragma warning restore 1591
