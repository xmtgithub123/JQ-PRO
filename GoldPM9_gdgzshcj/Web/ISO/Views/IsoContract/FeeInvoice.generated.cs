#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 2 "..\..\Views\IsoContract\FeeInvoice.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/IsoContract/FeeInvoice.cshtml")]
    public partial class _Views_IsoContract_FeeInvoice_cshtml : System.Web.Mvc.WebViewPage<DataModel.Models.IsoForm>
    {
        public _Views_IsoContract_FeeInvoice_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
    $(function () {
  
        JQ.form.submitInit({
            formid: 'BussFeeFactForm',//formid提交需要用到
            buttonTypes: ['close'],//默认按钮
            succesCollBack: function (data) {//成功回调函数,data为服务器返回值
                var tab = $('#mainTab').tabs('getSelected');
                var index = $('#mainTab').tabs('getTabIndex', tab);

                var link = $(""#mainTab"").find(""iframe"")[index].contentWindow.document.getElementById(""FeeInvoice"");
                if (link != null) {
                    link.contentWindow.location.reload();
                    JQ.dialog.dialogClose();//关闭窗体放在最后一步执行，以避免找不到事件源
                }
                else {
                    //window.top.document.getElementById(""");

            
            #line 19 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                                      Write(Request.QueryString["iframeID"]);

            
            #line default
            #line hidden
WriteLiteral(@""").contentWindow.refreshGrid();
                    $(""#mainTab"").find(""iframe"")[index].contentWindow.refreshGrid();
                    _flowInstance.$form.parent().dialog(""close"");
                }

            },
            flow: {
                isShowSave: false,
                flowNodeID: """);

            
            #line 27 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                         Write(Request.QueryString["flowNodeID"] == null ? 0 : int.Parse(Request.QueryString["flowNodeID"]));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                flowMultiSignID: \"");

            
            #line 28 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                              Write(Request.QueryString["flowMultiSignID"] == null ? 0 : int.Parse(Request.QueryString["flowMultiSignID"]));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                url: \"");

            
            #line 29 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                  Write(Url.Action("FlowWidget", "PubFlow", new { @area = "Core" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                instance: \"_flowInstance\",\r\n                processor: \"ISO,I" +
"SO.FlowProcessor.ISOBussFeeInvoice\",\r\n                refID: \"");

            
            #line 32 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                    Write(Model.FormID);

            
            #line default
            #line hidden
WriteLiteral("\",\r\n                refTable: \"BussFeeInvoiceISO\",\r\n                beforeFormSub" +
"mit:function (param) {\r\n                    debugger;\r\n                    //ale" +
"rt(param);\r\n                    if (param==\"2\") {\r\n                        var r" +
"esult=true;\r\n                        var _tb=$(\"#FeeGrid\").datagrid(\"getRows\");\r" +
"\n                        if (_tb.length==0) {\r\n                            JQ.di" +
"alog.warning(\"请至少新增一条开票记录！！！\");\r\n                            return false;\r\n    " +
"                    }\r\n\r\n                        $.each(_tb,function (i,e) {\r\n  " +
"                          var isvalidate=$(\"#FeeGrid\").datagrid(\"validateRow\",i)" +
";\r\n                            if(!isvalidate){\r\n                               " +
" $(\"#FeeGrid\").datagrid(\"scrollTo\",i);\r\n                                JQ.dialo" +
"g.show(\"第三行,验证失败！\");\r\n                                result=false;\r\n           " +
"                     return false;\r\n                            }\r\n             " +
"               else {\r\n                                //判断合同名称、项目名称是否为选中值\r\n    " +
"                            var Editors= $(\"#FeeGrid\").datagrid(\"getEditors\",i);" +
"\r\n                                if ($(Editors[0].target).attr(\"_selectValue\")=" +
"=undefined) {\r\n                                    JQ.dialog.show(\"第\"+i+\"行,请重新选择" +
"合同！！！\");\r\n                                    result=false;\r\n                   " +
"                 return false;\r\n                                }\r\n             " +
"                   if ($(Editors[1].target).attr(\"_selectValueProj\")==undefined)" +
" {\r\n                                    JQ.dialog.show(\"第\"+i+\"行,请重新选择项目！！！\");\r\n " +
"                                   result=false;\r\n                              " +
"      return false;\r\n                                }\r\n                        " +
"    }\r\n                            if (result) {\r\n                              " +
"  $(\"#FeeGrid\").datagrid(\"endEdit\",i);\r\n                            }\r\n         " +
"               });\r\n                        //debugger;\r\n                       " +
" $(\"#HiddenData\").val(JQ.Flow.htmlEncode(JSON.stringify($(\"#FeeGrid\").datagrid(\"" +
"getRows\"))));\r\n                        //alert(JSON.stringify($(\"#FeeGrid\").data" +
"grid(\"getRows\")));\r\n                        if (!result) {\r\n                    " +
"        return result;\r\n                        }\r\n                    }\r\n\r\n    " +
"            }\r\n            }\r\n        });\r\n\r\n\r\n        $.extend($.fn.datagrid.de" +
"faults.editors, {\r\n            span: {\r\n                init: function(container" +
", options){\r\n                    var input = $(\'<span></span>\').appendTo(contain" +
"er);\r\n                    return input;\r\n                },\r\n                des" +
"troy: function(target){\r\n                    //$(target).text(\'destroy\');\r\n     " +
"           },\r\n                getValue: function(target){\r\n                    " +
"return $(target).text();\r\n                },\r\n                setValue: function" +
"(target, value){\r\n                    $(target).text(value);\r\n                }," +
"\r\n                resize: function(target, width){\r\n                    //$(targ" +
"et).textbox(\'resize\',width);\r\n                }\r\n            }\r\n        });\r\n\r\n " +
"       $.extend($.fn.datagrid.defaults.view,{\r\n            onAfterRender:functio" +
"n(target){\r\n                if (target.id==\"FeeGrid\") {\r\n                    if " +
"($(target).datagrid(\"getRows\").length!=0) {\r\n                        var _row=$(" +
"\"#FeeGrid\").datagrid(\"getRows\");\r\n                        //alert(JSON.stringify" +
"(_row));\r\n                        $.each(_row,function (i,e) {\r\n                " +
"            $(target).datagrid(\"beginEdit\",i);\r\n\r\n                            va" +
"r ed = $(\'#FeeGrid\').datagrid(\'getEditors\', i)[0];\r\n                            " +
"$(ed.target).combogrid(\'grid\').attr(\"_row\",i);\r\n                            //$(" +
"ed.target).combogrid(\'grid\').datagrid(\"load\",{FatherID:\'0\'});\r\n                 " +
"           $(ed.target).attr(\"_selectValue\",e.ConID);\r\n                         " +
"   if (e.ConID) {\r\n                                $(ed.target).combogrid(\"setVa" +
"lue\",e.ConID);\r\n                            }\r\n\r\n                            var" +
" ed1 = $(\'#FeeGrid\').datagrid(\'getEditors\', i)[1];\r\n                            " +
"$(ed1.target).combogrid(\'grid\').attr(\"_row\",i);\r\n                            $(e" +
"d1.target).attr(\"_selectValueProj\",e.ProjID);\r\n                            $(ed1" +
".target).combogrid(\"grid\").datagrid(\"load\",{ConID:e.ConID,Filter:\'\'});\r\n        " +
"                })\r\n                    }\r\n                }\r\n            },\r\n  " +
"      });\r\n    });\r\n</script>\r\n");

            
            #line 133 "..\..\Views\IsoContract\FeeInvoice.cshtml"
 using (Html.BeginForm("save_Invoice", "IsoContract", FormMethod.Post, new { @area = "Bussiness", @id = "BussFeeFactForm" }))
{
    
            
            #line default
            #line hidden
            
            #line 135 "..\..\Views\IsoContract\FeeInvoice.cshtml"
Write(Html.HiddenFor(m => m.FormID));

            
            #line default
            #line hidden
            
            #line 135 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                  

            
            #line default
            #line hidden
WriteLiteral("    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"CompanyType\"");

WriteLiteral(" name=\"CompanyType\"");

WriteLiteral(" value=\"FGS\"");

WriteLiteral(" />\r\n");

WriteLiteral("    <table");

WriteLiteral(" class=\"table table-bordered\"");

WriteLiteral(">\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"4\"");

WriteLiteral(" align=\"center\"");

WriteLiteral(" style=\"border:none;\"");

WriteLiteral(">合同开票登记</td>\r\n        </tr>\r\n        <tr>\r\n            <td");

WriteLiteral(" colspan=\"4\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" id=\"FeeGrid\"");

WriteLiteral("></table>\r\n                <input");

WriteLiteral(" id=\"HiddenData\"");

WriteLiteral(" name=\"HiddenData\"");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" />\r\n                <div");

WriteLiteral(" id=\"FeeGridPanel\"");

WriteLiteral(" JQPanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n                    <span");

WriteLiteral(" JQPanel=\"toolbarPanel\"");

WriteLiteral(">\r\n                        <a");

WriteLiteral(" id=\"FeeInvoiceAdd\"");

WriteLiteral(" name=\"FeeInvoiceAdd\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-plus\'\"");

WriteLiteral(" onclick=\"Add()\"");

WriteLiteral(">新增</a>\r\n                        <a");

WriteLiteral(" id=\"FeeInvoiceDel\"");

WriteLiteral(" name=\"FeeInvoiceDel\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" data-options=\"plain:true,iconCls:\'fa fa-minus-circle\'\"");

WriteLiteral(" onclick=\"FactDel()\"");

WriteLiteral(">删除</a>\r\n                        <span");

WriteLiteral(" class=\"label label-default\"");

WriteLiteral("><strong");

WriteLiteral(" style=\"padding:10px;\"");

WriteLiteral("> 单位：元</strong></span>\r\n\r\n                    </span>\r\n                </div>\r\n  " +
"              <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n                    var CurrentRow;\r\n                  //  alert(");

            
            #line 155 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                       Write(Model.FormID);

            
            #line default
            #line hidden
WriteLiteral(@")
                    $(function () {
                        $(""#FeeGrid"").datagrid({
                            idField: 'Id',//主键的字段
                            singleSelect: false,
                            pagination: false,
                            url: '");

            
            #line 161 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                             Write(Url.Action("jsonInvoice", "BussFeeInvoice", new { @area = "Bussiness" }));

            
            #line default
            #line hidden
WriteLiteral("?CompanyType=FGS\',//请求的地址\r\n                            queryParams: {FormID:");

            
            #line 162 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                            Write(Model.FormID);

            
            #line default
            #line hidden
WriteLiteral("},\r\n                            rownumbers: true,\r\n                            to" +
"olbar: \'#FeeGridPanel\',//工具栏的容器ID\r\n                            checkOnSelect: fa" +
"lse,//是否包含check\r\n                            selectOnCheck:false,\r\n             " +
"               checkbox:true,\r\n                            columns: [[\r\n        " +
"                        { field: \'ck\', align: \'center\', checkbox: true, JQIsExcl" +
"ude: true },\r\n                                { title: \'合同名称\', field: \'ConID\', w" +
"idth: 160, align: \'center\',\r\n                                    formatter: func" +
"tion (value, row) {\r\n                                        return row.ConName;" +
"\r\n                                    },\r\n                                    ed" +
"itor:{\r\n                                        type:\"combogrid\",\r\n             " +
"                           options: {}\r\n                                    }\r\n " +
"                               },\r\n                                { title: \'项目名" +
"称\', field: \'ProjID\', width: 160, align: \'center\', JQIsExclude: true,\r\n          " +
"                          formatter: function (value, row) {\r\n                  " +
"                      //console.log(\"====\"+JSON.stringify(row));\r\n              " +
"                          if (row.ProjID==0) {\r\n                                " +
"            return \"未指定项目\";\r\n                                        }else {\r\n  " +
"                                          return row.ProjName;\r\n                " +
"                        }\r\n\r\n                                    },\r\n           " +
"                         editor:{\r\n                                        type:" +
"\"combogrid\",\r\n                                        options: {\r\n              " +
"                              panelWidth: 650,\r\n                                " +
"            idField: \'ProjID\',\r\n                                            text" +
"Field: \'ProjName\',\r\n                                            url: \'");

            
            #line 195 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                             Write(Url.Action("JsonProject", "BussFeeFact", new { @area = "Bussiness" }));

            
            #line default
            #line hidden
WriteLiteral("?CompanyType=FGS\',\r\n                                            queryParams:{ConI" +
"D:\'0\'},\r\n                                            pagination: true,\r\n        " +
"                                    nowrap:false,//是否换行\r\n                       " +
"                     striped: true,\r\n                                           " +
" method: \'post\',\r\n                                            required: true,\r\n " +
"                                           singleSelect:true,\r\n                 " +
"                           multiline:true,\r\n                                    " +
"        height:50,\r\n                                            rownumbers:true," +
"\r\n                                            columns: [[\r\n                     " +
"                                   { field: \'ProjID\', title: \'主键ID\', width: 100 " +
",hidden:true,},\r\n                                                        { field" +
": \'ProjNumber\', title: \'项目编号\', width: 120 },\r\n                                  " +
"                      { field: \'ProjName\', title: \'项目名称\', width: 180 },\r\n       " +
"                                                 { field: \'Customer\', title: \'客户" +
"单位\', width: 150 },\r\n                                                        { fi" +
"eld: \'ConFee\', title: \'金额\', width: 100,halign:\'center\',align:\'right\' },\r\n       " +
"                                     ]],\r\n                                      " +
"      //keyHandler: {query: function (keyword) {\r\n                              " +
"              //    $(this).combogrid(\"grid\").datagrid(\'load\',{Filter:keyword,Fa" +
"therID:\'0\'});\r\n                                            //    $(this).combogr" +
"id(\"setValue\", keyword);\r\n                                            //}},\r\n   " +
"                                         onSelect:function (rowIndex, rowData) {" +
"\r\n                                                var _row=$(this).attr(\"_row\");" +
"\r\n                                                var EditorArray=$(\'#FeeGrid\')." +
"datagrid(\'getEditors\',_row);\r\n                                                //" +
"alert(rowData.ProjID);\r\n                                                $(Editor" +
"Array[1].target).attr(\"_selectValueProj\",rowData.ProjID);\r\n                     " +
"                       }\r\n                                        }\r\n           " +
"                         }\r\n                                },\r\n                " +
"                { title: \'合同金额\', field: \'ConFee\', width: 100, align: \'right\',edi" +
"tor:\'span\'},\r\n                                { title: \'已开票金额\', field: \'FeeInvoi" +
"ce\', width: 100, align: \'right\',editor:\'span\'},\r\n                               " +
" { title: \'本次开票金额\', field: \'InvoiceMoney\', width: 100, align: \'right\',editor:{ty" +
"pe:\'numberspinner\',options: {  prompt:\'\',precision: 2,  required: true,onChange:" +
"function (_new,_old) {\r\n                                    if ($(this).attr(\"_r" +
"ow\")!=undefined) {\r\n                                        debugger;\r\n         " +
"                               GetPercent($(this).attr(\"_row\"));\r\n              " +
"                      }\r\n                                } }}},\r\n               " +
"                 { title: \'本次开票日期\', field: \'InvoiceDate\', width: 100, align: \'ce" +
"nter\',formatter: JQ.tools.DateTimeFormatterByT,  editor: { type: \'datebox\',   op" +
"tions: { validType: [\'dateISO\'],required: true } }  },\r\n                        " +
"        { title: \'累计比例\', field: \'Persent\', width: 80, align: \'center\', JQIsExclu" +
"de: true,editor:\'span\' },\r\n                                { title: \'开票类别\', fiel" +
"d: \'InvoiceType\', width: 100, align: \'center\', JQIsExclude: true,editor:{type:\'c" +
"ombobox\',options:{data:");

            
            #line 236 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                                                                                                                                       Write(Html.Raw(ViewData["ConFeeType"]));

            
            #line default
            #line hidden
WriteLiteral(@",required:true,editable:false, panelHeight: 'auto',valueField:'BaseID',textField:'BaseName'}} },

                            ]],
                            onBeginEdit: beginEditFunc,
                            onEndEdit:function (rowIndex, rowData) {
                                //alert(JSON.stringify(rowData));
                                //var ed = $('#FeeGrid').datagrid('getEditors', rowIndex)[0];
                                //$(ed.target).combogrid('setValue',rowData.Id);
                            }
                        });
                    });

                    function beginEditFunc(rowIndex, rowData) {
                        var edits=$(""#FeeGrid"").datagrid(""getEditors"",rowIndex);
                        $.each(edits,function (i,eItem) {
                            if(eItem.field==""ConID""){
                                $(eItem.target).combogrid({
                                    panelWidth: 650,
                                    idField: 'Id',
                                    textField: 'ConName',
                                    url: '");

            
            #line 256 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                     Write(Url.Action("json", "BussContract", new { @area = "Bussiness" }));

            
            #line default
            #line hidden
WriteLiteral(@"?CompanyType=FGS',
                                    queryParams:{FatherID:'0','ConDefaultID':rowData.ConID},
                                    pagination: true,
                                    nowrap:false,//是否换行
                                    striped: true,
                                    method: 'post',
                                    singleSelect:true,
                                    required: true,
                                    multiline:true,
                                    height:50,
                                    rownumbers:true,
                                    mode: 'remote',
                                    columns: [[
                                                { field: 'Id', title: '合同编号', width: 100 ,hidden:true,halign:'center'},
                                                { field: 'ConNumber', title: '合同编号', width: 130,halign:'center' },
                                                { field: 'ConName', title: '合同名称', width: 180,halign:'center' },
                                                { field: 'CustName', title: '客户单位', width: 100,halign:'center' },
                                                { field: 'ConFee', title: '合同金额', width: 100,halign:'center',align:'right',formatter:function (value, row, index) {
                                                    if (row.ConFulfilType == '");

            
            #line 274 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                                                          Write((int)DataModel.ConDealWays.开口);

            
            #line default
            #line hidden
WriteLiteral("\') {\r\n                                                        if (row.children.le" +
"ngth == 0) {\r\n                                                            return" +
" \"<div><span>\" + row.SumConFee + \"</span></div>\";\r\n                             " +
"                           }else {\r\n                                            " +
"                return \"<div title=\\\"开口合同、红色金额为主合同金额\\\"><span>\" + row.SumConFee +" +
" \"</span><span style=\\\"color:red;\\\">（\" + row.ConFee + \"）</span></div>\";\r\n       " +
"                                                 }\r\n                            " +
"                        } else {\r\n                                              " +
"          if (row.children.length == 0) {\r\n                                     " +
"                       return \"<div><span>\" + row.SumConBalanceFee + \"</span></d" +
"iv>\";\r\n                                                        }\r\n              " +
"                                          else {\r\n                              " +
"                              return \"<div title=\\\"闭口合同、红色金额为主合同金额\\\"><span>\" + r" +
"ow.SumConBalanceFee + \"</span><span style=\\\"color:red;\\\">（\" + row.ConBalanceFee " +
"+ \"）</span></div>\";\r\n                                                        }\r\n" +
"                                                    }\r\n                         " +
"                       } },\r\n                                                { f" +
"ield: \'FeeInvoice\', title: \'已开票\', width: 100,halign:\'center\',align:\'right\' },\r\n " +
"                                   ]],\r\n                                    onSe" +
"lect:function (rowIndex, rowData) {\r\n                                        var" +
" _row=$(this).attr(\"_row\");\r\n                                        var EditorA" +
"rray=$(\'#FeeGrid\').datagrid(\'getEditors\',_row);\r\n                               " +
"         //设置合同选中值\r\n                                        $(EditorArray[0].tar" +
"get).attr(\"_selectValue\",rowData.Id);\r\n                                        $" +
"(EditorArray[1].target).combogrid(\"grid\").datagrid(\"load\",{ConID:rowData.Id,Filt" +
"er:\'\'});\r\n                                        var ConFeeToop=\"\";\r\n          " +
"                              var ConFeeHtml=\"\";\r\n                              " +
"          var CurrentConFee=0;//合同金额\r\n                                        if" +
" (rowData.ConFulfilType == \'");

            
            #line 300 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                                                  Write((int)DataModel.ConDealWays.开口);

            
            #line default
            #line hidden
WriteLiteral("\') {\r\n                                            ConFeeHtml= rowData.SumConFee+\"" +
"（\" + rowData.ConFee + \"）\";\r\n                                            ConFeeTo" +
"op=\"开口合同、括号中主合同金额\";\r\n                                            CurrentConFee=r" +
"owData.SumConFee;\r\n                                        } else {\r\n           " +
"                                 ConFeeHtml=rowData.SumConBalanceFee+\"（\" + rowDa" +
"ta.ConBalanceFee + \"）\";\r\n                                            ConFeeToop=" +
"\"闭口合同(结算金额)、括号中主合同金额\";\r\n                                            CurrentConFe" +
"e=rowData.SumConBalanceFee;\r\n                                        }\r\n        " +
"                                $(EditorArray[2].target).text(ConFeeHtml);\r\n    " +
"                                    $(EditorArray[2].target).attr(\"title\",ConFee" +
"Toop);\r\n                                        $(EditorArray[2].target).attr(\"C" +
"urrentConFee\",CurrentConFee);//设置合同金额\r\n                                        $" +
"(EditorArray[3].target).text(rowData.FeeInvoice==null?0:rowData.FeeInvoice);\r\n  " +
"                                      $(EditorArray[4].target).attr(\"_row\",_row)" +
";\r\n                                        //累计比例\r\n                             " +
"           GetPercent(_row);\r\n                                    }\r\n           " +
"                     });\r\n                            }\r\n                       " +
" })\r\n                    }\r\n\r\n                    function Add() {\r\n            " +
"            var rowlength=typeof($(\'#FeeGrid\').datagrid(\"getRows\"))==\"undefined\"" +
"?0:$(\'#FeeGrid\').datagrid(\"getRows\").length;\r\n                        $(\'#FeeGri" +
"d\').datagrid(\'appendRow\', {});\r\n                        $(\'#FeeGrid\').datagrid(\'" +
"beginEdit\', rowlength);\r\n                        var ed = $(\'#FeeGrid\').datagrid" +
"(\'getEditors\', rowlength)[0];\r\n                        $(ed.target).combogrid(\'g" +
"rid\').attr(\"_row\",rowlength);\r\n                        $(ed.target).combogrid(\'g" +
"rid\').datagrid(\"load\",{FatherID:\'0\'});\r\n\r\n                        var ed1 = $(\'#" +
"FeeGrid\').datagrid(\'getEditors\', rowlength)[1];\r\n                        $(ed1.t" +
"arget).combogrid(\'grid\').attr(\"_row\",rowlength);\r\n                    }\r\n\r\n     " +
"               function FactDel() {\r\n                        var htmlStr = $(\"#F" +
"eeGrid\").datagrid(\'getPanel\');\r\n\r\n                        var ckItems=$(htmlStr)" +
".find(\"input:checked\");\r\n                        var rowItems=[];\r\n             " +
"           $.each(ckItems,function (i,Ck) {\r\n                            var row" +
"Index=$(Ck).closest(\"tr\").attr(\"datagrid-row-index\");\r\n                         " +
"   rowItems.push(rowIndex);\r\n                        })\r\n\r\n                     " +
"   if (rowItems.length==0) {\r\n                            JQ.dialog.warning(\"请至少" +
"选择一项！！！\");\r\n                            return;\r\n                        }\r\n    " +
"                    if (!confirm(\"你确定要删除吗?\")) {\r\n                            ret" +
"urn;\r\n                        }\r\n                        rowItems=rowItems.rever" +
"se();\r\n                        $.each(rowItems,function (i,e) {\r\n               " +
"             $(\'#FeeGrid\').datagrid(\'deleteRow\',e);\r\n                        });" +
"\r\n\r\n                        //刷新 记录的行数\r\n                        debugger;\r\n     " +
"                   var _Newrow= $(\'#FeeGrid\').datagrid(\'getRows\');\r\n            " +
"            $.each(_Newrow,function (i,e) {\r\n                            var ed " +
"= $(\'#FeeGrid\').datagrid(\'getEditors\', i)[0];\r\n                            $(ed." +
"target).combogrid(\'grid\').attr(\"_row\",i);\r\n\r\n                            var ed1" +
" = $(\'#FeeGrid\').datagrid(\'getEditors\', i)[1];\r\n                            $(ed" +
"1.target).combogrid(\'grid\').attr(\"_row\",i);\r\n\r\n                            $($(\'" +
"#FeeGrid\').datagrid(\'getEditors\', i)[4].target).attr(\"_row\",i);\r\n               " +
"         });\r\n\r\n                    }\r\n\r\n                    function GetPercent" +
"(rowIndex) {\r\n                        var EditorArray=$(\'#FeeGrid\').datagrid(\'ge" +
"tEditors\',rowIndex);\r\n                        //获取合同金额\r\n                        " +
"debugger;\r\n                        var CurrentConFee=isNaN(parseFloat($(EditorAr" +
"ray[2].target).attr(\"CurrentConFee\")))?0:parseFloat($(EditorArray[2].target).att" +
"r(\"CurrentConFee\"));\r\n                        //获取已收款\r\n                        v" +
"ar HasFee=isNaN(parseFloat($(EditorArray[3].target).text()))?0:parseFloat($(Edit" +
"orArray[3].target).text());\r\n                        //获取本次收款金额\r\n               " +
"         var getNum= isNaN(parseFloat($(EditorArray[4].target).numberbox(\'getVal" +
"ue\')))?0:parseFloat($(EditorArray[4].target).numberbox(\'getValue\'));\r\n          " +
"              if (CurrentConFee==0) {\r\n                            $(EditorArray" +
"[6].target).text(\"0%\");\r\n                            $(EditorArray[4].target).nu" +
"mberbox({prompt:\'\'});\r\n                        }\r\n                        else {" +
"\r\n                            $(EditorArray[6].target).text(((HasFee+getNum)/Cur" +
"rentConFee*100).toFixed(2)+\"%\");\r\n                            if ((CurrentConFee" +
"-HasFee)>0) {\r\n                                $(EditorArray[4].target).numberbo" +
"x({prompt:(CurrentConFee-HasFee)});\r\n                            }\r\n            " +
"                else {\r\n                                $(EditorArray[4].target)" +
".numberbox({prompt:\'\'});\r\n                            }\r\n                       " +
" }\r\n\r\n                        $(EditorArray[6].target).attr(\"title\",\"(已开票金额+本次开票" +
"金额)/合同金额\");\r\n                    }\r\n                </script>\r\n            </td>" +
"\r\n        </tr>\r\n\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">备注说明</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" name=\"FormNote\"");

WriteLiteral(" style=\"width:98%;height:80px\"");

WriteAttribute("value", Tuple.Create(" value=\"", 24032), Tuple.Create("\"", 24055)
            
            #line 403 "..\..\Views\IsoContract\FeeInvoice.cshtml"
, Tuple.Create(Tuple.Create("", 24040), Tuple.Create<System.Object, System.Int32>(Model.FormNote
            
            #line default
            #line hidden
, 24040), false)
);

WriteLiteral(" class=\"easyui-textbox\"");

WriteLiteral(" data-options=\"multiline:true\"");

WriteLiteral(" validType=\"length[0,500]\"");

WriteLiteral(" />\r\n                ");

WriteLiteral("\r\n            </td>\r\n\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">经办人</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 411 "..\..\Views\IsoContract\FeeInvoice.cshtml"
           Write(Model.CreatorEmpName);

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n            <th");

WriteLiteral(" width=\"10%\"");

WriteLiteral(">登记日期</th>\r\n            <td");

WriteLiteral(" width=\"40%\"");

WriteLiteral(">\r\n");

WriteLiteral("                ");

            
            #line 415 "..\..\Views\IsoContract\FeeInvoice.cshtml"
           Write(Model.CreationTime.ToString("yyyy-MM-dd"));

            
            #line default
            #line hidden
WriteLiteral("\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <th>\r\n           " +
"     上传附件\r\n            </th>\r\n            <td");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n");

            
            #line 424 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                
            
            #line default
            #line hidden
            
            #line 424 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                  
                    var uploader = new DataModel.FileUploader();
                    uploader.RefID = Model.FormID;
                    uploader.RefTable = "BussFeeInvoiceISO";
                    uploader.Name = "UploadFile1";
                    
            
            #line default
            #line hidden
            
            #line 429 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                Write(Html.Partial("~/Areas/Core/Views/UserControl/FileUploader.cshtml", uploader));

            
            #line default
            #line hidden
            
            #line 429 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                                                                                                   
                
            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n");

            
            #line 437 "..\..\Views\IsoContract\FeeInvoice.cshtml"
                    }

            
            #line default
            #line hidden
        }
    }
}
#pragma warning restore 1591
