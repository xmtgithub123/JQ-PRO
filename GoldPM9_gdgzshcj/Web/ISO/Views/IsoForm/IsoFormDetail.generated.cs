#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
    using JQ.Web;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/IsoForm/IsoFormDetail.cshtml")]
    public partial class _Views_IsoForm_IsoFormDetail_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_IsoForm_IsoFormDetail_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
    $(function () {
        $(""#JQSearch"").textbox({
            buttonText: ""筛选"",
            buttonIcon: ""fa fa-search"",
            height: 25,
            prompt: ""表单名称"",
            onClickButton: function () {
                refreshGrid()
            }
        });

        JQ.datagrid.datagrid({
            JQButtonTypes: [''],
            JQPrimaryID: ""FlowID"",
            JQID: ""tbList"",
            JQDialogTitle: ""表单"",
            JQWidth: ""768"",//弹出窗体宽
            JQHeight: '700',//弹出窗体高
            JQLoadingType: ""datagrid"",
            url: """);

            
            #line 22 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
              Write(Url.Action("GetFormsByProjID", "IsoForm", new { @area = "Iso" }));

            
            #line default
            #line hidden
WriteLiteral("\",\r\n            checkOnSelect: true,\r\n            //fitColumns: true,\r\n          " +
"  nowrap: false,\r\n            toolbar: \"#list_toolbar\",\r\n            columns: [[" +
"\r\n                { field: \"ck\", align: \"center\", checkbox: true, JQIsExclude: t" +
"rue },\r\n                { title: \"表单标题\", field: \"FlowTitle\", width: \"40%\", align" +
": \"left\", halign: \"center\" },\r\n                { title: \"流程名称\", field: \"FlowName" +
"\", width: \"12%\", align: \"left\", halign: \"center\" },\r\n                { title: \"发" +
"起日期\", field: \"CreationTime\", width: \"80\", align: \"center\", halign: \"center\", for" +
"matter: JQ.tools.DateTimeFormatterByT },\r\n                { title: \"发起人\", field:" +
" \"CreatorEmpName\", width: \"80\", align: \"center\", halign: \"center\" },\r\n          " +
"      {\r\n                    title: \"进度\", field: \"FlowStatusName\", width: \"15%\"," +
" align: \"left\", halign: \"center\", formatter: function (value, rowData) {\r\n      " +
"                  var a = document.createElement(\"a\");\r\n                        " +
"a.setAttribute(\"href\", \"javascript:void(0)\");\r\n                        a.appendC" +
"hild(document.createTextNode(value));\r\n                        a.setAttribute(\"o" +
"nclick\", \"openProgressDialog(\" + rowData.ID + \",\'\" + encodeURIComponent(rowData." +
"FlowName) + \"\');\");\r\n                        return a.outerHTML;\r\n              " +
"      }\r\n                },\r\n                {\r\n                    title: \"操作\"," +
" field: \"CZ\", width: \"40\", align: \"center\", halign: \"center\",\r\n                 " +
"   formatter: function (value, row, index) {\r\n                        return \'<a" +
" btn  class=\"easyui-linkbutton\"  data-options=\"iconCls:\\\'fa fa-check\\\'\"   onclic" +
"k=\"Edit(\' + row.ID + \')\">\' + row.NodeState + \'</a>\';\r\n                    }\r\n   " +
"             }\r\n            ]],\r\n            queryParams: getQueryParameters()\r\n" +
"        });\r\n\r\n        JQ.datagrid.datagrid({\r\n            JQPrimaryID: \"id\",\r\n " +
"           JQID: \"tbListSpec\",\r\n            JQDialogTitle: \"表单\",\r\n            JQ" +
"Width: \"768\",//弹出窗体宽\r\n            JQHeight: \'700\',//弹出窗体高\r\n            JQLoading" +
"Type: \"datagrid\",\r\n            url: \"");

            
            #line 59 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
              Write(Url.Action("GetSpecByProjID", "IsoForm", new { @area = "Iso" }));

            
            #line default
            #line hidden
WriteLiteral(@""",
            checkOnSelect: true,
            fitColumns: true,
            nowrap: false,
            columns: [[
                { title: ""专业"", field: ""SpecName"", width: ""15%"", align: ""center"", halign: ""center"" },
                { title: ""卷册"", field: ""TaskName"", width: ""20%"", align: ""center"", halign: ""center"" },
                { title: ""设计人员"", field: ""TaskEmpName"", width: ""10%"", align: ""center"", halign: ""center"" },
                {
                    title: ""操作"", field: ""CZ"", width: ""10%"", align: ""center"", halign: ""center"", formatter: function (value, row, index) {
                        if (row.TaskSpecId > 0) {
                            return ""<a   id=\""btn\"" class=\""easyui-linkbutton\""  data-options=\""iconCls:'fa fa-file-word-o'\""  onclick=\""ShowDetail(' "" + row.TaskID + ""')\"">校审单</a>     <a id=\""DesExch\"" class=\""easyui-linkbutton\""  data-options=\""iconCls:'fa fa-file-word-o'\""  onclick=\""ShowDesExch(' "" + row.TaskID + ""')\"">提资单</a>"";
                        } else {
                            return ""<a   id=\""btn\"" class=\""easyui-linkbutton\""  data-options=\""iconCls:'fa fa-file-word-o'\""  onclick=\""ShowDetail(' "" + row.TaskID + ""')\"">校审单</a> "";
                        }
                    }
                }
            ]],
            queryParams: { ProjID: '");

            
            #line 77 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
                               Write(ViewBag.projID);

            
            #line default
            #line hidden
WriteLiteral("\', TaskGroupID: \'");

            
            #line 77 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
                                                               Write(ViewBag.taskGroupId);

            
            #line default
            #line hidden
WriteLiteral(@"' }
        });
    });

    window.refreshGrid = function () {
        var query = getQueryParameters();
        query.FormIDs = $(""#allformSelect"").combotree(""getValues"");
        query.FlowStatus = $(""#FlowStatusEnum"").combotree(""getValue"");
        $(""#tbList"").datagrid(""load"", query);
    }

    function getQueryParameters() {
        return { text: $(""#JQSearch"").textbox(""getText""), projectID: """);

            
            #line 89 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
                                                                  Write(ViewBag.projID);

            
            #line default
            #line hidden
WriteLiteral("\", phaseID: \"");

            
            #line 89 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
                                                                                                Write(ViewBag.PhaseID);

            
            #line default
            #line hidden
WriteLiteral(@""" };
    }


    function Edit(Id) {
        var datas = $(""#tbList"").datagrid(""getData"").rows;
        var FlowUrl = """";
        var title = """";

        $.each(datas, function (i, e) {
            // debugger;
            if (e.ID == Id) {
                FlowUrl = e.FlowUrl;
                title = e.FlowName + "" "" + e.FlowName;

            }

        });
        JQ.dialog.dialog({
            title: ""查看"",
            url: """);

            
            #line 109 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
              Write(ViewBag.sitePath);

            
            #line default
            #line hidden
WriteLiteral("\" + FlowUrl,\r\n            width: \'1024\',\r\n            height: \'100%\',\r\n        })" +
";\r\n    }\r\n\r\n    //校审单\r\n    function ShowDetail(id) {\r\n        JQ.dialog.dialog({" +
"\r\n            title: \"查看校审单\",\r\n            url: \'");

            
            #line 119 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
             Write(Url.Action("desTaskCheckDetail", "IsoTaskCheck", new { @area = "ISO" }));

            
            #line default
            #line hidden
WriteLiteral(@"?taskId=' + id,
            width: '1024',
            height: '100%',
            JQID: 'ISOCheckList',
            JQLoadingType: 'datagrid',
            iconCls: 'fa fa-th-list',
        });
    }

    //提资单
    function ShowDesExch(id) {

        JQ.dialog.dialog({
            title: ""查看提资信息"",
            url: '");

            
            #line 133 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
             Write(Url.Action("ProjDesSpecExchList", "IsoForm", new { @area = "ISO" }));

            
            #line default
            #line hidden
WriteLiteral(@"?taskId=' + id,
            width: '1024',
            height: '100%',
            JQID: 'ISOCheckList',
            JQLoadingType: 'datagrid',
            iconCls: 'fa fa-th-list',
        });
    }

    function openProgressDialog(flowID, flowName) {
        JQ.Flow.showProgressDialog(decodeURIComponent(flowName), """);

            
            #line 143 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
                                                              Write(Url.Action("Progress","PubFlow",new { @area="Core" }));

            
            #line default
            #line hidden
WriteLiteral("?flowID=\" + flowID);\r\n        JQ.Flow.stopBubble();\r\n    }\r\n</script>\r\n\r\n<div");

WriteLiteral(" data-options=\"region:\'north\'\"");

WriteLiteral(" style=\"width:205px;height:40%;\"");

WriteLiteral(">\r\n\r\n    <table");

WriteLiteral(" id=\"tbList\"");

WriteLiteral("></table>\r\n    <div");

WriteLiteral(" id=\"list_toolbar\"");

WriteLiteral(" jqpanel=\"searchPanel\"");

WriteLiteral(" style=\"padding:5px;height:auto;\"");

WriteLiteral(">\r\n        <span");

WriteLiteral(" class=\"label label-default\"");

WriteLiteral("><strong");

WriteLiteral(" style=\"padding:10px;\"");

WriteLiteral(">项目表单</strong></span>\r\n        <span");

WriteLiteral(" jqpanel=\"toolbarPanel\"");

WriteLiteral(">\r\n        </span>\r\n");

WriteLiteral("        ");

            
            #line 155 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
   Write(Html.GetComboTree(new Condition()
    {
        Area = "Iso",
        ControllerName = "IsoForm",
        ActionName = "getAllFormJson",
        controlName = "allformSelect",
        isMult = true,
        prompt = "表单类型"
    }));

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("        ");

            
            #line 164 "..\..\Views\IsoForm\IsoFormDetail.cshtml"
   Write(Html.GetComboTree(new Condition()
    {
        Area = "Iso",
        ControllerName = "IsoForm",
        ActionName = "getFlowStatusEnum",
        controlName = "FlowStatusEnum",
        isMult = false,
        prompt = "审批状态"
    }));

            
            #line default
            #line hidden
WriteLiteral("\r\n        <input");

WriteLiteral(" id=\"JQSearch\"");

WriteLiteral(" style=\"width:250px;\"");

WriteLiteral(" />\r\n\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" id=\"ProjMainTab\"");

WriteLiteral(" data-options=\"region:\'center\',border:false\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" id=\"tbListSpec\"");

WriteLiteral("></table>\r\n</div>\r\n");

        }
    }
}
#pragma warning restore 1591
